import{r as Y,c as Nh,s as da,R as Je,j as K,i as sf,B as Ag,u as Sa,a as Rg,b as wa,g as af,n as bg,d as Fh,e as Yr,f as of,h as Ig}from"./index-BBHfSmfd.js";function Og(t){const e=Sa(t),r=Y.useRef(0),s=Y.useCallback(()=>{wa&&r.current&&(cancelAnimationFrame(r.current),r.current=0)},[]);return of(s),[Y.useMemo(()=>{const o=(...l)=>{wa&&(s(),r.current=requestAnimationFrame(()=>{e.current(...l),r.current=0}))};return Object.defineProperties(o,{length:{value:t.length},name:{value:`${t.name||"anonymous"}__raf`}}),o},[]),s]}function Dg(t=!1){const e=Y.useRef(t),r=Y.useCallback(()=>e.current,[]);return Y.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),r}function Lg(t){Y.useEffect(()=>{},[])}function Mg(t,e){return typeof t=="function"?t(e):t}function Ng(t){const[e,r]=Y.useState(t),[s,o]=Og(r);return of(o),[e,s]}function au(t=!1,e=!0){const[r,s]=Y.useState(t),o=Sa(e);return[r,Y.useCallback(l=>{s(h=>l===void 0||o.current&&typeof l=="object"&&(l.constructor.name==="SyntheticBaseEvent"||typeof l._reactName=="string")?!h:!!Mg(l,h))},[])]}function Fg(t,e,r){const s=Sa(e),o=Sa(r);return Y.useMemo(()=>{let l=t;return{get current(){return o.current===void 0?l:o.current(l)},set current(h){l=s.current===void 0?h:s.current(h)}}},[])}const Oi=new Set,Uh=()=>{for(const t of Oi)t({width:window.innerWidth,height:window.innerHeight})};function Ug(t=Ng,e){const r=Rg(),[s,o]=t({width:r&&wa&&!e?window.innerWidth:0,height:r&&wa&&!e?window.innerHeight:0});return Lg(),Y.useEffect(()=>(Oi.size===0&&window.addEventListener("resize",Uh,{passive:!0}),Oi.add(o),()=>{Oi.delete(o),Oi.size===0&&window.removeEventListener("resize",Uh)}),[o]),s}const zg="dashed",zh="normal",lf="gray";var Gg=Object.defineProperty,Bg=(t,e)=>{for(var r in e)Gg(t,r,{get:e[r],enumerable:!0})},Zt={};Bg(Zt,{assign:()=>Hg,colors:()=>Xn,createStringInterpolator:()=>fu,skipAnimation:()=>pf,to:()=>gf,willAdvance:()=>gu});var ou=es(),ge=t=>$i(t,ou),lu=es();ge.write=t=>$i(t,lu);var Da=es();ge.onStart=t=>$i(t,Da);var uu=es();ge.onFrame=t=>$i(t,uu);var cu=es();ge.onFinish=t=>$i(t,cu);var Xr=[];ge.setTimeout=(t,e)=>{const r=ge.now()+e,s=()=>{const l=Xr.findIndex(h=>h.cancel==s);~l&&Xr.splice(l,1),Yn-=~l?1:0},o={time:r,handler:t,cancel:s};return Xr.splice(uf(r),0,o),Yn+=1,cf(),o};var uf=t=>~(~Xr.findIndex(e=>e.time>t)||~Xr.length);ge.cancel=t=>{Da.delete(t),uu.delete(t),cu.delete(t),ou.delete(t),lu.delete(t)};ge.sync=t=>{Ul=!0,ge.batchedUpdates(t),Ul=!1};ge.throttle=t=>{let e;function r(){try{t(...e)}finally{e=null}}function s(...o){e=o,ge.onStart(r)}return s.handler=t,s.cancel=()=>{Da.delete(r),e=null},s};var hu=typeof window<"u"?window.requestAnimationFrame:()=>{};ge.use=t=>hu=t;ge.now=typeof performance<"u"?()=>performance.now():Date.now;ge.batchedUpdates=t=>t();ge.catch=console.error;ge.frameLoop="always";ge.advance=()=>{ge.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):df()};var Kn=-1,Yn=0,Ul=!1;function $i(t,e){Ul?(e.delete(t),t(0)):(e.add(t),cf())}function cf(){Kn<0&&(Kn=0,ge.frameLoop!=="demand"&&hu(hf))}function Vg(){Kn=-1}function hf(){~Kn&&(hu(hf),ge.batchedUpdates(df))}function df(){const t=Kn;Kn=ge.now();const e=uf(Kn);if(e&&(ff(Xr.splice(0,e),r=>r.handler()),Yn-=e),!Yn){Vg();return}Da.flush(),ou.flush(t?Math.min(64,Kn-t):16.667),uu.flush(),lu.flush(),cu.flush()}function es(){let t=new Set,e=t;return{add(r){Yn+=e==t&&!t.has(r)?1:0,t.add(r)},delete(r){return Yn-=e==t&&t.has(r)?1:0,t.delete(r)},flush(r){e.size&&(t=new Set,Yn-=e.size,ff(e,s=>s(r)&&t.add(s)),Yn+=t.size,e=t)}}}function ff(t,e){t.forEach(r=>{try{e(r)}catch(s){ge.catch(s)}})}function zl(){}var jg=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),q={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function kn(t,e){if(q.arr(t)){if(!q.arr(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return t===e}var ve=(t,e)=>t.forEach(e);function Rn(t,e,r){if(q.arr(t)){for(let s=0;s<t.length;s++)e.call(r,t[s],`${s}`);return}for(const s in t)t.hasOwnProperty(s)&&e.call(r,t[s],s)}var Et=t=>q.und(t)?[]:q.arr(t)?t:[t];function Ni(t,e){if(t.size){const r=Array.from(t);t.clear(),ve(r,e)}}var Di=(t,...e)=>Ni(t,r=>r(...e)),du=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fu,gf,Xn=null,pf=!1,gu=zl,Hg=t=>{t.to&&(gf=t.to),t.now&&(ge.now=t.now),t.colors!==void 0&&(Xn=t.colors),t.skipAnimation!=null&&(pf=t.skipAnimation),t.createStringInterpolator&&(fu=t.createStringInterpolator),t.requestAnimationFrame&&ge.use(t.requestAnimationFrame),t.batchedUpdates&&(ge.batchedUpdates=t.batchedUpdates),t.willAdvance&&(gu=t.willAdvance),t.frameLoop&&(ge.frameLoop=t.frameLoop)},Fi=new Set,Gt=[],gl=[],Ca=0,La={get idle(){return!Fi.size&&!Gt.length},start(t){Ca>t.priority?(Fi.add(t),ge.onStart(Wg)):(mf(t),ge(Gl))},advance:Gl,sort(t){if(Ca)ge.onFrame(()=>La.sort(t));else{const e=Gt.indexOf(t);~e&&(Gt.splice(e,1),vf(t))}},clear(){Gt=[],Fi.clear()}};function Wg(){Fi.forEach(mf),Fi.clear(),ge(Gl)}function mf(t){Gt.includes(t)||vf(t)}function vf(t){Gt.splice(Kg(Gt,e=>e.priority>t.priority),0,t)}function Gl(t){const e=gl;for(let r=0;r<Gt.length;r++){const s=Gt[r];Ca=s.priority,s.idle||(gu(s),s.advance(t),s.idle||e.push(s))}return Ca=0,gl=Gt,gl.length=0,Gt=e,Gt.length>0}function Kg(t,e){const r=t.findIndex(e);return r<0?t.length:r}var Yg=(t,e,r)=>Math.min(Math.max(r,t),e),Xg={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Qt="[-+]?\\d*\\.?\\d+",Ea=Qt+"%";function Ma(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var qg=new RegExp("rgb"+Ma(Qt,Qt,Qt)),Qg=new RegExp("rgba"+Ma(Qt,Qt,Qt,Qt)),Jg=new RegExp("hsl"+Ma(Qt,Ea,Ea)),Zg=new RegExp("hsla"+Ma(Qt,Ea,Ea,Qt)),$g=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ep=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tp=/^#([0-9a-fA-F]{6})$/,np=/^#([0-9a-fA-F]{8})$/;function rp(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=tp.exec(t))?parseInt(e[1]+"ff",16)>>>0:Xn&&Xn[t]!==void 0?Xn[t]:(e=qg.exec(t))?(Gr(e[1])<<24|Gr(e[2])<<16|Gr(e[3])<<8|255)>>>0:(e=Qg.exec(t))?(Gr(e[1])<<24|Gr(e[2])<<16|Gr(e[3])<<8|Vh(e[4]))>>>0:(e=$g.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=np.exec(t))?parseInt(e[1],16)>>>0:(e=ep.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Jg.exec(t))?(Gh(Bh(e[1]),ra(e[2]),ra(e[3]))|255)>>>0:(e=Zg.exec(t))?(Gh(Bh(e[1]),ra(e[2]),ra(e[3]))|Vh(e[4]))>>>0:null}function pl(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Gh(t,e,r){const s=r<.5?r*(1+e):r+e-r*e,o=2*r-s,l=pl(o,s,t+1/3),h=pl(o,s,t),d=pl(o,s,t-1/3);return Math.round(l*255)<<24|Math.round(h*255)<<16|Math.round(d*255)<<8}function Gr(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Bh(t){return(parseFloat(t)%360+360)%360/360}function Vh(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ra(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function jh(t){let e=rp(t);if(e===null)return t;e=e||0;const r=(e&4278190080)>>>24,s=(e&16711680)>>>16,o=(e&65280)>>>8,l=(e&255)/255;return`rgba(${r}, ${s}, ${o}, ${l})`}var Bi=(t,e,r)=>{if(q.fun(t))return t;if(q.arr(t))return Bi({range:t,output:e,extrapolate:r});if(q.str(t.output[0]))return fu(t);const s=t,o=s.output,l=s.range||[0,1],h=s.extrapolateLeft||s.extrapolate||"extend",d=s.extrapolateRight||s.extrapolate||"extend",f=s.easing||(p=>p);return p=>{const y=sp(p,l);return ip(p,l[y],l[y+1],o[y],o[y+1],f,h,d,s.map)}};function ip(t,e,r,s,o,l,h,d,f){let p=f?f(t):t;if(p<e){if(h==="identity")return p;h==="clamp"&&(p=e)}if(p>r){if(d==="identity")return p;d==="clamp"&&(p=r)}return s===o?s:e===r?t<=e?s:o:(e===-1/0?p=-p:r===1/0?p=p-e:p=(p-e)/(r-e),p=l(p),s===-1/0?p=-p:o===1/0?p=p+s:p=p*(o-s)+s,p)}function sp(t,e){for(var r=1;r<e.length-1&&!(e[r]>=t);++r);return r-1}var ap=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const s=r*t,o=e==="end"?Math.floor(s):Math.ceil(s);return Yg(0,1,o/t)},Pa=1.70158,ia=Pa*1.525,Hh=Pa+1,Wh=2*Math.PI/3,Kh=2*Math.PI/4.5,sa=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,op={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Hh*t*t*t-Pa*t*t,easeOutBack:t=>1+Hh*Math.pow(t-1,3)+Pa*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((ia+1)*2*t-ia)/2:(Math.pow(2*t-2,2)*((ia+1)*(t*2-2)+ia)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Wh),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Wh)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Kh))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Kh)/2+1,easeInBounce:t=>1-sa(1-t),easeOutBounce:sa,easeInOutBounce:t=>t<.5?(1-sa(1-2*t))/2:(1+sa(2*t-1))/2,steps:ap},Vi=Symbol.for("FluidValue.get"),Zr=Symbol.for("FluidValue.observers"),dn=t=>!!(t&&t[Vi]),Ut=t=>t&&t[Vi]?t[Vi]():t,Yh=t=>t[Zr]||null;function lp(t,e){t.eventObserved?t.eventObserved(e):t(e)}function ka(t,e){const r=t[Zr];r&&r.forEach(s=>{lp(s,e)})}var up=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");cp(this,t)}},cp=(t,e)=>yf(t,Vi,e);function ts(t,e){if(t[Vi]){let r=t[Zr];r||yf(t,Zr,r=new Set),r.has(e)||(r.add(e),t.observerAdded&&t.observerAdded(r.size,e))}return e}function xa(t,e){const r=t[Zr];if(r&&r.has(e)){const s=r.size-1;s?r.delete(e):t[Zr]=null,t.observerRemoved&&t.observerRemoved(s,e)}}var yf=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),fa=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,hp=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Xh=new RegExp(`(${fa.source})(%|[a-z]+)`,"i"),dp=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Na=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,_f=t=>{const[e,r]=fp(t);if(!e||du())return t;const s=window.getComputedStyle(document.documentElement).getPropertyValue(e);return s?s.trim():r&&r.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(r)||t:r&&Na.test(r)?_f(r):r||t},fp=t=>{const e=Na.exec(t);if(!e)return[,];const[,r,s]=e;return[r,s]},ml,gp=(t,e,r,s,o)=>`rgba(${Math.round(e)}, ${Math.round(r)}, ${Math.round(s)}, ${o})`,Sf=t=>{ml||(ml=Xn?new RegExp(`(${Object.keys(Xn).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(o=>Ut(o).replace(Na,_f).replace(hp,jh).replace(ml,jh)),r=e.map(o=>o.match(fa).map(Number)),s=r[0].map((o,l)=>r.map(h=>{if(!(l in h))throw Error('The arity of each "output" value must be equal');return h[l]})).map(o=>Bi({...t,output:o}));return o=>{var d;const l=!Xh.test(e[0])&&((d=e.find(f=>Xh.test(f)))==null?void 0:d.replace(fa,""));let h=0;return e[0].replace(fa,()=>`${s[h++](o)}${l||""}`).replace(dp,gp)}},pu="react-spring: ",wf=t=>{const e=t;let r=!1;if(typeof e!="function")throw new TypeError(`${pu}once requires a function parameter`);return(...s)=>{r||(e(...s),r=!0)}},pp=wf(console.warn);function mp(){pp(`${pu}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var vp=wf(console.warn);function yp(){vp(`${pu}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Fa(t){return q.str(t)&&(t[0]=="#"||/\d/.test(t)||!du()&&Na.test(t)||t in(Xn||{}))}var pr=du()?Y.useEffect:Y.useLayoutEffect,_p=()=>{const t=Y.useRef(!1);return pr(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function mu(){const t=Y.useState()[1],e=_p();return()=>{e.current&&t(Math.random())}}function Sp(t,e){const[r]=Y.useState(()=>({inputs:e,result:t()})),s=Y.useRef(),o=s.current;let l=o;return l?e&&l.inputs&&wp(e,l.inputs)||(l={inputs:e,result:t()}):l=r,Y.useEffect(()=>{s.current=l,o==r&&(r.inputs=r.result=void 0)},[l]),l.result}function wp(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var vu=t=>Y.useEffect(t,Cp),Cp=[];function Bl(t){const e=Y.useRef();return Y.useEffect(()=>{e.current=t}),e.current}var ji=Symbol.for("Animated:node"),Ep=t=>!!t&&t[ji]===t,hn=t=>t&&t[ji],yu=(t,e)=>jg(t,ji,e),Ua=t=>t&&t[ji]&&t[ji].getPayload(),Cf=class{constructor(){yu(this,this)}getPayload(){return this.payload||[]}},ns=class extends Cf{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,q.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new ns(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return q.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,q.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Hi=class extends ns{constructor(t){super(0),this._string=null,this._toString=Bi({output:[t,t]})}static create(t){return new Hi(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(q.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Bi({output:[this.getValue(),t]})),this._value=0,super.reset()}},Ta={dependencies:null},_u=class extends Cf{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Rn(this.source,(r,s)=>{Ep(r)?e[s]=r.getValue(t):dn(r)?e[s]=Ut(r):t||(e[s]=r)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ve(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Rn(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Ta.dependencies&&dn(t)&&Ta.dependencies.add(t);const e=Ua(t);e&&ve(e,r=>this.add(r))}},Ef=class extends _u{constructor(t){super(t)}static create(t){return new Ef(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((r,s)=>r.setValue(t[s])).some(Boolean):(super.setValue(t.map(Pp)),!0)}};function Pp(t){return(Fa(t)?Hi:ns).create(t)}function Vl(t){const e=hn(t);return e?e.constructor:q.arr(t)?Ef:Fa(t)?Hi:ns}var qh=(t,e)=>{const r=!q.fun(t)||t.prototype&&t.prototype.isReactComponent;return Y.forwardRef((s,o)=>{const l=Y.useRef(null),h=r&&Y.useCallback(v=>{l.current=Tp(o,v)},[o]),[d,f]=xp(s,e),p=mu(),y=()=>{const v=l.current;r&&!v||(v?e.applyAnimatedValues(v,d.getValue(!0)):!1)===!1&&p()},P=new kp(y,f),E=Y.useRef();pr(()=>(E.current=P,ve(f,v=>ts(v,P)),()=>{E.current&&(ve(E.current.deps,v=>xa(v,E.current)),ge.cancel(E.current.update))})),Y.useEffect(y,[]),vu(()=>()=>{const v=E.current;ve(v.deps,k=>xa(k,v))});const S=e.getComponentProps(d.getValue());return Y.createElement(t,{...S,ref:h})})},kp=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&ge.write(this.update)}};function xp(t,e){const r=new Set;return Ta.dependencies=r,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new _u(t),Ta.dependencies=null,[t,r]}function Tp(t,e){return t&&(q.fun(t)?t(e):t.current=e),e}var Qh=Symbol.for("AnimatedComponent"),Ap=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:r=o=>new _u(o),getComponentProps:s=o=>o}={})=>{const o={applyAnimatedValues:e,createAnimatedStyle:r,getComponentProps:s},l=h=>{const d=Jh(h)||"Anonymous";return q.str(h)?h=l[h]||(l[h]=qh(h,o)):h=h[Qh]||(h[Qh]=qh(h,o)),h.displayName=`Animated(${d})`,h};return Rn(t,(h,d)=>{q.arr(t)&&(d=Jh(h)),l[d]=l(h)}),{animated:l}},Jh=t=>q.str(t)?t:t&&q.str(t.displayName)?t.displayName:q.fun(t)&&t.name||null;function Ct(t,...e){return q.fun(t)?t(...e):t}var Ui=(t,e)=>t===!0||!!(e&&t&&(q.fun(t)?t(e):Et(t).includes(e))),Pf=(t,e)=>q.obj(t)?e&&t[e]:t,kf=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Rp=t=>t,za=(t,e=Rp)=>{let r=bp;t.default&&t.default!==!0&&(t=t.default,r=Object.keys(t));const s={};for(const o of r){const l=e(t[o],o);q.und(l)||(s[o]=l)}return s},bp=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Ip={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Op(t){const e={};let r=0;if(Rn(t,(s,o)=>{Ip[o]||(e[o]=s,r++)}),r)return e}function Su(t){const e=Op(t);if(e){const r={to:e};return Rn(t,(s,o)=>o in e||(r[o]=s)),r}return{...t}}function Wi(t){return t=Ut(t),q.arr(t)?t.map(Wi):Fa(t)?Zt.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function xf(t){for(const e in t)return!0;return!1}function jl(t){return q.fun(t)||q.arr(t)&&q.obj(t[0])}function Hl(t,e){var r;(r=t.ref)==null||r.delete(t),e==null||e.delete(t)}function Tf(t,e){var r;e&&t.ref!==e&&((r=t.ref)==null||r.delete(t),e.add(t),t.ref=e)}var Dp={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Wl={...Dp.default,mass:1,damping:1,easing:op.linear,clamp:!1},Lp=class{constructor(){this.velocity=0,Object.assign(this,Wl)}};function Mp(t,e,r){r&&(r={...r},Zh(r,e),e={...r,...e}),Zh(t,e),Object.assign(t,e);for(const h in Wl)t[h]==null&&(t[h]=Wl[h]);let{frequency:s,damping:o}=t;const{mass:l}=t;return q.und(s)||(s<.01&&(s=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/s,2)*l,t.friction=4*Math.PI*o*l/s),t}function Zh(t,e){if(!q.und(e.decay))t.duration=void 0;else{const r=!q.und(e.tension)||!q.und(e.friction);(r||!q.und(e.frequency)||!q.und(e.damping)||!q.und(e.mass))&&(t.duration=void 0,t.decay=void 0),r&&(t.frequency=void 0)}}var $h=[],Np=class{constructor(){this.changed=!1,this.values=$h,this.toValues=null,this.fromValues=$h,this.config=new Lp,this.immediate=!1}};function Af(t,{key:e,props:r,defaultProps:s,state:o,actions:l}){return new Promise((h,d)=>{let f,p,y=Ui(r.cancel??(s==null?void 0:s.cancel),e);if(y)S();else{q.und(r.pause)||(o.paused=Ui(r.pause,e));let v=s==null?void 0:s.pause;v!==!0&&(v=o.paused||Ui(v,e)),f=Ct(r.delay||0,e),v?(o.resumeQueue.add(E),l.pause()):(l.resume(),E())}function P(){o.resumeQueue.add(E),o.timeouts.delete(p),p.cancel(),f=p.time-ge.now()}function E(){f>0&&!Zt.skipAnimation?(o.delayed=!0,p=ge.setTimeout(S,f),o.pauseQueue.add(P),o.timeouts.add(p)):S()}function S(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(P),o.timeouts.delete(p),t<=(o.cancelId||0)&&(y=!0);try{l.start({...r,callId:t,cancel:y},h)}catch(v){d(v)}}})}var wu=(t,e)=>e.length==1?e[0]:e.some(r=>r.cancelled)?qr(t.get()):e.every(r=>r.noop)?Rf(t.get()):Xt(t.get(),e.every(r=>r.finished)),Rf=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Xt=(t,e,r=!1)=>({value:t,finished:e,cancelled:r}),qr=t=>({value:t,cancelled:!0,finished:!1});function bf(t,e,r,s){const{callId:o,parentId:l,onRest:h}=e,{asyncTo:d,promise:f}=r;return!l&&t===d&&!e.reset?f:r.promise=(async()=>{r.asyncId=o,r.asyncTo=t;const p=za(e,(x,b)=>b==="onRest"?void 0:x);let y,P;const E=new Promise((x,b)=>(y=x,P=b)),S=x=>{const b=o<=(r.cancelId||0)&&qr(s)||o!==r.asyncId&&Xt(s,!1);if(b)throw x.result=b,P(x),x},v=(x,b)=>{const M=new ed,m=new td;return(async()=>{if(Zt.skipAnimation)throw Ki(r),m.result=Xt(s,!1),P(m),m;S(M);const C=q.obj(x)?{...x}:{...b,to:x};C.parentId=o,Rn(p,(F,W)=>{q.und(C[W])&&(C[W]=F)});const A=await s.start(C);return S(M),r.paused&&await new Promise(F=>{r.resumeQueue.add(F)}),A})()};let k;if(Zt.skipAnimation)return Ki(r),Xt(s,!1);try{let x;q.arr(t)?x=(async b=>{for(const M of b)await v(M)})(t):x=Promise.resolve(t(v,s.stop.bind(s))),await Promise.all([x.then(y),E]),k=Xt(s.get(),!0,!1)}catch(x){if(x instanceof ed)k=x.result;else if(x instanceof td)k=x.result;else throw x}finally{o==r.asyncId&&(r.asyncId=l,r.asyncTo=l?d:void 0,r.promise=l?f:void 0)}return q.fun(h)&&ge.batchedUpdates(()=>{h(k,s,s.item)}),k})()}function Ki(t,e){Ni(t.timeouts,r=>r.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var ed=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},td=class extends Error{constructor(){super("SkipAnimationSignal")}},Kl=t=>t instanceof Cu,Fp=1,Cu=class extends up{constructor(){super(...arguments),this.id=Fp++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=hn(this);return t&&t.getValue()}to(...t){return Zt.to(this,t)}interpolate(...t){return mp(),Zt.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){ka(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||La.sort(this),ka(this,{type:"priority",parent:this,priority:t})}},yr=Symbol.for("SpringPhase"),If=1,Yl=2,Xl=4,vl=t=>(t[yr]&If)>0,Vn=t=>(t[yr]&Yl)>0,ki=t=>(t[yr]&Xl)>0,nd=(t,e)=>e?t[yr]|=Yl|If:t[yr]&=~Yl,rd=(t,e)=>e?t[yr]|=Xl:t[yr]&=~Xl,Up=class extends Cu{constructor(t,e){if(super(),this.animation=new Np,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!q.und(t)||!q.und(e)){const r=q.obj(t)?{...t}:{...e,from:t};q.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Vn(this)||this._state.asyncTo)||ki(this)}get goal(){return Ut(this.animation.to)}get velocity(){const t=hn(this);return t instanceof ns?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return vl(this)}get isAnimating(){return Vn(this)}get isPaused(){return ki(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,r=!1;const s=this.animation;let{toValues:o}=s;const{config:l}=s,h=Ua(s.to);!h&&dn(s.to)&&(o=Et(Ut(s.to))),s.values.forEach((p,y)=>{if(p.done)return;const P=p.constructor==Hi?1:h?h[y].lastPosition:o[y];let E=s.immediate,S=P;if(!E){if(S=p.lastPosition,l.tension<=0){p.done=!0;return}let v=p.elapsedTime+=t;const k=s.fromValues[y],x=p.v0!=null?p.v0:p.v0=q.arr(l.velocity)?l.velocity[y]:l.velocity;let b;const M=l.precision||(k==P?.005:Math.min(1,Math.abs(P-k)*.001));if(q.und(l.duration))if(l.decay){const m=l.decay===!0?.998:l.decay,C=Math.exp(-(1-m)*v);S=k+x/(1-m)*(1-C),E=Math.abs(p.lastPosition-S)<=M,b=x*C}else{b=p.lastVelocity==null?x:p.lastVelocity;const m=l.restVelocity||M/10,C=l.clamp?0:l.bounce,A=!q.und(C),F=k==P?p.v0>0:k<P;let W,w=!1;const D=1,T=Math.ceil(t/D);for(let O=0;O<T&&(W=Math.abs(b)>m,!(!W&&(E=Math.abs(P-S)<=M,E)));++O){A&&(w=S==P||S>P==F,w&&(b=-b*C,S=P));const V=-l.tension*1e-6*(S-P),j=-l.friction*.001*b,N=(V+j)/l.mass;b=b+N*D,S=S+b*D}}else{let m=1;l.duration>0&&(this._memoizedDuration!==l.duration&&(this._memoizedDuration=l.duration,p.durationProgress>0&&(p.elapsedTime=l.duration*p.durationProgress,v=p.elapsedTime+=t)),m=(l.progress||0)+v/this._memoizedDuration,m=m>1?1:m<0?0:m,p.durationProgress=m),S=k+l.easing(m)*(P-k),b=(S-p.lastPosition)/t,E=m==1}p.lastVelocity=b,Number.isNaN(S)&&(console.warn("Got NaN while animating:",this),E=!0)}h&&!h[y].done&&(E=!1),E?p.done=!0:e=!1,p.setValue(S,l.round)&&(r=!0)});const d=hn(this),f=d.getValue();if(e){const p=Ut(s.to);(f!==p||r)&&!l.decay?(d.setValue(p),this._onChange(p)):r&&l.decay&&this._onChange(f),this._stop()}else r&&this._onChange(f)}set(t){return ge.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Vn(this)){const{to:t,config:e}=this.animation;ge.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let r;return q.und(t)?(r=this.queue||[],this.queue=[]):r=[q.obj(t)?t:{...e,to:t}],Promise.all(r.map(s=>this._update(s))).then(s=>wu(this,s))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Ki(this._state,t&&this._lastCallId),ge.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:r,from:s}=t;r=q.obj(r)?r[e]:r,(r==null||jl(r))&&(r=void 0),s=q.obj(s)?s[e]:s,s==null&&(s=void 0);const o={to:r,from:s};return vl(this)||(t.reverse&&([r,s]=[s,r]),s=Ut(s),q.und(s)?hn(this)||this._set(r):this._set(s)),o}_update({...t},e){const{key:r,defaultProps:s}=this;t.default&&Object.assign(s,za(t,(h,d)=>/^on/.test(d)?Pf(h,r):h)),sd(this,t,"onProps"),Ti(this,"onProps",t,this);const o=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const l=this._state;return Af(++this._lastCallId,{key:r,props:t,defaultProps:s,state:l,actions:{pause:()=>{ki(this)||(rd(this,!0),Di(l.pauseQueue),Ti(this,"onPause",Xt(this,xi(this,this.animation.to)),this))},resume:()=>{ki(this)&&(rd(this,!1),Vn(this)&&this._resume(),Di(l.resumeQueue),Ti(this,"onResume",Xt(this,xi(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(h=>{if(t.loop&&h.finished&&!(e&&h.noop)){const d=Of(t);if(d)return this._update(d,!0)}return h})}_merge(t,e,r){if(e.cancel)return this.stop(!0),r(qr(this));const s=!q.und(t.to),o=!q.und(t.from);if(s||o)if(e.callId>this._lastToId)this._lastToId=e.callId;else return r(qr(this));const{key:l,defaultProps:h,animation:d}=this,{to:f,from:p}=d;let{to:y=f,from:P=p}=t;o&&!s&&(!e.default||q.und(y))&&(y=P),e.reverse&&([y,P]=[P,y]);const E=!kn(P,p);E&&(d.from=P),P=Ut(P);const S=!kn(y,f);S&&this._focus(y);const v=jl(e.to),{config:k}=d,{decay:x,velocity:b}=k;(s||o)&&(k.velocity=0),e.config&&!v&&Mp(k,Ct(e.config,l),e.config!==h.config?Ct(h.config,l):void 0);let M=hn(this);if(!M||q.und(y))return r(Xt(this,!0));const m=q.und(e.reset)?o&&!e.default:!q.und(P)&&Ui(e.reset,l),C=m?P:this.get(),A=Wi(y),F=q.num(A)||q.arr(A)||Fa(A),W=!v&&(!F||Ui(h.immediate||e.immediate,l));if(S){const O=Vl(y);if(O!==M.constructor)if(W)M=this._set(A);else throw Error(`Cannot animate between ${M.constructor.name} and ${O.name}, as the "to" prop suggests`)}const w=M.constructor;let D=dn(y),T=!1;if(!D){const O=m||!vl(this)&&E;(S||O)&&(T=kn(Wi(C),A),D=!T),(!kn(d.immediate,W)&&!W||!kn(k.decay,x)||!kn(k.velocity,b))&&(D=!0)}if(T&&Vn(this)&&(d.changed&&!m?D=!0:D||this._stop(f)),!v&&((D||dn(f))&&(d.values=M.getPayload(),d.toValues=dn(y)?null:w==Hi?[1]:Et(A)),d.immediate!=W&&(d.immediate=W,!W&&!m&&this._set(f)),D)){const{onRest:O}=d;ve(Gp,j=>sd(this,e,j));const V=Xt(this,xi(this,f));Di(this._pendingCalls,V),this._pendingCalls.add(r),d.changed&&ge.batchedUpdates(()=>{var j;d.changed=!m,O==null||O(V,this),m?Ct(h.onRest,V):(j=d.onStart)==null||j.call(d,V,this)})}m&&this._set(C),v?r(bf(e.to,e,this._state,this)):D?this._start():Vn(this)&&!S?this._pendingCalls.add(r):r(Rf(C))}_focus(t){const e=this.animation;t!==e.to&&(Yh(this)&&this._detach(),e.to=t,Yh(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;dn(e)&&(ts(e,this),Kl(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;dn(t)&&xa(t,this)}_set(t,e=!0){const r=Ut(t);if(!q.und(r)){const s=hn(this);if(!s||!kn(r,s.getValue())){const o=Vl(r);!s||s.constructor!=o?yu(this,o.create(r)):s.setValue(r),s&&ge.batchedUpdates(()=>{this._onChange(r,e)})}}return hn(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Ti(this,"onStart",Xt(this,xi(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Ct(this.animation.onChange,t,this)),Ct(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;hn(this).reset(Ut(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Vn(this)||(nd(this,!0),ki(this)||this._resume())}_resume(){Zt.skipAnimation?this.finish():La.start(this)}_stop(t,e){if(Vn(this)){nd(this,!1);const r=this.animation;ve(r.values,o=>{o.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),ka(this,{type:"idle",parent:this});const s=e?qr(this.get()):Xt(this.get(),xi(this,t??r.to));Di(this._pendingCalls,s),r.changed&&(r.changed=!1,Ti(this,"onRest",s,this))}}};function xi(t,e){const r=Wi(e),s=Wi(t.get());return kn(s,r)}function Of(t,e=t.loop,r=t.to){const s=Ct(e);if(s){const o=s!==!0&&Su(s),l=(o||t).reverse,h=!o||o.reset;return Yi({...t,loop:e,default:!1,pause:void 0,to:!l||jl(r)?r:void 0,from:h?t.from:void 0,reset:h,...o})}}function Yi(t){const{to:e,from:r}=t=Su(t),s=new Set;return q.obj(e)&&id(e,s),q.obj(r)&&id(r,s),t.keys=s.size?Array.from(s):null,t}function zp(t){const e=Yi(t);return q.und(e.default)&&(e.default=za(e)),e}function id(t,e){Rn(t,(r,s)=>r!=null&&e.add(s))}var Gp=["onStart","onRest","onChange","onPause","onResume"];function sd(t,e,r){t.animation[r]=e[r]!==kf(e,r)?Pf(e[r],t.key):void 0}function Ti(t,e,...r){var s,o,l,h;(o=(s=t.animation)[e])==null||o.call(s,...r),(h=(l=t.defaultProps)[e])==null||h.call(l,...r)}var Bp=["onStart","onChange","onRest"],Vp=1,Df=class{constructor(t,e){this.id=Vp++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,r)=>t[r]=e.get()),t}set(t){for(const e in t){const r=t[e];q.und(r)||this.springs[e].set(r)}}update(t){return t&&this.queue.push(Yi(t)),this}start(t){let{queue:e}=this;return t?e=Et(t).map(Yi):this.queue=[],this._flush?this._flush(this,e):(Uf(this,e),ql(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const r=this.springs;ve(Et(e),s=>r[s].stop(!!t))}else Ki(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(q.und(t))this.start({pause:!0});else{const e=this.springs;ve(Et(t),r=>e[r].pause())}return this}resume(t){if(q.und(t))this.start({pause:!1});else{const e=this.springs;ve(Et(t),r=>e[r].resume())}return this}each(t){Rn(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:r}=this._events,s=this._active.size>0,o=this._changed.size>0;(s&&!this._started||o&&!this._started)&&(this._started=!0,Ni(t,([d,f])=>{f.value=this.get(),d(f,this,this._item)}));const l=!s&&this._started,h=o||l&&r.size?this.get():null;o&&e.size&&Ni(e,([d,f])=>{f.value=h,d(f,this,this._item)}),l&&(this._started=!1,Ni(r,([d,f])=>{f.value=h,d(f,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ge.onFrame(this._onFrame)}};function ql(t,e){return Promise.all(e.map(r=>Lf(t,r))).then(r=>wu(t,r))}async function Lf(t,e,r){const{keys:s,to:o,from:l,loop:h,onRest:d,onResolve:f}=e,p=q.obj(e.default)&&e.default;h&&(e.loop=!1),o===!1&&(e.to=null),l===!1&&(e.from=null);const y=q.arr(o)||q.fun(o)?o:void 0;y?(e.to=void 0,e.onRest=void 0,p&&(p.onRest=void 0)):ve(Bp,k=>{const x=e[k];if(q.fun(x)){const b=t._events[k];e[k]=({finished:M,cancelled:m})=>{const C=b.get(x);C?(M||(C.finished=!1),m&&(C.cancelled=!0)):b.set(x,{value:null,finished:M||!1,cancelled:m||!1})},p&&(p[k]=e[k])}});const P=t._state;e.pause===!P.paused?(P.paused=e.pause,Di(e.pause?P.pauseQueue:P.resumeQueue)):P.paused&&(e.pause=!0);const E=(s||Object.keys(t.springs)).map(k=>t.springs[k].start(e)),S=e.cancel===!0||kf(e,"cancel")===!0;(y||S&&P.asyncId)&&E.push(Af(++t._lastAsyncId,{props:e,state:P,actions:{pause:zl,resume:zl,start(k,x){S?(Ki(P,t._lastAsyncId),x(qr(t))):(k.onRest=d,x(bf(y,k,P,t)))}}})),P.paused&&await new Promise(k=>{P.resumeQueue.add(k)});const v=wu(t,await Promise.all(E));if(h&&v.finished&&!(r&&v.noop)){const k=Of(e,h,o);if(k)return Uf(t,[k]),Lf(t,k,!0)}return f&&ge.batchedUpdates(()=>f(v,t,t.item)),v}function Ql(t,e){const r={...t.springs};return e&&ve(Et(e),s=>{q.und(s.keys)&&(s=Yi(s)),q.obj(s.to)||(s={...s,to:void 0}),Ff(r,s,o=>Nf(o))}),Mf(t,r),r}function Mf(t,e){Rn(e,(r,s)=>{t.springs[s]||(t.springs[s]=r,ts(r,t))})}function Nf(t,e){const r=new Up;return r.key=t,e&&ts(r,e),r}function Ff(t,e,r){e.keys&&ve(e.keys,s=>{(t[s]||(t[s]=r(s)))._prepareNode(e)})}function Uf(t,e){ve(e,r=>{Ff(t.springs,r,s=>Nf(s,t))})}var rs=({children:t,...e})=>{const r=Y.useContext(Aa),s=e.pause||!!r.pause,o=e.immediate||!!r.immediate;e=Sp(()=>({pause:s,immediate:o}),[s,o]);const{Provider:l}=Aa;return Y.createElement(l,{value:e},t)},Aa=jp(rs,{});rs.Provider=Aa.Provider;rs.Consumer=Aa.Consumer;function jp(t,e){return Object.assign(t,Y.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var zf=()=>{const t=[],e=function(s){yp();const o=[];return ve(t,(l,h)=>{if(q.und(s))o.push(l.start());else{const d=r(s,l,h);d&&o.push(l.start(d))}}),o};e.current=t,e.add=function(s){t.includes(s)||t.push(s)},e.delete=function(s){const o=t.indexOf(s);~o&&t.splice(o,1)},e.pause=function(){return ve(t,s=>s.pause(...arguments)),this},e.resume=function(){return ve(t,s=>s.resume(...arguments)),this},e.set=function(s){ve(t,(o,l)=>{const h=q.fun(s)?s(l,o):s;h&&o.set(h)})},e.start=function(s){const o=[];return ve(t,(l,h)=>{if(q.und(s))o.push(l.start());else{const d=this._getProps(s,l,h);d&&o.push(l.start(d))}}),o},e.stop=function(){return ve(t,s=>s.stop(...arguments)),this},e.update=function(s){return ve(t,(o,l)=>o.update(this._getProps(s,o,l))),this};const r=function(s,o,l){return q.fun(s)?s(l,o):s};return e._getProps=r,e};function Hp(t,e,r){const s=q.fun(e)&&e;s&&!r&&(r=[]);const o=Y.useMemo(()=>s||arguments.length==3?zf():void 0,[]),l=Y.useRef(0),h=mu(),d=Y.useMemo(()=>({ctrls:[],queue:[],flush(b,M){const m=Ql(b,M);return l.current>0&&!d.queue.length&&!Object.keys(m).some(C=>!b.springs[C])?ql(b,M):new Promise(C=>{Mf(b,m),d.queue.push(()=>{C(ql(b,M))}),h()})}}),[]),f=Y.useRef([...d.ctrls]),p=[],y=Bl(t)||0;Y.useMemo(()=>{ve(f.current.slice(t,y),b=>{Hl(b,o),b.stop(!0)}),f.current.length=t,P(y,t)},[t]),Y.useMemo(()=>{P(0,Math.min(y,t))},r);function P(b,M){for(let m=b;m<M;m++){const C=f.current[m]||(f.current[m]=new Df(null,d.flush)),A=s?s(m,C):e[m];A&&(p[m]=zp(A))}}const E=f.current.map((b,M)=>Ql(b,p[M])),S=Y.useContext(rs),v=Bl(S),k=S!==v&&xf(S);pr(()=>{l.current++,d.ctrls=f.current;const{queue:b}=d;b.length&&(d.queue=[],ve(b,M=>M())),ve(f.current,(M,m)=>{o==null||o.add(M),k&&M.start({default:S});const C=p[m];C&&(Tf(M,C.ref),M.ref?M.queue.push(C):M.start(C))})}),vu(()=>()=>{ve(d.ctrls,b=>b.stop(!0))});const x=E.map(b=>({...b}));return o?[x,o]:x}function Qn(t,e){const r=q.fun(t),[[s],o]=Hp(1,r?t:[t],r?e||[]:e);return r||arguments.length==2?[s,o]:s}function Gf(t,e,r){const s=q.fun(e)&&e,{reset:o,sort:l,trail:h=0,expires:d=!0,exitBeforeEnter:f=!1,onDestroyed:p,ref:y,config:P}=s?s():e,E=Y.useMemo(()=>s||arguments.length==3?zf():void 0,[]),S=Et(t),v=[],k=Y.useRef(null),x=o?null:k.current;pr(()=>{k.current=v}),vu(()=>(ve(v,N=>{E==null||E.add(N.ctrl),N.ctrl.ref=E}),()=>{ve(k.current,N=>{N.expired&&clearTimeout(N.expirationId),Hl(N.ctrl,E),N.ctrl.stop(!0)})}));const b=Kp(S,s?s():e,x),M=o&&k.current||[];pr(()=>ve(M,({ctrl:N,item:G,key:re})=>{Hl(N,E),Ct(p,G,re)}));const m=[];if(x&&ve(x,(N,G)=>{N.expired?(clearTimeout(N.expirationId),M.push(N)):(G=m[G]=b.indexOf(N.key),~G&&(v[G]=N))}),ve(S,(N,G)=>{v[G]||(v[G]={key:b[G],item:N,phase:"mount",ctrl:new Df},v[G].ctrl.item=N)}),m.length){let N=-1;const{leave:G}=s?s():e;ve(m,(re,J)=>{const $=x[J];~re?(N=v.indexOf($),v[N]={...$,item:S[re]}):G&&v.splice(++N,0,$)})}q.fun(l)&&v.sort((N,G)=>l(N.item,G.item));let C=-h;const A=mu(),F=za(e),W=new Map,w=Y.useRef(new Map),D=Y.useRef(!1);ve(v,(N,G)=>{const re=N.key,J=N.phase,$=s?s():e;let le,ue;const Te=Ct($.delay||0,re);if(J=="mount")le=$.enter,ue="enter";else{const X=b.indexOf(re)<0;if(J!="leave")if(X)le=$.leave,ue="leave";else if(le=$.update)ue="update";else return;else if(!X)le=$.enter,ue="enter";else return}if(le=Ct(le,N.item,G),le=q.obj(le)?Su(le):{to:le},!le.config){const X=P||F.config;le.config=Ct(X,N.item,G,ue)}C+=h;const ke={...F,delay:Te+C,ref:y,immediate:$.immediate,reset:!1,...le};if(ue=="enter"&&q.und(ke.from)){const X=s?s():e,se=q.und(X.initial)||x?X.from:X.initial;ke.from=Ct(se,N.item,G)}const{onResolve:Ve}=ke;ke.onResolve=X=>{Ct(Ve,X);const se=k.current,R=se.find(H=>H.key===re);if(R&&!(X.cancelled&&R.phase!="update")&&R.ctrl.idle){const H=se.every(Z=>Z.ctrl.idle);if(R.phase=="leave"){const Z=Ct(d,R.item);if(Z!==!1){const ae=Z===!0?0:Z;if(R.expired=!0,!H&&ae>0){ae<=2147483647&&(R.expirationId=setTimeout(A,ae));return}}}H&&se.some(Z=>Z.expired)&&(w.current.delete(R),f&&(D.current=!0),A())}};const Ae=Ql(N.ctrl,ke);ue==="leave"&&f?w.current.set(N,{phase:ue,springs:Ae,payload:ke}):W.set(N,{phase:ue,springs:Ae,payload:ke})});const T=Y.useContext(rs),O=Bl(T),V=T!==O&&xf(T);pr(()=>{V&&ve(v,N=>{N.ctrl.start({default:T})})},[T]),ve(W,(N,G)=>{if(w.current.size){const re=v.findIndex(J=>J.key===G.key);v.splice(re,1)}}),pr(()=>{ve(w.current.size?w.current:W,({phase:N,payload:G},re)=>{const{ctrl:J}=re;re.phase=N,E==null||E.add(J),V&&N=="enter"&&J.start({default:T}),G&&(Tf(J,G.ref),(J.ref||E)&&!D.current?J.update(G):(J.start(G),D.current&&(D.current=!1)))})},o?void 0:r);const j=N=>Y.createElement(Y.Fragment,null,v.map((G,re)=>{const{springs:J}=W.get(G)||G.ctrl,$=N({...J},G.item,G,re);return $&&$.type?Y.createElement($.type,{...$.props,key:q.str(G.key)||q.num(G.key)?G.key:G.ctrl.id,ref:$.ref}):$}));return E?[j,E]:j}var Wp=1;function Kp(t,{key:e,keys:r=e},s){if(r===null){const o=new Set;return t.map(l=>{const h=s&&s.find(d=>d.item===l&&d.phase!=="leave"&&!o.has(d));return h?(o.add(h),h.key):Wp++})}return q.und(r)?t:q.fun(r)?t.map(r):Et(r)}var Yp=class extends Cu{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Bi(...e);const r=this._get(),s=Vl(r);yu(this,s.create(r))}advance(t){const e=this._get(),r=this.get();kn(e,r)||(hn(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&ad(this._active)&&yl(this)}_get(){const t=q.arr(this.source)?this.source.map(Ut):Et(Ut(this.source));return this.calc(...t)}_start(){this.idle&&!ad(this._active)&&(this.idle=!1,ve(Ua(this),t=>{t.done=!1}),Zt.skipAnimation?(ge.batchedUpdates(()=>this.advance()),yl(this)):La.start(this))}_attach(){let t=1;ve(Et(this.source),e=>{dn(e)&&ts(e,this),Kl(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ve(Et(this.source),t=>{dn(t)&&xa(t,this)}),this._active.clear(),yl(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Et(this.source).reduce((e,r)=>Math.max(e,(Kl(r)?r.priority:0)+1),0))}};function Xp(t){return t.idle!==!1}function ad(t){return!t.size||Array.from(t).every(Xp)}function yl(t){t.idle||(t.idle=!0,ve(Ua(t),e=>{e.done=!0}),ka(t,{type:"idle",parent:t}))}Zt.assign({createStringInterpolator:Sf,to:(t,e)=>new Yp(t,e)});var qp=["Arc","Arrow","Circle","Ellipse","FastLayer","Group","Image","Label","Layer","Line","Path","Rect","RegularPolygon","Ring","Shape","Sprite","Star","Tag","Text","TextPath","Transformer","Wedge"];Zt.assign({createStringInterpolator:Sf,colors:Xg});var Qp=Ap(qp,{applyAnimatedValues(t,e){if(!t.nodeType)return!1;t._applyProps(t,e)}}),Jn=Qp.animated;function Xi(t){if(t===null)return"Null";if(t===void 0)return"Undefined";if(Number.isNaN(t))return"NaN";const e=Object.prototype.toString.call(t).slice(8,-1);return e==="AsyncFunction"?"Promise":e}const{isArray:Eu}=Array,Jp=t=>Array.prototype.slice.call(t);function Pu(t,e=[]){return(...r)=>(s=>s.length>=t.length?t(...s):Pu(t,s))([...e,...r])}function Zp(t,e){if(!Eu(e))throw new Error(`Cannot read property 'indexOf' of ${e}`);const r=Xi(t);if(!["Object","Array","NaN","RegExp"].includes(r))return e.indexOf(t);let s=-1,o=-1;const{length:l}=e;for(;++s<l&&o===-1;)Qr(e[s],t)&&(o=s);return o}function od(t){const e=[];let r;for(;!(r=t.next()).done;)e.push(r.value);return e}function $p(t,e){if(t.size!==e.size)return!1;const r=od(t.values()),s=od(e.values());return r.filter(o=>Zp(o,s)===-1).length===0}function ld(t){const e=t.__proto__.toString();return["Error","TypeError"].includes(e)?[e,t.message]:[]}function ud(t){return t.toDateString?[!0,t.getTime()]:[!1]}function cd(t){return t.constructor!==RegExp?[!1]:[!0,t.toString()]}function Qr(t,e){if(arguments.length===1)return p=>Qr(t,p);const r=Xi(t);if(r!==Xi(e))return!1;if(r==="Function")return t.name===void 0?!1:t.name===e.name;if(["NaN","Undefined","Null"].includes(r))return!0;if(r==="Number")return Object.is(-0,t)!==Object.is(-0,e)?!1:t.toString()===e.toString();if(["String","Boolean"].includes(r))return t.toString()===e.toString();if(r==="Array"){const p=Array.from(t),y=Array.from(e);if(p.toString()!==y.toString())return!1;let P=!0;return p.forEach((E,S)=>{P&&E!==y[S]&&!Qr(E,y[S])&&(P=!1)}),P}const s=cd(t),o=cd(e);if(s[0])return o[0]?s[1]===o[1]:!1;if(o[0])return!1;const l=ud(t),h=ud(e);if(l[0])return h[0]?l[1]===h[1]:!1;if(h[0])return!1;const d=ld(t),f=ld(e);if(d[0])return f[0]?d[0]===f[0]&&d[1]===f[1]:!1;if(r==="Set")return $p(t,e);if(r==="Object"){const p=Object.keys(t);if(p.length!==Object.keys(e).length)return!1;let y=!0;return p.forEach(P=>{if(y){const E=t[P],S=e[P];E!==S&&!Qr(E,S)&&(y=!1)}}),y}return!1}const em="Incorrect iterable input",{keys:tm}=Object;function nm(t,e,r=!1){let s=0;const o=Array(e.length);for(;s<e.length;)o[s]=r?t(e[s],s):t(e[s]),s++;return o}function Bf(t,e){if(arguments.length===1)return h=>Bf(t,h);let r=0;const s=tm(e),o=s.length,l={};for(;r<o;){const h=s[r];l[h]=t(e[h],h,e),r++}return l}function Vf(t,e){if(arguments.length===1)return r=>Vf(t,r);if(!e)throw new Error(em);return Eu(e)?nm(t,e):Bf(t,e)}function rm(t,e,r){let s=-1,{length:o}=t;r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;const l=Array(o);for(;++s<o;)l[s]=t[s+e];return l}class im{constructor(e){this.value=e}}function sm(t,e,r){if(!Eu(r))throw new TypeError("reduce: list must be array or iterable");let s=0;const o=r.length;for(;s<o;){if(e=t(e,r[s],s,r),e instanceof im)return e.value;s++}return e}function am(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,s){return e.apply(this,arguments)};case 3:return function(r,s,o){return e.apply(this,arguments)};case 4:return function(r,s,o,l){return e.apply(this,arguments)};case 5:return function(r,s,o,l,h){return e.apply(this,arguments)};case 6:return function(r,s,o,l,h,d){return e.apply(this,arguments)};case 7:return function(r,s,o,l,h,d,f){return e.apply(this,arguments)};case 8:return function(r,s,o,l,h,d,f,p){return e.apply(this,arguments)};case 9:return function(r,s,o,l,h,d,f,p,y){return e.apply(this,arguments)};case 10:return function(r,s,o,l,h,d,f,p,y,P){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function om(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function lm(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return am(arguments[0].length,sm(om,arguments[0],Array.prototype.slice.call(arguments,1,1/0)))}function um(){if(arguments.length===0)throw new Error("compose requires at least one argument");return lm.apply(this,Array.prototype.slice.call(arguments,0).reverse())}function cm(t,e,r){return r.replace(t,e)}const hd=Pu(cm);function jf(t,e){return arguments.length===1?r=>jf(t,r):Jp(e).sort(t)}function Hf(t,e){return arguments.length===1?r=>Hf(t,r):t<0?e.slice():typeof e=="string"?e.slice(0,t):rm(e,0,t)}const aa={},hm=t=>{const e=(s,o)=>s>o?1:-1,r={};return um(Vf(s=>r[s]=t[s]),jf(e))(Object.keys(t)),r},dd=t=>{const e=Xi(t);if(e==="String")return t;if(["Function","Promise"].includes(e)){const r=hd(/\s{1,}/g," ",t.toString());return hd(/\s/g,"_",Hf(15,r))}else if(e==="Object")return JSON.stringify(hm(t));return JSON.stringify(t)},dm=(t,...e)=>{let r="";return e.forEach(s=>{r+=`${dd(s)}_`}),`${r}${dd(t)}`};function ku(t,...e){if(arguments.length===1)return(...o)=>ku(t,...o);const r=dm(t,...e);if(r in aa)return aa[r];if(Xi(t)==="Async")return new Promise(o=>{t(...e).then(l=>{aa[r]=l,o(l)})});const s=t(...e);return aa[r]=s,s}function fm(t,e,r){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");if(r>=t&&r<=e)return r;if(r>e)return e;if(r<t)return t}const gm=Pu(fm);function Wf(t,e){return arguments.length===1?r=>Wf(t,r):e!=null&&e.constructor===t||e instanceof t}function pm(t){return t==null}var Jl={exports:{}},Zl={},Oe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Nh<"u"?Nh:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.6",isBrowser:r(),isUnminified:/param/.test((function(o){}).toString()),dblClickWindow:400,getAngle(o){return t.Konva.angleDeg?o*e:o},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var o;return(o=t.Konva.Transformer)===null||o===void 0?void 0:o.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(o){t.glob.Konva=o}};const s=o=>{t.Konva[o.prototype.getClassName()]=o};t._registerNode=s,t.Konva._injectGlobal(t.Konva)})(Oe);var rt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=Oe;class r{constructor(C=[1,0,0,1,0,0]){this.dirty=!1,this.m=C&&C.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(C){C.m[0]=this.m[0],C.m[1]=this.m[1],C.m[2]=this.m[2],C.m[3]=this.m[3],C.m[4]=this.m[4],C.m[5]=this.m[5]}point(C){var A=this.m;return{x:A[0]*C.x+A[2]*C.y+A[4],y:A[1]*C.x+A[3]*C.y+A[5]}}translate(C,A){return this.m[4]+=this.m[0]*C+this.m[2]*A,this.m[5]+=this.m[1]*C+this.m[3]*A,this}scale(C,A){return this.m[0]*=C,this.m[1]*=C,this.m[2]*=A,this.m[3]*=A,this}rotate(C){var A=Math.cos(C),F=Math.sin(C),W=this.m[0]*A+this.m[2]*F,w=this.m[1]*A+this.m[3]*F,D=this.m[0]*-F+this.m[2]*A,T=this.m[1]*-F+this.m[3]*A;return this.m[0]=W,this.m[1]=w,this.m[2]=D,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(C,A){var F=this.m[0]+this.m[2]*A,W=this.m[1]+this.m[3]*A,w=this.m[2]+this.m[0]*C,D=this.m[3]+this.m[1]*C;return this.m[0]=F,this.m[1]=W,this.m[2]=w,this.m[3]=D,this}multiply(C){var A=this.m[0]*C.m[0]+this.m[2]*C.m[1],F=this.m[1]*C.m[0]+this.m[3]*C.m[1],W=this.m[0]*C.m[2]+this.m[2]*C.m[3],w=this.m[1]*C.m[2]+this.m[3]*C.m[3],D=this.m[0]*C.m[4]+this.m[2]*C.m[5]+this.m[4],T=this.m[1]*C.m[4]+this.m[3]*C.m[5]+this.m[5];return this.m[0]=A,this.m[1]=F,this.m[2]=W,this.m[3]=w,this.m[4]=D,this.m[5]=T,this}invert(){var C=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),A=this.m[3]*C,F=-this.m[1]*C,W=-this.m[2]*C,w=this.m[0]*C,D=C*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=C*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=A,this.m[1]=F,this.m[2]=W,this.m[3]=w,this.m[4]=D,this.m[5]=T,this}getMatrix(){return this.m}decompose(){var C=this.m[0],A=this.m[1],F=this.m[2],W=this.m[3],w=this.m[4],D=this.m[5],T=C*W-A*F;let O={x:w,y:D,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(C!=0||A!=0){var V=Math.sqrt(C*C+A*A);O.rotation=A>0?Math.acos(C/V):-Math.acos(C/V),O.scaleX=V,O.scaleY=T/V,O.skewX=(C*F+A*W)/T,O.skewY=0}else if(F!=0||W!=0){var j=Math.sqrt(F*F+W*W);O.rotation=Math.PI/2-(W>0?Math.acos(-F/j):-Math.acos(F/j)),O.scaleX=T/j,O.scaleY=j,O.skewX=0,O.skewY=(C*F+A*W)/T}return O.rotation=t.Util._getRotation(O.rotation),O}}t.Transform=r;var s="[object Array]",o="[object Number]",l="[object String]",h="[object Boolean]",d=Math.PI/180,f=180/Math.PI,p="#",y="",P="0",E="Konva warning: ",S="Konva error: ",v="rgb(",k={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},x=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,b=[];const M=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(m){setTimeout(m,60)};t.Util={_isElement(m){return!!(m&&m.nodeType==1)},_isFunction(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject(m){return!!m&&m.constructor===Object},_isArray(m){return Object.prototype.toString.call(m)===s},_isNumber(m){return Object.prototype.toString.call(m)===o&&!isNaN(m)&&isFinite(m)},_isString(m){return Object.prototype.toString.call(m)===l},_isBoolean(m){return Object.prototype.toString.call(m)===h},isObject(m){return m instanceof Object},isValidSelector(m){if(typeof m!="string")return!1;var C=m[0];return C==="#"||C==="."||C===C.toUpperCase()},_sign(m){return m===0||m>0?1:-1},requestAnimFrame(m){b.push(m),b.length===1&&M(function(){const C=b;b=[],C.forEach(function(A){A()})})},createCanvasElement(){var m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement(){return document.createElement("img")},_isInDocument(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_urlToImage(m,C){var A=t.Util.createImageElement();A.onload=function(){C(A)},A.src=m},_rgbToHex(m,C,A){return((1<<24)+(m<<16)+(C<<8)+A).toString(16).slice(1)},_hexToRgb(m){m=m.replace(p,y);var C=parseInt(m,16);return{r:C>>16&255,g:C>>8&255,b:C&255}},getRandomColor(){for(var m=(Math.random()*16777215<<0).toString(16);m.length<6;)m=P+m;return p+m},getRGB(m){var C;return m in k?(C=k[m],{r:C[0],g:C[1],b:C[2]}):m[0]===p?this._hexToRgb(m.substring(1)):m.substr(0,4)===v?(C=x.exec(m.replace(/ /g,"")),{r:parseInt(C[1],10),g:parseInt(C[2],10),b:parseInt(C[3],10)}):{r:0,g:0,b:0}},colorToRGBA(m){return m=m||"black",t.Util._namedColorToRBA(m)||t.Util._hex3ColorToRGBA(m)||t.Util._hex4ColorToRGBA(m)||t.Util._hex6ColorToRGBA(m)||t.Util._hex8ColorToRGBA(m)||t.Util._rgbColorToRGBA(m)||t.Util._rgbaColorToRGBA(m)||t.Util._hslColorToRGBA(m)},_namedColorToRBA(m){var C=k[m.toLowerCase()];return C?{r:C[0],g:C[1],b:C[2],a:1}:null},_rgbColorToRGBA(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];var C=m.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:1}}},_rgbaColorToRGBA(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];var C=m.split(/ *, */).map((A,F)=>A.slice(-1)==="%"?F===3?parseInt(A)/100:parseInt(A)/100*255:Number(A));return{r:C[0],g:C[1],b:C[2],a:C[3]}}},_hex8ColorToRGBA(m){if(m[0]==="#"&&m.length===9)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:parseInt(m.slice(7,9),16)/255}},_hex6ColorToRGBA(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex4ColorToRGBA(m){if(m[0]==="#"&&m.length===5)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:parseInt(m[4]+m[4],16)/255}},_hex3ColorToRGBA(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){const[C,...A]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m),F=Number(A[0])/360,W=Number(A[1])/100,w=Number(A[2])/100;let D,T,O;if(W===0)return O=w*255,{r:Math.round(O),g:Math.round(O),b:Math.round(O),a:1};w<.5?D=w*(1+W):D=w+W-w*W;const V=2*w-D,j=[0,0,0];for(let N=0;N<3;N++)T=F+1/3*-(N-1),T<0&&T++,T>1&&T--,6*T<1?O=V+(D-V)*6*T:2*T<1?O=D:3*T<2?O=V+(D-V)*(2/3-T)*6:O=V,j[N]=O*255;return{r:Math.round(j[0]),g:Math.round(j[1]),b:Math.round(j[2]),a:1}}},haveIntersection(m,C){return!(C.x>m.x+m.width||C.x+C.width<m.x||C.y>m.y+m.height||C.y+C.height<m.y)},cloneObject(m){var C={};for(var A in m)this._isPlainObject(m[A])?C[A]=this.cloneObject(m[A]):this._isArray(m[A])?C[A]=this.cloneArray(m[A]):C[A]=m[A];return C},cloneArray(m){return m.slice(0)},degToRad(m){return m*d},radToDeg(m){return m*f},_degToRad(m){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(m)},_radToDeg(m){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(m)},_getRotation(m){return e.Konva.angleDeg?t.Util.radToDeg(m):m},_capitalize(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw(m){throw new Error(S+m)},error(m){console.error(S+m)},warn(m){e.Konva.showWarnings&&console.warn(E+m)},each(m,C){for(var A in m)C(A,m[A])},_inRange(m,C,A){return C<=m&&m<A},_getProjectionToSegment(m,C,A,F,W,w){var D,T,O,V=(m-A)*(m-A)+(C-F)*(C-F);if(V==0)D=m,T=C,O=(W-A)*(W-A)+(w-F)*(w-F);else{var j=((W-m)*(A-m)+(w-C)*(F-C))/V;j<0?(D=m,T=C,O=(m-W)*(m-W)+(C-w)*(C-w)):j>1?(D=A,T=F,O=(A-W)*(A-W)+(F-w)*(F-w)):(D=m+j*(A-m),T=C+j*(F-C),O=(D-W)*(D-W)+(T-w)*(T-w))}return[D,T,O]},_getProjectionToLine(m,C,A){var F=t.Util.cloneObject(m),W=Number.MAX_VALUE;return C.forEach(function(w,D){if(!(!A&&D===C.length-1)){var T=C[(D+1)%C.length],O=t.Util._getProjectionToSegment(w.x,w.y,T.x,T.y,m.x,m.y),V=O[0],j=O[1],N=O[2];N<W&&(F.x=V,F.y=j,W=N)}}),F},_prepareArrayForTween(m,C,A){var F,W=[],w=[];if(m.length>C.length){var D=C;C=m,m=D}for(F=0;F<m.length;F+=2)W.push({x:m[F],y:m[F+1]});for(F=0;F<C.length;F+=2)w.push({x:C[F],y:C[F+1]});var T=[];return w.forEach(function(O){var V=t.Util._getProjectionToLine(O,W,A);T.push(V.x),T.push(V.y)}),T},_prepareToStringify(m){var C;m.visitedByCircularReferenceRemoval=!0;for(var A in m)if(m.hasOwnProperty(A)&&m[A]&&typeof m[A]=="object"){if(C=Object.getOwnPropertyDescriptor(m,A),m[A].visitedByCircularReferenceRemoval||t.Util._isElement(m[A]))if(C.configurable)delete m[A];else return null;else if(t.Util._prepareToStringify(m[A])===null)if(C.configurable)delete m[A];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign(m,C){for(var A in C)m[A]=C[A];return m},_getFirstPointerId(m){return m.touches?m.changedTouches[0].identifier:m.pointerId||999},releaseCanvas(...m){e.Konva.releaseCanvasOnDestroy&&m.forEach(C=>{C.width=0,C.height=0})},drawRoundedRectPath(m,C,A,F){let W=0,w=0,D=0,T=0;typeof F=="number"?W=w=D=T=Math.min(F,C/2,A/2):(W=Math.min(F[0]||0,C/2,A/2),w=Math.min(F[1]||0,C/2,A/2),T=Math.min(F[2]||0,C/2,A/2),D=Math.min(F[3]||0,C/2,A/2)),m.moveTo(W,0),m.lineTo(C-w,0),m.arc(C-w,w,w,Math.PI*3/2,0,!1),m.lineTo(C,A-T),m.arc(C-T,A-T,T,0,Math.PI/2,!1),m.lineTo(D,A),m.arc(D,A-D,D,Math.PI/2,Math.PI,!1),m.lineTo(0,W),m.arc(W,W,W,Math.PI,Math.PI*3/2,!1)}}})(rt);var Zn={},Pt={},we={};Object.defineProperty(we,"__esModule",{value:!0});we.getComponentValidator=we.getBooleanValidator=we.getNumberArrayValidator=we.getFunctionValidator=we.getStringOrGradientValidator=we.getStringValidator=we.getNumberOrAutoValidator=we.getNumberOrArrayOfNumbersValidator=we.getNumberValidator=we.alphaComponent=we.RGBComponent=void 0;const bn=Oe,Ge=rt;function In(t){return Ge.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||Ge.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function mm(t){return t>255?255:t<0?0:Math.round(t)}we.RGBComponent=mm;function vm(t){return t>1?1:t<1e-4?1e-4:t}we.alphaComponent=vm;function ym(){if(bn.Konva.isUnminified)return function(t,e){return Ge.Util._isNumber(t)||Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}we.getNumberValidator=ym;function _m(t){if(bn.Konva.isUnminified)return function(e,r){let s=Ge.Util._isNumber(e),o=Ge.Util._isArray(e)&&e.length==t;return!s&&!o&&Ge.Util.warn(In(e)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+t+")"),e}}we.getNumberOrArrayOfNumbersValidator=_m;function Sm(){if(bn.Konva.isUnminified)return function(t,e){var r=Ge.Util._isNumber(t),s=t==="auto";return r||s||Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}we.getNumberOrAutoValidator=Sm;function wm(){if(bn.Konva.isUnminified)return function(t,e){return Ge.Util._isString(t)||Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}we.getStringValidator=wm;function Cm(){if(bn.Konva.isUnminified)return function(t,e){const r=Ge.Util._isString(t),s=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return r||s||Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}we.getStringOrGradientValidator=Cm;function Em(){if(bn.Konva.isUnminified)return function(t,e){return Ge.Util._isFunction(t)||Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}we.getFunctionValidator=Em;function Pm(){if(bn.Konva.isUnminified)return function(t,e){const r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&t instanceof r||(Ge.Util._isArray(t)?t.forEach(function(s){Ge.Util._isNumber(s)||Ge.Util.warn('"'+e+'" attribute has non numeric element '+s+". Make sure that all elements are numbers.")}):Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}we.getNumberArrayValidator=Pm;function km(){if(bn.Konva.isUnminified)return function(t,e){var r=t===!0||t===!1;return r||Ge.Util.warn(In(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}we.getBooleanValidator=km;function xm(t){if(bn.Konva.isUnminified)return function(e,r){return e==null||Ge.Util.isObject(e)||Ge.Util.warn(In(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}we.getComponentValidator=xm;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=rt,r=we;var s="get",o="set";t.Factory={addGetterSetter(l,h,d,f,p){t.Factory.addGetter(l,h,d),t.Factory.addSetter(l,h,f,p),t.Factory.addOverloadedGetterSetter(l,h)},addGetter(l,h,d){var f=s+e.Util._capitalize(h);l.prototype[f]=l.prototype[f]||function(){var p=this.attrs[h];return p===void 0?d:p}},addSetter(l,h,d,f){var p=o+e.Util._capitalize(h);l.prototype[p]||t.Factory.overWriteSetter(l,h,d,f)},overWriteSetter(l,h,d,f){var p=o+e.Util._capitalize(h);l.prototype[p]=function(y){return d&&y!==void 0&&y!==null&&(y=d.call(this,y,h)),this._setAttr(h,y),f&&f.call(this),this}},addComponentsGetterSetter(l,h,d,f,p){var y=d.length,P=e.Util._capitalize,E=s+P(h),S=o+P(h),v,k;l.prototype[E]=function(){var b={};for(v=0;v<y;v++)k=d[v],b[k]=this.getAttr(h+P(k));return b};var x=(0,r.getComponentValidator)(d);l.prototype[S]=function(b){var M=this.attrs[h],m;f&&(b=f.call(this,b)),x&&x.call(this,b,h);for(m in b)b.hasOwnProperty(m)&&this._setAttr(h+P(m),b[m]);return b||d.forEach(C=>{this._setAttr(h+P(C),void 0)}),this._fireChangeEvent(h,M,b),p&&p.call(this),this},t.Factory.addOverloadedGetterSetter(l,h)},addOverloadedGetterSetter(l,h){var d=e.Util._capitalize(h),f=o+d,p=s+d;l.prototype[h]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(l,h,d,f){e.Util.error("Adding deprecated "+h);var p=s+e.Util._capitalize(h),y=h+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[p]=function(){e.Util.error(y);var P=this.attrs[h];return P===void 0?d:P},t.Factory.addSetter(l,h,f,function(){e.Util.error(y)}),t.Factory.addOverloadedGetterSetter(l,h)},backCompat(l,h){e.Util.each(h,function(d,f){var p=l.prototype[f],y=s+e.Util._capitalize(d),P=o+e.Util._capitalize(d);function E(){p.apply(this,arguments),e.Util.error('"'+d+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}l.prototype[d]=E,l.prototype[y]=E,l.prototype[P]=E})},afterSetFilter(){this._filterUpToDate=!1}}})(Pt);var Jt={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.HitContext=xn.SceneContext=xn.Context=void 0;const Kf=rt,Tm=Oe;function Am(t){var e=[],r=t.length,s=Kf.Util,o,l;for(o=0;o<r;o++)l=t[o],s._isNumber(l)?l=Math.round(l*1e3)/1e3:s._isString(l)||(l=l+""),e.push(l);return e}var fd=",",Rm="(",bm=")",Im="([",Om="])",Dm=";",Lm="()",Mm="=",gd=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Nm=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Fm=100;class Ga{constructor(e){this.canvas=e,Tm.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,r){var s=this.traceArr,o=s.length,l="",h,d,f,p;for(h=0;h<o;h++)d=s[h],f=d.method,f?(p=d.args,l+=f,e?l+=Lm:Kf.Util._isArray(p[0])?l+=Im+p.join(fd)+Om:(r&&(p=p.map(y=>typeof y=="number"?Math.floor(y):y)),l+=Rm+p.join(fd)+bm)):(l+=d.property,e||(l+=Mm+d.val)),l+=Dm;return l}clearTrace(){this.traceArr=[]}_trace(e){var r=this.traceArr,s;r.push(e),s=r.length,s>=Fm&&r.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var r=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,r.getWidth()/r.pixelRatio,r.getHeight()/r.pixelRatio)}_applyLineCap(e){const r=e.attrs.lineCap;r&&this.setAttr("lineCap",r)}_applyOpacity(e){var r=e.getAbsoluteOpacity();r!==1&&this.setAttr("globalAlpha",r)}_applyLineJoin(e){const r=e.attrs.lineJoin;r&&this.setAttr("lineJoin",r)}setAttr(e,r){this._context[e]=r}arc(e,r,s,o,l,h){this._context.arc(e,r,s,o,l,h)}arcTo(e,r,s,o,l){this._context.arcTo(e,r,s,o,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,r,s,o,l,h){this._context.bezierCurveTo(e,r,s,o,l,h)}clearRect(e,r,s,o){this._context.clearRect(e,r,s,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,r){var s=arguments;if(s.length===2)return this._context.createImageData(e,r);if(s.length===1)return this._context.createImageData(e)}createLinearGradient(e,r,s,o){return this._context.createLinearGradient(e,r,s,o)}createPattern(e,r){return this._context.createPattern(e,r)}createRadialGradient(e,r,s,o,l,h){return this._context.createRadialGradient(e,r,s,o,l,h)}drawImage(e,r,s,o,l,h,d,f,p){var y=arguments,P=this._context;y.length===3?P.drawImage(e,r,s):y.length===5?P.drawImage(e,r,s,o,l):y.length===9&&P.drawImage(e,r,s,o,l,h,d,f,p)}ellipse(e,r,s,o,l,h,d,f){this._context.ellipse(e,r,s,o,l,h,d,f)}isPointInPath(e,r,s,o){return s?this._context.isPointInPath(s,e,r,o):this._context.isPointInPath(e,r,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,r,s,o){this._context.fillRect(e,r,s,o)}strokeRect(e,r,s,o){this._context.strokeRect(e,r,s,o)}fillText(e,r,s,o){o?this._context.fillText(e,r,s,o):this._context.fillText(e,r,s)}measureText(e){return this._context.measureText(e)}getImageData(e,r,s,o){return this._context.getImageData(e,r,s,o)}lineTo(e,r){this._context.lineTo(e,r)}moveTo(e,r){this._context.moveTo(e,r)}rect(e,r,s,o){this._context.rect(e,r,s,o)}roundRect(e,r,s,o,l){this._context.roundRect(e,r,s,o,l)}putImageData(e,r,s){this._context.putImageData(e,r,s)}quadraticCurveTo(e,r,s,o){this._context.quadraticCurveTo(e,r,s,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,r){this._context.scale(e,r)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,r,s,o,l,h){this._context.setTransform(e,r,s,o,l,h)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,r,s,o){this._context.strokeText(e,r,s,o)}transform(e,r,s,o,l,h){this._context.transform(e,r,s,o,l,h)}translate(e,r){this._context.translate(e,r)}_enableTrace(){var e=this,r=gd.length,s=this.setAttr,o,l,h=function(d){var f=e[d],p;e[d]=function(){return l=Am(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:d,args:l}),p}};for(o=0;o<r;o++)h(gd[o]);e.setAttr=function(){s.apply(e,arguments);var d=arguments[0],f=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:d,val:f})}}_applyGlobalCompositeOperation(e){const r=e.attrs.globalCompositeOperation;var s=!r||r==="source-over";s||this.setAttr("globalCompositeOperation",r)}}xn.Context=Ga;Nm.forEach(function(t){Object.defineProperty(Ga.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Um extends Ga{constructor(e,{willReadFrequently:r=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:r})}_fillColor(e){var r=e.fill();this.setAttr("fillStyle",r),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var r=e._getLinearGradient();r&&(this.setAttr("fillStyle",r),e._fillFunc(this))}_fillRadialGradient(e){const r=e._getRadialGradient();r&&(this.setAttr("fillStyle",r),e._fillFunc(this))}_fill(e){const r=e.fill(),s=e.getFillPriority();if(r&&s==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&s==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&s==="linear-gradient"){this._fillLinearGradient(e);return}const h=e.getFillRadialGradientColorStops();if(h&&s==="radial-gradient"){this._fillRadialGradient(e);return}r?this._fillColor(e):o?this._fillPattern(e):l?this._fillLinearGradient(e):h&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const r=e.getStrokeLinearGradientStartPoint(),s=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(r.x,r.y,s.x,s.y);if(o){for(var h=0;h<o.length;h+=2)l.addColorStop(o[h],o[h+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var r=e.dash(),s=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!s){this.save();var o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(e),r&&e.dashEnabled()&&(this.setLineDash(r),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),s||this.restore()}}_applyShadow(e){var r,s,o,l=(r=e.getShadowRGBA())!==null&&r!==void 0?r:"black",h=(s=e.getShadowBlur())!==null&&s!==void 0?s:5,d=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),y=f.x*p,P=f.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",h*Math.min(Math.abs(y),Math.abs(P))),this.setAttr("shadowOffsetX",d.x*y),this.setAttr("shadowOffsetY",d.y*P)}}xn.SceneContext=Um;class zm extends Ga{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const l=e.getStrokeScaleEnabled();if(!l){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e);var s=e.hitStrokeWidth(),o=s==="auto"?e.strokeWidth():s;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),l||this.restore()}}}xn.HitContext=zm;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.HitCanvas=Jt.SceneCanvas=Jt.Canvas=void 0;const Ra=rt,Yf=xn,Xf=Oe,Gm=Pt,Bm=we;var oa;function Vm(){if(oa)return oa;var t=Ra.Util.createCanvasElement(),e=t.getContext("2d");return oa=function(){var r=Xf.Konva._global.devicePixelRatio||1,s=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/s}(),Ra.Util.releaseCanvas(t),oa}class Ba{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var r=e||{},s=r.pixelRatio||Xf.Konva.pixelRatio||Vm();this.pixelRatio=s,this._canvas=Ra.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var r=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var r=this.pixelRatio,s=this.getContext()._context;s.scale(r,r)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var r=this.pixelRatio,s=this.getContext()._context;s.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,r){this.setWidth(e||0),this.setHeight(r||0)}toDataURL(e,r){try{return this._canvas.toDataURL(e,r)}catch{try{return this._canvas.toDataURL()}catch(s){return Ra.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Jt.Canvas=Ba;Gm.Factory.addGetterSetter(Ba,"pixelRatio",void 0,(0,Bm.getNumberValidator)());class jm extends Ba{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Yf.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Jt.SceneCanvas=jm;class Hm extends Ba{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Yf.HitContext(this),this.setSize(e.width,e.height)}}Jt.HitCanvas=Hm;var Va={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=Oe,r=rt;t.DD={get isDragging(){var s=!1;return t.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(s=!0)}),s},justDragged:!1,get node(){var s;return t.DD._dragElements.forEach(o=>{s=o.node}),s},_dragElements:new Map,_drag(s){const o=[];t.DD._dragElements.forEach((l,h)=>{const{node:d}=l,f=d.getStage();f.setPointersPositions(s),l.pointerId===void 0&&(l.pointerId=r.Util._getFirstPointerId(s));const p=f._changedPointerPositions.find(E=>E.id===l.pointerId);if(p){if(l.dragStatus!=="dragging"){var y=d.dragDistance(),P=Math.max(Math.abs(p.x-l.startPointerPos.x),Math.abs(p.y-l.startPointerPos.y));if(P<y||(d.startDrag({evt:s}),!d.isDragging()))return}d._setDragPosition(s,l),o.push(d)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:s},!0)})},_endDragBefore(s){const o=[];t.DD._dragElements.forEach(l=>{const{node:h}=l,d=h.getStage();if(s&&d.setPointersPositions(s),!d._changedPointerPositions.find(p=>p.id===l.pointerId))return;(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,l.dragStatus="stopped");const f=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;f&&o.indexOf(f)===-1&&o.push(f)}),o.forEach(l=>{l.draw()})},_endDragAfter(s){t.DD._dragElements.forEach((o,l)=>{o.dragStatus==="stopped"&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:s},!0),o.dragStatus!=="dragging"&&t.DD._dragElements.delete(l)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))})(Va);Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Node=void 0;const Se=rt,is=Pt,Ai=Jt,jn=Oe,Ft=Va,He=we;var ga="absoluteOpacity",la="allEventListeners",Pn="absoluteTransform",pd="absoluteScale",gr="canvas",Wm="Change",Km="children",Ym="konva",$l="listening",md="mouseenter",vd="mouseleave",yd="set",_d="Shape",pa=" ",Sd="stage",Hn="transform",Xm="Stage",eu="visible",qm=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(pa);let Qm=1;class ce{constructor(e){this._id=Qm++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Hn||e===Pn)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,r){var s=this._cache.get(e),o=e===Hn||e===Pn,l=s===void 0||o&&s.dirty===!0;return l&&(s=r.call(this),this._cache.set(e,s)),s}_calculate(e,r,s){if(!this._attachedDepsListeners.get(e)){const o=r.map(l=>l+"Change.konva").join(pa);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,s)}_getCanvasCache(){return this._cache.get(gr)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Pn&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(gr)){const{scene:e,filter:r,hit:s}=this._cache.get(gr);Se.Util.releaseCanvas(e,r,s),this._cache.delete(gr)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var r=e||{},s={};(r.x===void 0||r.y===void 0||r.width===void 0||r.height===void 0)&&(s=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var o=Math.ceil(r.width||s.width),l=Math.ceil(r.height||s.height),h=r.pixelRatio,d=r.x===void 0?Math.floor(s.x):r.x,f=r.y===void 0?Math.floor(s.y):r.y,p=r.offset||0,y=r.drawBorder||!1,P=r.hitCanvasPixelRatio||1;if(!o||!l){Se.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const E=Math.abs(Math.round(s.x)-d)>.5?1:0,S=Math.abs(Math.round(s.y)-f)>.5?1:0;o+=p*2+E,l+=p*2+S,d-=p,f-=p;var v=new Ai.SceneCanvas({pixelRatio:h,width:o,height:l}),k=new Ai.SceneCanvas({pixelRatio:h,width:0,height:0,willReadFrequently:!0}),x=new Ai.HitCanvas({pixelRatio:P,width:o,height:l}),b=v.getContext(),M=x.getContext();return x.isCache=!0,v.isCache=!0,this._cache.delete(gr),this._filterUpToDate=!1,r.imageSmoothingEnabled===!1&&(v.getContext()._context.imageSmoothingEnabled=!1,k.getContext()._context.imageSmoothingEnabled=!1),b.save(),M.save(),b.translate(-d,-f),M.translate(-d,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ga),this._clearSelfAndDescendantCache(pd),this.drawScene(v,this),this.drawHit(x,this),this._isUnderCache=!1,b.restore(),M.restore(),y&&(b.save(),b.beginPath(),b.rect(0,0,o,l),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(gr,{scene:v,filter:k,hit:x,x:d,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(gr)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,r){var s=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,l=1/0,h=-1/0,d=-1/0,f=this.getAbsoluteTransform(r);return s.forEach(function(p){var y=f.point(p);o===void 0&&(o=h=y.x,l=d=y.y),o=Math.min(o,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),d=Math.max(d,y.y)}),{x:o,y:l,width:h-o,height:d-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const r=this._getCanvasCache();e.translate(r.x,r.y);var s=this._getCachedSceneCanvas(),o=s.pixelRatio;e.drawImage(s._canvas,0,0,s.width/o,s.height/o),e.restore()}_drawCachedHitCanvas(e){var r=this._getCanvasCache(),s=r.hit;e.save(),e.translate(r.x,r.y),e.drawImage(s._canvas,0,0,s.width/s.pixelRatio,s.height/s.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),r=this._getCanvasCache(),s=r.scene,o=r.filter,l=o.getContext(),h,d,f,p;if(e){if(!this._filterUpToDate){var y=s.pixelRatio;o.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio);try{for(h=e.length,l.clear(),l.drawImage(s._canvas,0,0,s.getWidth()/y,s.getHeight()/y),d=l.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<h;f++){if(p=e[f],typeof p!="function"){Se.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,d),l.putImageData(d,0,0)}}catch(P){Se.Util.error("Unable to apply filter. "+P.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return s}on(e,r){if(this._cache&&this._cache.delete(la),arguments.length===3)return this._delegate.apply(this,arguments);var s=e.split(pa),o=s.length,l,h,d,f,p;for(l=0;l<o;l++)h=s[l],d=h.split("."),f=d[0],p=d[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:r});return this}off(e,r){var s=(e||"").split(pa),o=s.length,l,h,d,f,p,y;if(this._cache&&this._cache.delete(la),!e)for(h in this.eventListeners)this._off(h);for(l=0;l<o;l++)if(d=s[l],f=d.split("."),p=f[0],y=f[1],p)this.eventListeners[p]&&this._off(p,y,r);else for(h in this.eventListeners)this._off(h,y,r);return this}dispatchEvent(e){var r={target:this,type:e.type,evt:e};return this.fire(e.type,r),this}addEventListener(e,r){return this.on(e,function(s){r.call(this,s.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,r,s){var o=this;this.on(e,function(l){for(var h=l.target.findAncestors(r,!0,o),d=0;d<h.length;d++)l=Se.Util.cloneObject(l),l.currentTarget=h[d],s.call(h[d],l)})}remove(){return this.isDragging()&&this.stopDrag(),Ft.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Pn),this._clearSelfAndDescendantCache(ga),this._clearSelfAndDescendantCache(pd),this._clearSelfAndDescendantCache(Sd),this._clearSelfAndDescendantCache(eu),this._clearSelfAndDescendantCache($l)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var r="get"+Se.Util._capitalize(e);return Se.Util._isFunction(this[r])?this[r]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),r=[];e;)r.push(e),e=e.getParent();return r}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var r,s;if(!e)return this;for(r in e)r!==Km&&(s=yd+Se.Util._capitalize(r),Se.Util._isFunction(this[s])?this[s](e[r]):this._setAttr(r,e[r]))}),this}isListening(){return this._getCache($l,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(eu,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,r=!1){if(e)return this._isVisible(e)&&this._isListening(e);var s=this.getLayer(),o=!1;Ft.DD._dragElements.forEach(h=>{h.dragStatus==="dragging"&&(h.node.nodeType==="Stage"||h.node.getLayer()===s)&&(o=!0)});var l=!r&&!jn.Konva.hitOnDragEnabled&&(o||jn.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),r=this,s=0,o,l,h,d;function f(y){for(o=[],l=y.length,h=0;h<l;h++)d=y[h],s++,d.nodeType!==_d&&(o=o.concat(d.getChildren().slice())),d._id===r._id&&(h=l);o.length>0&&o[0].getDepth()<=e&&f(o)}const p=this.getStage();return r.nodeType!==Xm&&p&&f(p.getChildren()),s}getDepth(){for(var e=0,r=this.parent;r;)e++,r=r.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Hn),this._clearSelfAndDescendantCache(Pn)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var r=e.getPointerPosition();if(!r)return null;var s=this.getAbsoluteTransform().copy();return s.invert(),s.point(r)}getAbsolutePosition(e){let r=!1,s=this.parent;for(;s;){if(s.isCached()){r=!0;break}s=s.parent}r&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),l=new Se.Transform,h=this.offset();return l.m=o.slice(),l.translate(h.x,h.y),l.getTranslation()}setAbsolutePosition(e){const{x:r,y:s,...o}=this._clearTransform();this.attrs.x=r,this.attrs.y=s,this._clearCache(Hn);var l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(Hn),this._clearSelfAndDescendantCache(Pn),this}_setTransform(e){var r;for(r in e)this.attrs[r]=e[r]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var r=e.x,s=e.y,o=this.x(),l=this.y();return r!==void 0&&(o+=r),s!==void 0&&(l+=s),this.setPosition({x:o,y:l}),this}_eachAncestorReverse(e,r){var s=[],o=this.getParent(),l,h;if(!(r&&r._id===this._id)){for(s.unshift(this);o&&(!r||o._id!==r._id);)s.unshift(o),o=o.parent;for(l=s.length,h=0;h<l;h++)e(s[h])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Se.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,r=this.parent.getChildren().length;return e<r-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Se.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,r=this.parent.getChildren().length;return e<r-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Se.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Se.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Se.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Se.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var r=this.index;return this.parent.children.splice(r,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ga,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),r=this.getParent();return r&&!r._isUnderCache&&(e*=r.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),r,s,o,l,h;const d={attrs:{},className:this.getClassName()};for(r in e)s=e[r],h=Se.Util.isObject(s)&&!Se.Util._isPlainObject(s)&&!Se.Util._isArray(s),!h&&(o=typeof this[r]=="function"&&this[r],delete e[r],l=o?o.call(this):null,e[r]=s,l!==s&&(d.attrs[r]=s));return Se.Util._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,r,s){var o=[];r&&this._isMatch(e)&&o.push(this);for(var l=this.parent;l;){if(l===s)return o;l._isMatch(e)&&o.push(l),l=l.parent}return o}isAncestorOf(e){return!1}findAncestor(e,r,s){return this.findAncestors(e,r,s)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var r=e.replace(/ /g,"").split(","),s=r.length,o,l;for(o=0;o<s;o++)if(l=r[o],Se.Util.isValidSelector(l)||(Se.Util.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Se.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Se.Util.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Sd,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,r={},s){return r.target=r.target||this,s?this._fireAndBubble(e,r):this._fire(e,r),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Pn,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var r;if(e)return r=new Se.Transform,this._eachAncestorReverse(function(o){var l=o.transformsEnabled();l==="all"?r.multiply(o.getTransform()):l==="position"&&r.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),r;r=this._cache.get(Pn)||new Se.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(r):r.reset();var s=this.transformsEnabled();if(s==="all")r.multiply(this.getTransform());else if(s==="position"){const o=this.attrs.x||0,l=this.attrs.y||0,h=this.attrs.offsetX||0,d=this.attrs.offsetY||0;r.translate(o-h,l-d)}return r.dirty=!1,r}getAbsoluteScale(e){for(var r=this;r;)r._isUnderCache&&(e=r),r=r.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Hn,this._getTransform)}_getTransform(){var e,r,s=this._cache.get(Hn)||new Se.Transform;s.reset();var o=this.x(),l=this.y(),h=jn.Konva.getAngle(this.rotation()),d=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(r=this.attrs.scaleY)!==null&&r!==void 0?r:1,p=this.attrs.skewX||0,y=this.attrs.skewY||0,P=this.attrs.offsetX||0,E=this.attrs.offsetY||0;return(o!==0||l!==0)&&s.translate(o,l),h!==0&&s.rotate(h),(p!==0||y!==0)&&s.skew(p,y),(d!==1||f!==1)&&s.scale(d,f),(P!==0||E!==0)&&s.translate(-1*P,-1*E),s.dirty=!1,s}clone(e){var r=Se.Util.cloneObject(this.attrs),s,o,l,h,d;for(s in e)r[s]=e[s];var f=new this.constructor(r);for(s in this.eventListeners)for(o=this.eventListeners[s],l=o.length,h=0;h<l;h++)d=o[h],d.name.indexOf(Ym)<0&&(f.eventListeners[s]||(f.eventListeners[s]=[]),f.eventListeners[s].push(d));return f}_toKonvaCanvas(e){e=e||{};var r=this.getClientRect(),s=this.getStage(),o=e.x!==void 0?e.x:Math.floor(r.x),l=e.y!==void 0?e.y:Math.floor(r.y),h=e.pixelRatio||1,d=new Ai.SceneCanvas({width:e.width||Math.ceil(r.width)||(s?s.width():0),height:e.height||Math.ceil(r.height)||(s?s.height():0),pixelRatio:h}),f=d.getContext();const p=new Ai.SceneCanvas({width:d.width/d.pixelRatio+Math.abs(o),height:d.height/d.pixelRatio+Math.abs(l),pixelRatio:d.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||l)&&f.translate(-1*o,-1*l),this.drawScene(d,void 0,p),f.restore(),d}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var r=e.mimeType||null,s=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(r,s);return e.callback&&e.callback(o),o}toImage(e){return new Promise((r,s)=>{try{const o=e==null?void 0:e.callback;o&&delete e.callback,Se.Util._urlToImage(this.toDataURL(e),function(l){r(l),o==null||o(l)})}catch(o){s(o)}})}toBlob(e){return new Promise((r,s)=>{try{const o=e==null?void 0:e.callback;o&&delete e.callback,this.toCanvas(e).toBlob(l=>{r(l),o==null||o(l)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(o){s(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():jn.Konva.dragDistance}_off(e,r,s){var o=this.eventListeners[e],l,h,d;for(l=0;l<o.length;l++)if(h=o[l].name,d=o[l].handler,(h!=="konva"||r==="konva")&&(!r||h===r)&&(!s||s===d)){if(o.splice(l,1),o.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,r,s){this._fire(e+Wm,{oldVal:r,newVal:s})}addName(e){if(!this.hasName(e)){var r=this.name(),s=r?r+" "+e:e;this.name(s)}return this}hasName(e){if(!e)return!1;const r=this.name();if(!r)return!1;var s=(r||"").split(/\s/g);return s.indexOf(e)!==-1}removeName(e){var r=(this.name()||"").split(/\s/g),s=r.indexOf(e);return s!==-1&&(r.splice(s,1),this.name(r.join(" "))),this}setAttr(e,r){var s=this[yd+Se.Util._capitalize(e)];return Se.Util._isFunction(s)?s.call(this,r):this._setAttr(e,r),this}_requestDraw(){if(jn.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,r){var s=this.attrs[e];s===r&&!Se.Util.isObject(r)||(r==null?delete this.attrs[e]:this.attrs[e]=r,this._shouldFireChangeEvents&&this._fireChangeEvent(e,s,r),this._requestDraw())}_setComponentAttr(e,r,s){var o;s!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][r]=s,this._fireChangeEvent(e,o,s))}_fireAndBubble(e,r,s){r&&this.nodeType===_d&&(r.target=this);var o=(e===md||e===vd)&&(s&&(this===s||this.isAncestorOf&&this.isAncestorOf(s))||this.nodeType==="Stage"&&!s);if(!o){this._fire(e,r);var l=(e===md||e===vd)&&s&&s.isAncestorOf&&s.isAncestorOf(this)&&!s.isAncestorOf(this.parent);(r&&!r.cancelBubble||!r)&&this.parent&&this.parent.isListening()&&!l&&(s&&s.parent?this._fireAndBubble.call(this.parent,e,r,s):this._fireAndBubble.call(this.parent,e,r))}}_getProtoListeners(e){var r,s,o;const l=(r=this._cache.get(la))!==null&&r!==void 0?r:{};let h=l==null?void 0:l[e];if(h===void 0){h=[];let d=Object.getPrototypeOf(this);for(;d;){const f=(o=(s=d.eventListeners)===null||s===void 0?void 0:s[e])!==null&&o!==void 0?o:[];h.push(...f),d=Object.getPrototypeOf(d)}l[e]=h,this._cache.set(la,l)}return h}_fire(e,r){r=r||{},r.currentTarget=this,r.type=e;const s=this._getProtoListeners(e);if(s)for(var o=0;o<s.length;o++)s[o].handler.call(this,r);const l=this.eventListeners[e];if(l)for(var o=0;o<l.length;o++)l[o].handler.call(this,r)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var r=e?e.pointerId:void 0,s=this.getStage(),o=this.getAbsolutePosition();if(s){var l=s._getPointerById(r)||s._changedPointerPositions[0]||o;Ft.DD._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-o.x,y:l.y-o.y},dragStatus:"ready",pointerId:r})}}startDrag(e,r=!0){Ft.DD._dragElements.has(this._id)||this._createDragElement(e);const s=Ft.DD._dragElements.get(this._id);s.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},r)}_setDragPosition(e,r){const s=this.getStage()._getPointerById(r.pointerId);if(s){var o={x:s.x-r.offset.x,y:s.y-r.offset.y},l=this.dragBoundFunc();if(l!==void 0){const h=l.call(this,o,e);h?o=h:Se.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}}stopDrag(e){const r=Ft.DD._dragElements.get(this._id);r&&(r.dragStatus="stopped"),Ft.DD._endDragBefore(e),Ft.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Ft.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var r=e.evt.button!==void 0,s=!r||jn.Konva.dragButtons.indexOf(e.evt.button)>=0;if(s&&!this.isDragging()){var o=!1;Ft.DD._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(o=!0)}),o||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const r=Ft.DD._dragElements.get(this._id),s=r&&r.dragStatus==="dragging",o=r&&r.dragStatus==="ready";s?this.stopDrag():o&&Ft.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const r=this.getStage();if(!r)return!1;const s={x:-e.x,y:-e.y,width:r.width()+2*e.x,height:r.height()+2*e.y};return Se.Util.haveIntersection(s,this.getClientRect())}static create(e,r){return Se.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,r)}static _createNode(e,r){var s=ce.prototype.getClassName.call(e),o=e.children,l,h,d;r&&(e.attrs.container=r),jn.Konva[s]||(Se.Util.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape");const f=jn.Konva[s];if(l=new f(e.attrs),o)for(h=o.length,d=0;d<h;d++)l.add(ce._createNode(o[d]));return l}}Zn.Node=ce;ce.prototype.nodeType="Node";ce.prototype._attrsAffectingSize=[];ce.prototype.eventListeners={};ce.prototype.on.call(ce.prototype,qm,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Hn),this._clearSelfAndDescendantCache(Pn)});ce.prototype.on.call(ce.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(eu)});ce.prototype.on.call(ce.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache($l)});ce.prototype.on.call(ce.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ga)});const be=is.Factory.addGetterSetter;be(ce,"zIndex");be(ce,"absolutePosition");be(ce,"position");be(ce,"x",0,(0,He.getNumberValidator)());be(ce,"y",0,(0,He.getNumberValidator)());be(ce,"globalCompositeOperation","source-over",(0,He.getStringValidator)());be(ce,"opacity",1,(0,He.getNumberValidator)());be(ce,"name","",(0,He.getStringValidator)());be(ce,"id","",(0,He.getStringValidator)());be(ce,"rotation",0,(0,He.getNumberValidator)());is.Factory.addComponentsGetterSetter(ce,"scale",["x","y"]);be(ce,"scaleX",1,(0,He.getNumberValidator)());be(ce,"scaleY",1,(0,He.getNumberValidator)());is.Factory.addComponentsGetterSetter(ce,"skew",["x","y"]);be(ce,"skewX",0,(0,He.getNumberValidator)());be(ce,"skewY",0,(0,He.getNumberValidator)());is.Factory.addComponentsGetterSetter(ce,"offset",["x","y"]);be(ce,"offsetX",0,(0,He.getNumberValidator)());be(ce,"offsetY",0,(0,He.getNumberValidator)());be(ce,"dragDistance",null,(0,He.getNumberValidator)());be(ce,"width",0,(0,He.getNumberValidator)());be(ce,"height",0,(0,He.getNumberValidator)());be(ce,"listening",!0,(0,He.getBooleanValidator)());be(ce,"preventDefault",!0,(0,He.getBooleanValidator)());be(ce,"filters",null,function(t){return this._filterUpToDate=!1,t});be(ce,"visible",!0,(0,He.getBooleanValidator)());be(ce,"transformsEnabled","all",(0,He.getStringValidator)());be(ce,"size");be(ce,"dragBoundFunc");be(ce,"draggable",!1,(0,He.getBooleanValidator)());is.Factory.backCompat(ce,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.Container=void 0;const $r=Pt,_l=Zn,ja=we;class wr extends _l.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const r=this.children||[];var s=[];return r.forEach(function(o){e(o)&&s.push(o)}),s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var r=0;r<e.length;r++)this.add(e[r]);return this}const s=e[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var r=this._generalFind(e,!0);return r.length>0?r[0]:void 0}_generalFind(e,r){var s=[];return this._descendants(o=>{const l=o._isMatch(e);return l&&s.push(o),!!(l&&r)}),s}_descendants(e){let r=!1;const s=this.getChildren();for(const o of s)if(r=e(o),r||o.hasChildren()&&(r=o._descendants(e),r))return!0;return!1}toObject(){var e=_l.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(r=>{e.children.push(r.toObject())}),e}isAncestorOf(e){for(var r=e.getParent();r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(e){var r=_l.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(s){r.add(s.clone())}),r}getAllIntersections(e){var r=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(e)&&r.push(s)}),r}_clearSelfAndDescendantCache(e){var r;super._clearSelfAndDescendantCache(e),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(s){s._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(r,s){r.index=s}),this._requestDraw()}drawScene(e,r,s){var o=this.getLayer(),l=e||o&&o.getCanvas(),h=l&&l.getContext(),d=this._getCanvasCache(),f=d&&d.scene,p=l&&l.isCache;if(!this.isVisible()&&!p)return this;if(f){h.save();var y=this.getAbsoluteTransform(r).getMatrix();h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",l,r,s);return this}drawHit(e,r){if(!this.shouldDrawHit(r))return this;var s=this.getLayer(),o=e||s&&s.hitCanvas,l=o&&o.getContext(),h=this._getCanvasCache(),d=h&&h.hit;if(d){l.save();var f=this.getAbsoluteTransform(r).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",o,r);return this}_drawChildren(e,r,s,o){var l,h=r&&r.getContext(),d=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),y=typeof d=="number"&&typeof f=="number"||p;const P=s===this;if(y){h.save();var E=this.getAbsoluteTransform(s),S=E.getMatrix();h.transform(S[0],S[1],S[2],S[3],S[4],S[5]),h.beginPath();let b;if(p)b=p.call(this,h,this);else{var v=this.clipX(),k=this.clipY();h.rect(v||0,k||0,d,f)}h.clip.apply(h,b),S=E.copy().invert().getMatrix(),h.transform(S[0],S[1],S[2],S[3],S[4],S[5])}var x=!P&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";x&&(h.save(),h._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(b){b[e](r,s,o)}),x&&h.restore(),y&&h.restore()}getClientRect(e={}){var r,s=e.skipTransform,o=e.relativeTo,l,h,d,f,p={x:1/0,y:1/0,width:0,height:0},y=this;(r=this.children)===null||r===void 0||r.forEach(function(k){if(k.visible()){var x=k.getClientRect({relativeTo:y,skipShadow:e.skipShadow,skipStroke:e.skipStroke});x.width===0&&x.height===0||(l===void 0?(l=x.x,h=x.y,d=x.x+x.width,f=x.y+x.height):(l=Math.min(l,x.x),h=Math.min(h,x.y),d=Math.max(d,x.x+x.width),f=Math.max(f,x.y+x.height)))}});for(var P=this.find("Shape"),E=!1,S=0;S<P.length;S++){var v=P[S];if(v._isVisible(this)){E=!0;break}}return E&&l!==void 0?p={x:l,y:h,width:d-l,height:f-h}:p={x:0,y:0,width:0,height:0},s?p:this._transformedRect(p,o)}}Sr.Container=wr;$r.Factory.addComponentsGetterSetter(wr,"clip",["x","y","width","height"]);$r.Factory.addGetterSetter(wr,"clipX",void 0,(0,ja.getNumberValidator)());$r.Factory.addGetterSetter(wr,"clipY",void 0,(0,ja.getNumberValidator)());$r.Factory.addGetterSetter(wr,"clipWidth",void 0,(0,ja.getNumberValidator)());$r.Factory.addGetterSetter(wr,"clipHeight",void 0,(0,ja.getNumberValidator)());$r.Factory.addGetterSetter(wr,"clipFunc");var qf={},At={};Object.defineProperty(At,"__esModule",{value:!0});At.releaseCapture=At.setPointerCapture=At.hasPointerCapture=At.createEvent=At.getCapturedShape=void 0;const Jm=Oe,qi=new Map,Qf=Jm.Konva._global.PointerEvent!==void 0;function Zm(t){return qi.get(t)}At.getCapturedShape=Zm;function xu(t){return{evt:t,pointerId:t.pointerId}}At.createEvent=xu;function $m(t,e){return qi.get(t)===e}At.hasPointerCapture=$m;function ev(t,e){Jf(t),e.getStage()&&(qi.set(t,e),Qf&&e._fire("gotpointercapture",xu(new PointerEvent("gotpointercapture"))))}At.setPointerCapture=ev;function Jf(t,e){const r=qi.get(t);if(!r)return;const s=r.getStage();s&&s.content,qi.delete(t),Qf&&r._fire("lostpointercapture",xu(new PointerEvent("lostpointercapture")))}At.releaseCapture=Jf;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=rt,r=Pt,s=Sr,o=Oe,l=Jt,h=Va,d=Oe,f=At;var p="Stage",y="string",P="px",E="mouseout",S="mouseleave",v="mouseover",k="mouseenter",x="mousemove",b="mousedown",M="mouseup",m="pointermove",C="pointerdown",A="pointerup",F="pointercancel",W="lostpointercapture",w="pointerout",D="pointerleave",T="pointerover",O="pointerenter",V="contextmenu",j="touchstart",N="touchend",G="touchmove",re="touchcancel",J="wheel",$=5,le=[[k,"_pointerenter"],[b,"_pointerdown"],[x,"_pointermove"],[M,"_pointerup"],[S,"_pointerleave"],[j,"_pointerdown"],[G,"_pointermove"],[N,"_pointerup"],[re,"_pointercancel"],[v,"_pointerover"],[J,"_wheel"],[V,"_contextmenu"],[C,"_pointerdown"],[m,"_pointermove"],[A,"_pointerup"],[F,"_pointercancel"],[W,"_lostpointercapture"]];const ue={mouse:{[w]:E,[D]:S,[T]:v,[O]:k,[m]:x,[C]:b,[A]:M,[F]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[D]:"touchleave",[T]:"touchover",[O]:"touchenter",[m]:G,[C]:j,[A]:N,[F]:re,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[D]:D,[T]:T,[O]:O,[m]:m,[C]:C,[A]:A,[F]:F,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Te=se=>se.indexOf("pointer")>=0?"pointer":se.indexOf("touch")>=0?"touch":"mouse",ke=se=>{const R=Te(se);if(R==="pointer")return o.Konva.pointerEventsEnabled&&ue.pointer;if(R==="touch")return ue.touch;if(R==="mouse")return ue.mouse};function Ve(se={}){return(se.clipFunc||se.clipWidth||se.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),se}const Ae="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class X extends s.Container{constructor(R){super(Ve(R)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ve(this.attrs)}),this._checkVisibility()}_validateAdd(R){const H=R.getType()==="Layer",Z=R.getType()==="FastLayer";H||Z||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const R=this.visible()?"":"none";this.content.style.display=R}setContainer(R){if(typeof R===y){if(R.charAt(0)==="."){var H=R.slice(1);R=document.getElementsByClassName(H)[0]}else{var Z;R.charAt(0)!=="#"?Z=R:Z=R.slice(1),R=document.getElementById(Z)}if(!R)throw"Can not find container in document with id "+Z}return this._setAttr("container",R),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),R.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var R=this.children,H=R.length,Z;for(Z=0;Z<H;Z++)R[Z].clear();return this}clone(R){return R||(R={}),R.container=typeof document<"u"&&document.createElement("div"),s.Container.prototype.clone.call(this,R)}destroy(){super.destroy();var R=this.content;R&&e.Util._isInDocument(R)&&this.container().removeChild(R);var H=t.stages.indexOf(this);return H>-1&&t.stages.splice(H,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const R=this._pointerPositions[0]||this._changedPointerPositions[0];return R?{x:R.x,y:R.y}:(e.Util.warn(Ae),null)}_getPointerById(R){return this._pointerPositions.find(H=>H.id===R)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(R){R=R||{},R.x=R.x||0,R.y=R.y||0,R.width=R.width||this.width(),R.height=R.height||this.height();var H=new l.SceneCanvas({width:R.width,height:R.height,pixelRatio:R.pixelRatio||1}),Z=H.getContext()._context,ae=this.children;return(R.x||R.y)&&Z.translate(-1*R.x,-1*R.y),ae.forEach(function(ye){if(ye.isVisible()){var pe=ye._toKonvaCanvas(R);Z.drawImage(pe._canvas,R.x,R.y,pe.getWidth()/pe.getPixelRatio(),pe.getHeight()/pe.getPixelRatio())}}),H}getIntersection(R){if(!R)return null;var H=this.children,Z=H.length,ae=Z-1,ye;for(ye=ae;ye>=0;ye--){const pe=H[ye].getIntersection(R);if(pe)return pe}return null}_resizeDOM(){var R=this.width(),H=this.height();this.content&&(this.content.style.width=R+P,this.content.style.height=H+P),this.bufferCanvas.setSize(R,H),this.bufferHitCanvas.setSize(R,H),this.children.forEach(Z=>{Z.setSize({width:R,height:H}),Z.draw()})}add(R,...H){if(arguments.length>1){for(var Z=0;Z<arguments.length;Z++)this.add(arguments[Z]);return this}super.add(R);var ae=this.children.length;return ae>$&&e.Util.warn("The stage has "+ae+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),R.setSize({width:this.width(),height:this.height()}),R.draw(),o.Konva.isBrowser&&this.content.appendChild(R.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(R){return f.hasPointerCapture(R,this)}setPointerCapture(R){f.setPointerCapture(R,this)}releaseCapture(R){f.releaseCapture(R,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&le.forEach(([R,H])=>{this.content.addEventListener(R,Z=>{this[H](Z)},{passive:!1})})}_pointerenter(R){this.setPointersPositions(R);const H=ke(R.type);H&&this._fire(H.pointerenter,{evt:R,target:this,currentTarget:this})}_pointerover(R){this.setPointersPositions(R);const H=ke(R.type);H&&this._fire(H.pointerover,{evt:R,target:this,currentTarget:this})}_getTargetShape(R){let H=this[R+"targetShape"];return H&&!H.getStage()&&(H=null),H}_pointerleave(R){const H=ke(R.type),Z=Te(R.type);if(H){this.setPointersPositions(R);var ae=this._getTargetShape(Z),ye=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;ae&&ye?(ae._fireAndBubble(H.pointerout,{evt:R}),ae._fireAndBubble(H.pointerleave,{evt:R}),this._fire(H.pointerleave,{evt:R,target:this,currentTarget:this}),this[Z+"targetShape"]=null):ye&&(this._fire(H.pointerleave,{evt:R,target:this,currentTarget:this}),this._fire(H.pointerout,{evt:R,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(R){const H=ke(R.type),Z=Te(R.type);if(H){this.setPointersPositions(R);var ae=!1;this._changedPointerPositions.forEach(ye=>{var pe=this.getIntersection(ye);if(h.DD.justDragged=!1,o.Konva["_"+Z+"ListenClick"]=!0,!pe||!pe.isListening())return;o.Konva.capturePointerEventsEnabled&&pe.setPointerCapture(ye.id),this[Z+"ClickStartShape"]=pe,pe._fireAndBubble(H.pointerdown,{evt:R,pointerId:ye.id}),ae=!0;const Ke=R.type.indexOf("touch")>=0;pe.preventDefault()&&R.cancelable&&Ke&&R.preventDefault()}),ae||this._fire(H.pointerdown,{evt:R,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(R){const H=ke(R.type),Z=Te(R.type);if(!H)return;o.Konva.isDragging()&&h.DD.node.preventDefault()&&R.cancelable&&R.preventDefault(),this.setPointersPositions(R);var ae=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;if(!ae)return;var ye={};let pe=!1;var Ke=this._getTargetShape(Z);this._changedPointerPositions.forEach(pt=>{const xe=f.getCapturedShape(pt.id)||this.getIntersection(pt),en=pt.id,kt={evt:R,pointerId:en};var tn=Ke!==xe;if(tn&&Ke&&(Ke._fireAndBubble(H.pointerout,{...kt},xe),Ke._fireAndBubble(H.pointerleave,{...kt},xe)),xe){if(ye[xe._id])return;ye[xe._id]=!0}xe&&xe.isListening()?(pe=!0,tn&&(xe._fireAndBubble(H.pointerover,{...kt},Ke),xe._fireAndBubble(H.pointerenter,{...kt},Ke),this[Z+"targetShape"]=xe),xe._fireAndBubble(H.pointermove,{...kt})):Ke&&(this._fire(H.pointerover,{evt:R,target:this,currentTarget:this,pointerId:en}),this[Z+"targetShape"]=null)}),pe||this._fire(H.pointermove,{evt:R,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(R){const H=ke(R.type),Z=Te(R.type);if(!H)return;this.setPointersPositions(R);const ae=this[Z+"ClickStartShape"],ye=this[Z+"ClickEndShape"];var pe={};let Ke=!1;this._changedPointerPositions.forEach(pt=>{const xe=f.getCapturedShape(pt.id)||this.getIntersection(pt);if(xe){if(xe.releaseCapture(pt.id),pe[xe._id])return;pe[xe._id]=!0}const en=pt.id,kt={evt:R,pointerId:en};let tn=!1;o.Konva["_"+Z+"InDblClickWindow"]?(tn=!0,clearTimeout(this[Z+"DblTimeout"])):h.DD.justDragged||(o.Konva["_"+Z+"InDblClickWindow"]=!0,clearTimeout(this[Z+"DblTimeout"])),this[Z+"DblTimeout"]=setTimeout(function(){o.Konva["_"+Z+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),xe&&xe.isListening()?(Ke=!0,this[Z+"ClickEndShape"]=xe,xe._fireAndBubble(H.pointerup,{...kt}),o.Konva["_"+Z+"ListenClick"]&&ae&&ae===xe&&(xe._fireAndBubble(H.pointerclick,{...kt}),tn&&ye&&ye===xe&&xe._fireAndBubble(H.pointerdblclick,{...kt}))):(this[Z+"ClickEndShape"]=null,o.Konva["_"+Z+"ListenClick"]&&this._fire(H.pointerclick,{evt:R,target:this,currentTarget:this,pointerId:en}),tn&&this._fire(H.pointerdblclick,{evt:R,target:this,currentTarget:this,pointerId:en}))}),Ke||this._fire(H.pointerup,{evt:R,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+Z+"ListenClick"]=!1,R.cancelable&&Z!=="touch"&&R.preventDefault()}_contextmenu(R){this.setPointersPositions(R);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(V,{evt:R}):this._fire(V,{evt:R,target:this,currentTarget:this})}_wheel(R){this.setPointersPositions(R);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(J,{evt:R}):this._fire(J,{evt:R,target:this,currentTarget:this})}_pointercancel(R){this.setPointersPositions(R);const H=f.getCapturedShape(R.pointerId)||this.getIntersection(this.getPointerPosition());H&&H._fireAndBubble(A,f.createEvent(R)),f.releaseCapture(R.pointerId)}_lostpointercapture(R){f.releaseCapture(R.pointerId)}setPointersPositions(R){var H=this._getContentPosition(),Z=null,ae=null;R=R||window.event,R.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(R.touches,ye=>{this._pointerPositions.push({id:ye.identifier,x:(ye.clientX-H.left)/H.scaleX,y:(ye.clientY-H.top)/H.scaleY})}),Array.prototype.forEach.call(R.changedTouches||R.touches,ye=>{this._changedPointerPositions.push({id:ye.identifier,x:(ye.clientX-H.left)/H.scaleX,y:(ye.clientY-H.top)/H.scaleY})})):(Z=(R.clientX-H.left)/H.scaleX,ae=(R.clientY-H.top)/H.scaleY,this.pointerPos={x:Z,y:ae},this._pointerPositions=[{x:Z,y:ae,id:e.Util._getFirstPointerId(R)}],this._changedPointerPositions=[{x:Z,y:ae,id:e.Util._getFirstPointerId(R)}])}_setPointerPosition(R){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(R)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var R=this.content.getBoundingClientRect();return{top:R.top,left:R.left,scaleX:R.width/this.content.clientWidth||1,scaleY:R.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!o.Konva.isBrowser){var R=this.container();if(!R)throw"Stage has no container. A container is required.";R.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),R.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(R){R.batchDraw()}),this}}t.Stage=X,X.prototype.nodeType=p,(0,d._registerNode)(X),r.Factory.addGetterSetter(X,"container")})(qf);var ss={},pn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=Oe,r=rt,s=Pt,o=Zn,l=we,h=Oe,d=At;var f="hasShadow",p="shadowRGBA",y="patternImage",P="linearGradient",E="radialGradient";let S;function v(){return S||(S=r.Util.createCanvasElement().getContext("2d"),S)}t.shapes={};function k(D){const T=this.attrs.fillRule;T?D.fill(T):D.fill()}function x(D){D.stroke()}function b(D){D.fill()}function M(D){D.stroke()}function m(){this._clearCache(f)}function C(){this._clearCache(p)}function A(){this._clearCache(y)}function F(){this._clearCache(P)}function W(){this._clearCache(E)}class w extends o.Node{constructor(T){super(T);let O;for(;O=r.Util.getRandomColor(),!(O&&!(O in t.shapes)););this.colorKey=O,t.shapes[O]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(y,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var T=v();const O=T.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(O&&O.setTransform){const V=new r.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(e.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const j=V.getMatrix(),N=typeof DOMMatrix>"u"?{a:j[0],b:j[1],c:j[2],d:j[3],e:j[4],f:j[5]}:new DOMMatrix(j);O.setTransform(N)}return O}}_getLinearGradient(){return this._getCache(P,this.__getLinearGradient)}__getLinearGradient(){var T=this.fillLinearGradientColorStops();if(T){for(var O=v(),V=this.fillLinearGradientStartPoint(),j=this.fillLinearGradientEndPoint(),N=O.createLinearGradient(V.x,V.y,j.x,j.y),G=0;G<T.length;G+=2)N.addColorStop(T[G],T[G+1]);return N}}_getRadialGradient(){return this._getCache(E,this.__getRadialGradient)}__getRadialGradient(){var T=this.fillRadialGradientColorStops();if(T){for(var O=v(),V=this.fillRadialGradientStartPoint(),j=this.fillRadialGradientEndPoint(),N=O.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),j.x,j.y,this.fillRadialGradientEndRadius()),G=0;G<T.length;G+=2)N.addColorStop(T[G],T[G+1]);return N}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var T=r.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){var O=this.getStage();if(!O)return!1;const V=O.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var O;if(!(!((O=this.attrs.perfectDrawEnabled)!==null&&O!==void 0)||O))return!1;const V=T||this.hasFill(),j=this.hasStroke(),N=this.getAbsoluteOpacity()!==1;if(V&&j&&N)return!0;const G=this.hasShadow(),re=this.shadowForStrokeEnabled();return!!(V&&j&&G&&re)}setStrokeHitEnabled(T){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){const O=T.skipTransform,V=T.relativeTo,j=this.getSelfRect(),N=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,G=j.width+N,re=j.height+N,J=!T.skipShadow&&this.hasShadow(),$=J?this.shadowOffsetX():0,le=J?this.shadowOffsetY():0,ue=G+Math.abs($),Te=re+Math.abs(le),ke=J&&this.shadowBlur()||0,Ve=ue+ke*2,Ae=Te+ke*2,X={width:Ve,height:Ae,x:-(N/2+ke)+Math.min($,0)+j.x,y:-(N/2+ke)+Math.min(le,0)+j.y};return O?X:this._transformedRect(X,V)}drawScene(T,O,V){var j=this.getLayer(),N=T||j.getCanvas(),G=N.getContext(),re=this._getCanvasCache(),J=this.getSceneFunc(),$=this.hasShadow(),le,ue,Te=N.isCache,ke=O===this;if(!this.isVisible()&&!ke)return this;if(re){G.save();var Ve=this.getAbsoluteTransform(O).getMatrix();return G.transform(Ve[0],Ve[1],Ve[2],Ve[3],Ve[4],Ve[5]),this._drawCachedSceneCanvas(G),G.restore(),this}if(!J)return this;if(G.save(),this._useBufferCanvas()&&!Te){le=this.getStage();const se=V||le.bufferCanvas;ue=se.getContext(),ue.clear(),ue.save(),ue._applyLineJoin(this);var Ae=this.getAbsoluteTransform(O).getMatrix();ue.transform(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]),J.call(this,ue,this),ue.restore();var X=se.pixelRatio;$&&G._applyShadow(this),G._applyOpacity(this),G._applyGlobalCompositeOperation(this),G.drawImage(se._canvas,0,0,se.width/X,se.height/X)}else{if(G._applyLineJoin(this),!ke){var Ae=this.getAbsoluteTransform(O).getMatrix();G.transform(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]),G._applyOpacity(this),G._applyGlobalCompositeOperation(this)}$&&G._applyShadow(this),J.call(this,G,this)}return G.restore(),this}drawHit(T,O,V=!1){if(!this.shouldDrawHit(O,V))return this;var j=this.getLayer(),N=T||j.hitCanvas,G=N&&N.getContext(),re=this.hitFunc()||this.sceneFunc(),J=this._getCanvasCache(),$=J&&J.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),$){G.save();var le=this.getAbsoluteTransform(O).getMatrix();return G.transform(le[0],le[1],le[2],le[3],le[4],le[5]),this._drawCachedHitCanvas(G),G.restore(),this}if(!re)return this;if(G.save(),G._applyLineJoin(this),this!==O){var ue=this.getAbsoluteTransform(O).getMatrix();G.transform(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5])}return re.call(this,G,this),G.restore(),this}drawHitFromCache(T=0){var O=this._getCanvasCache(),V=this._getCachedSceneCanvas(),j=O.hit,N=j.getContext(),G=j.getWidth(),re=j.getHeight(),J,$,le,ue,Te,ke;N.clear(),N.drawImage(V._canvas,0,0,G,re);try{for(J=N.getImageData(0,0,G,re),$=J.data,le=$.length,ue=r.Util._hexToRgb(this.colorKey),Te=0;Te<le;Te+=4)ke=$[Te+3],ke>T?($[Te]=ue.r,$[Te+1]=ue.g,$[Te+2]=ue.b,$[Te+3]=255):$[Te+3]=0;N.putImageData(J,0,0)}catch(Ve){r.Util.error("Unable to draw hit graph from cached scene canvas. "+Ve.message)}return this}hasPointerCapture(T){return d.hasPointerCapture(T,this)}setPointerCapture(T){d.setPointerCapture(T,this)}releaseCapture(T){d.releaseCapture(T,this)}}t.Shape=w,w.prototype._fillFunc=k,w.prototype._strokeFunc=x,w.prototype._fillFuncHit=b,w.prototype._strokeFuncHit=M,w.prototype._centroid=!1,w.prototype.nodeType="Shape",(0,h._registerNode)(w),w.prototype.eventListeners={},w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",A),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",F),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",W),s.Factory.addGetterSetter(w,"stroke",void 0,(0,l.getStringOrGradientValidator)()),s.Factory.addGetterSetter(w,"strokeWidth",2,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(w,"hitStrokeWidth","auto",(0,l.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(w,"strokeHitEnabled",!0,(0,l.getBooleanValidator)()),s.Factory.addGetterSetter(w,"perfectDrawEnabled",!0,(0,l.getBooleanValidator)()),s.Factory.addGetterSetter(w,"shadowForStrokeEnabled",!0,(0,l.getBooleanValidator)()),s.Factory.addGetterSetter(w,"lineJoin"),s.Factory.addGetterSetter(w,"lineCap"),s.Factory.addGetterSetter(w,"sceneFunc"),s.Factory.addGetterSetter(w,"hitFunc"),s.Factory.addGetterSetter(w,"dash"),s.Factory.addGetterSetter(w,"dashOffset",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"shadowColor",void 0,(0,l.getStringValidator)()),s.Factory.addGetterSetter(w,"shadowBlur",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"shadowOpacity",1,(0,l.getNumberValidator)()),s.Factory.addComponentsGetterSetter(w,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(w,"shadowOffsetX",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"shadowOffsetY",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"fillPatternImage"),s.Factory.addGetterSetter(w,"fill",void 0,(0,l.getStringOrGradientValidator)()),s.Factory.addGetterSetter(w,"fillPatternX",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"fillPatternY",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(w,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(w,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(w,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(w,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(w,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(w,"fillEnabled",!0),s.Factory.addGetterSetter(w,"strokeEnabled",!0),s.Factory.addGetterSetter(w,"shadowEnabled",!0),s.Factory.addGetterSetter(w,"dashEnabled",!0),s.Factory.addGetterSetter(w,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(w,"fillPriority","color"),s.Factory.addComponentsGetterSetter(w,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(w,"fillPatternOffsetX",0,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"fillPatternOffsetY",0,(0,l.getNumberValidator)()),s.Factory.addComponentsGetterSetter(w,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(w,"fillPatternScaleX",1,(0,l.getNumberValidator)()),s.Factory.addGetterSetter(w,"fillPatternScaleY",1,(0,l.getNumberValidator)()),s.Factory.addComponentsGetterSetter(w,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(w,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(w,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(w,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(w,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(w,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(w,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(w,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(w,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(w,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(w,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(w,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(w,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(w,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(w,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(w,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(w,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(w,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(w,"fillPatternRotation",0),s.Factory.addGetterSetter(w,"fillRule",void 0,(0,l.getStringValidator)()),s.Factory.backCompat(w,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(pn);Object.defineProperty(ss,"__esModule",{value:!0});ss.Layer=void 0;const En=rt,Sl=Sr,Br=Zn,Tu=Pt,wd=Jt,tv=we,nv=pn,rv=Oe;var iv="#",sv="beforeDraw",av="draw",Zf=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ov=Zf.length;let ei=class extends Sl.Container{constructor(t){super(t),this.canvas=new wd.SceneCanvas,this.hitCanvas=new wd.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Br.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Br.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Br.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Br.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Br.Node.prototype.remove.call(this),t&&t.parentNode&&En.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&En.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Br.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){En.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){En.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,En.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,r=!1;;){for(let s=0;s<ov;s++){const o=Zf[s],l=this._getIntersection({x:t.x+o.x*e,y:t.y+o.y*e}),h=l.shape;if(h)return h;if(r=!!l.antialiased,!l.antialiased)break}if(r)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,s=r[3];if(s===255){const o=En.Util._rgbToHex(r[0],r[1],r[2]),l=nv.shapes[iv+o];return l?{shape:l}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,e){var r=this.getLayer(),s=t||r&&r.getCanvas();return this._fire(sv,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),Sl.Container.prototype.drawScene.call(this,s,e),this._fire(av,{node:this}),this}drawHit(t,e){var r=this.getLayer(),s=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Sl.Container.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){En.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return En.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return En.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};ss.Layer=ei;ei.prototype.nodeType="Layer";(0,rv._registerNode)(ei);Tu.Factory.addGetterSetter(ei,"imageSmoothingEnabled",!0);Tu.Factory.addGetterSetter(ei,"clearBeforeDraw",!0);Tu.Factory.addGetterSetter(ei,"hitGraphEnabled",!0,(0,tv.getBooleanValidator)());var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.FastLayer=void 0;const lv=rt,uv=ss,cv=Oe;class Au extends uv.Layer{constructor(e){super(e),this.listening(!1),lv.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Ha.FastLayer=Au;Au.prototype.nodeType="FastLayer";(0,cv._registerNode)(Au);var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.Group=void 0;const hv=rt,dv=Sr,fv=Oe;let Ru=class extends dv.Container{_validateAdd(t){var e=t.getType();e!=="Group"&&e!=="Shape"&&hv.Util.throw("You may only add groups and shapes to groups.")}};Wa.Group=Ru;Ru.prototype.nodeType="Group";(0,fv._registerNode)(Ru);var as={};Object.defineProperty(as,"__esModule",{value:!0});as.Animation=void 0;const wl=Oe,Cd=rt,Cl=function(){return wl.glob.performance&&wl.glob.performance.now?function(){return wl.glob.performance.now()}:function(){return new Date().getTime()}}();class gn{constructor(e,r){this.id=gn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Cl(),frameRate:0},this.func=e,this.setLayers(r)}setLayers(e){let r=[];return e&&(r=Array.isArray(e)?e:[e]),this.layers=r,this}getLayers(){return this.layers}addLayer(e){const r=this.layers,s=r.length;for(let o=0;o<s;o++)if(r[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=gn.animations,r=e.length;for(let s=0;s<r;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Cl(),gn._addAnimation(this),this}stop(){return gn._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const r=e.id,s=this.animations,o=s.length;for(let l=0;l<o;l++)if(s[l].id===r){this.animations.splice(l,1);break}}static _runFrames(){const e={},r=this.animations;for(let s=0;s<r.length;s++){const o=r[s],l=o.layers,h=o.func;o._updateFrameObject(Cl());const d=l.length;let f;if(h?f=h.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<d;p++){const y=l[p];y._id!==void 0&&(e[y._id]=y)}}for(let s in e)e.hasOwnProperty(s)&&e[s].batchDraw()}static _animationLoop(){const e=gn;e.animations.length?(e._runFrames(),Cd.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Cd.Util.requestAnimFrame(this._animationLoop))}}as.Animation=gn;gn.animations=[];gn.animIdCounter=0;gn.animRunning=!1;var $f={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=rt,r=as,s=Zn,o=Oe;var l={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=1,d=2,f=3,p=0,y=["fill","stroke","shadowColor"];class P{constructor(v,k,x,b,M,m,C){this.prop=v,this.propFunc=k,this.begin=b,this._pos=b,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=C,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=M-this.begin,this.pause()}fire(v){var k=this[v];k&&k()}setTime(v){v>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():v<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=v,this.update())}getTime(){return this._time}setPosition(v){this.prevPos=this._pos,this.propFunc(v),this._pos=v}getPosition(v){return v===void 0&&(v=this._time),this.func(v,this.begin,this._change,this.duration)}play(){this.state=d,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(v){this.pause(),this._time=v,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var v=this.getTimer()-this._startTime;this.state===d?this.setTime(v):this.state===f&&this.setTime(this.duration-v)}pause(){this.state=h,this.fire("onPause")}getTimer(){return new Date().getTime()}}class E{constructor(v){var k=this,x=v.node,b=x._id,M,m=v.easing||t.Easings.Linear,C=!!v.yoyo,A;typeof v.duration>"u"?M=.3:v.duration===0?M=.001:M=v.duration,this.node=x,this._id=p++;var F=x.getLayer()||(x instanceof o.Konva.Stage?x.getLayers():null);F||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){k.tween.onEnterFrame()},F),this.tween=new P(A,function(W){k._tweenFunc(W)},m,0,1,M*1e3,C),this._addListeners(),E.attrs[b]||(E.attrs[b]={}),E.attrs[b][this._id]||(E.attrs[b][this._id]={}),E.tweens[b]||(E.tweens[b]={});for(A in v)l[A]===void 0&&this._addAttr(A,v[A]);this.reset(),this.onFinish=v.onFinish,this.onReset=v.onReset,this.onUpdate=v.onUpdate}_addAttr(v,k){var x=this.node,b=x._id,M,m,C,A,F,W,w,D;if(C=E.tweens[b][v],C&&delete E.attrs[b][C][v],M=x.getAttr(v),e.Util._isArray(k))if(m=[],F=Math.max(k.length,M.length),v==="points"&&k.length!==M.length&&(k.length>M.length?(w=M,M=e.Util._prepareArrayForTween(M,k,x.closed())):(W=k,k=e.Util._prepareArrayForTween(k,M,x.closed()))),v.indexOf("fill")===0)for(A=0;A<F;A++)if(A%2===0)m.push(k[A]-M[A]);else{var T=e.Util.colorToRGBA(M[A]);D=e.Util.colorToRGBA(k[A]),M[A]=T,m.push({r:D.r-T.r,g:D.g-T.g,b:D.b-T.b,a:D.a-T.a})}else for(A=0;A<F;A++)m.push(k[A]-M[A]);else y.indexOf(v)!==-1?(M=e.Util.colorToRGBA(M),D=e.Util.colorToRGBA(k),m={r:D.r-M.r,g:D.g-M.g,b:D.b-M.b,a:D.a-M.a}):m=k-M;E.attrs[b][this._id][v]={start:M,diff:m,end:k,trueEnd:W,trueStart:w},E.tweens[b][v]=this._id}_tweenFunc(v){var k=this.node,x=E.attrs[k._id][this._id],b,M,m,C,A,F,W,w;for(b in x){if(M=x[b],m=M.start,C=M.diff,w=M.end,e.Util._isArray(m))if(A=[],W=Math.max(m.length,w.length),b.indexOf("fill")===0)for(F=0;F<W;F++)F%2===0?A.push((m[F]||0)+C[F]*v):A.push("rgba("+Math.round(m[F].r+C[F].r*v)+","+Math.round(m[F].g+C[F].g*v)+","+Math.round(m[F].b+C[F].b*v)+","+(m[F].a+C[F].a*v)+")");else for(F=0;F<W;F++)A.push((m[F]||0)+C[F]*v);else y.indexOf(b)!==-1?A="rgba("+Math.round(m.r+C.r*v)+","+Math.round(m.g+C.g*v)+","+Math.round(m.b+C.b*v)+","+(m.a+C.a*v)+")":A=m+C*v;k.setAttr(b,A)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var v=this.node,k=E.attrs[v._id][this._id];k.points&&k.points.trueEnd&&v.setAttr("points",k.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var v=this.node,k=E.attrs[v._id][this._id];k.points&&k.points.trueStart&&v.points(k.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(v){return this.tween.seek(v*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var v=this.node._id,k=this._id,x=E.tweens[v],b;this.pause();for(b in x)delete E.tweens[v][b];delete E.attrs[v][k]}}t.Tween=E,E.attrs={},E.tweens={},s.Node.prototype.to=function(S){var v=S.onFinish;S.node=this,S.onFinish=function(){this.destroy(),v&&v()};var k=new E(S);k.play()},t.Easings={BackEaseIn(S,v,k,x){var b=1.70158;return k*(S/=x)*S*((b+1)*S-b)+v},BackEaseOut(S,v,k,x){var b=1.70158;return k*((S=S/x-1)*S*((b+1)*S+b)+1)+v},BackEaseInOut(S,v,k,x){var b=1.70158;return(S/=x/2)<1?k/2*(S*S*(((b*=1.525)+1)*S-b))+v:k/2*((S-=2)*S*(((b*=1.525)+1)*S+b)+2)+v},ElasticEaseIn(S,v,k,x,b,M){var m=0;return S===0?v:(S/=x)===1?v+k:(M||(M=x*.3),!b||b<Math.abs(k)?(b=k,m=M/4):m=M/(2*Math.PI)*Math.asin(k/b),-(b*Math.pow(2,10*(S-=1))*Math.sin((S*x-m)*(2*Math.PI)/M))+v)},ElasticEaseOut(S,v,k,x,b,M){var m=0;return S===0?v:(S/=x)===1?v+k:(M||(M=x*.3),!b||b<Math.abs(k)?(b=k,m=M/4):m=M/(2*Math.PI)*Math.asin(k/b),b*Math.pow(2,-10*S)*Math.sin((S*x-m)*(2*Math.PI)/M)+k+v)},ElasticEaseInOut(S,v,k,x,b,M){var m=0;return S===0?v:(S/=x/2)===2?v+k:(M||(M=x*(.3*1.5)),!b||b<Math.abs(k)?(b=k,m=M/4):m=M/(2*Math.PI)*Math.asin(k/b),S<1?-.5*(b*Math.pow(2,10*(S-=1))*Math.sin((S*x-m)*(2*Math.PI)/M))+v:b*Math.pow(2,-10*(S-=1))*Math.sin((S*x-m)*(2*Math.PI)/M)*.5+k+v)},BounceEaseOut(S,v,k,x){return(S/=x)<1/2.75?k*(7.5625*S*S)+v:S<2/2.75?k*(7.5625*(S-=1.5/2.75)*S+.75)+v:S<2.5/2.75?k*(7.5625*(S-=2.25/2.75)*S+.9375)+v:k*(7.5625*(S-=2.625/2.75)*S+.984375)+v},BounceEaseIn(S,v,k,x){return k-t.Easings.BounceEaseOut(x-S,0,k,x)+v},BounceEaseInOut(S,v,k,x){return S<x/2?t.Easings.BounceEaseIn(S*2,0,k,x)*.5+v:t.Easings.BounceEaseOut(S*2-x,0,k,x)*.5+k*.5+v},EaseIn(S,v,k,x){return k*(S/=x)*S+v},EaseOut(S,v,k,x){return-k*(S/=x)*(S-2)+v},EaseInOut(S,v,k,x){return(S/=x/2)<1?k/2*S*S+v:-k/2*(--S*(S-2)-1)+v},StrongEaseIn(S,v,k,x){return k*(S/=x)*S*S*S*S+v},StrongEaseOut(S,v,k,x){return k*((S=S/x-1)*S*S*S*S+1)+v},StrongEaseInOut(S,v,k,x){return(S/=x/2)<1?k/2*S*S*S*S*S+v:k/2*((S-=2)*S*S*S*S+2)+v},Linear(S,v,k,x){return k*S/x+v}}})($f);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=Oe,r=rt,s=Zn,o=Sr,l=qf,h=ss,d=Ha,f=Wa,p=Va,y=pn,P=as,E=$f,S=xn,v=Jt;t.Konva=r.Util._assign(e.Konva,{Util:r.Util,Transform:r.Transform,Node:s.Node,Container:o.Container,Stage:l.Stage,stages:l.stages,Layer:h.Layer,FastLayer:d.FastLayer,Group:f.Group,DD:p.DD,Shape:y.Shape,shapes:y.shapes,Animation:P.Animation,Tween:E.Tween,Easings:E.Easings,Context:S.Context,Canvas:v.Canvas}),t.default=t.Konva})(Zl);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var r=Zl;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return r.Konva}});const s=Zl;t.exports=s.Konva})(Jl,Jl.exports);var gv=Jl.exports;const qn=af(gv);var e0={exports:{}},pv=function(t){var e={},r=Y,s=da,o=Object.assign;function l(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),C=Symbol.iterator;function A(n){return n===null||typeof n!="object"?null:(n=C&&n[C]||n["@@iterator"],typeof n=="function"?n:null)}function F(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case p:return"Fragment";case f:return"Portal";case P:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case x:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case S:return(n.displayName||"Context")+".Consumer";case E:return(n._context.displayName||"Context")+".Provider";case v:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case b:return i=n.displayName||null,i!==null?i:F(n.type)||"Memo";case M:i=n._payload,n=n._init;try{return F(n(i))}catch{}}return null}function W(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(i);case 8:return i===y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function w(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function D(n){if(w(n)!==n)throw Error(l(188))}function T(n){var i=n.alternate;if(!i){if(i=w(n),i===null)throw Error(l(188));return i!==n?null:n}for(var a=n,u=i;;){var c=a.return;if(c===null)break;var g=c.alternate;if(g===null){if(u=c.return,u!==null){a=u;continue}break}if(c.child===g.child){for(g=c.child;g;){if(g===a)return D(c),n;if(g===u)return D(c),i;g=g.sibling}throw Error(l(188))}if(a.return!==u.return)a=c,u=g;else{for(var _=!1,I=c.child;I;){if(I===a){_=!0,a=c,u=g;break}if(I===u){_=!0,u=c,a=g;break}I=I.sibling}if(!_){for(I=g.child;I;){if(I===a){_=!0,a=g,u=c;break}if(I===u){_=!0,u=g,a=c;break}I=I.sibling}if(!_)throw Error(l(189))}}if(a.alternate!==u)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?n:i}function O(n){return n=T(n),n!==null?V(n):null}function V(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=V(n);if(i!==null)return i;n=n.sibling}return null}function j(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){if(n.tag!==4){var i=j(n);if(i!==null)return i}n=n.sibling}return null}var N=Array.isArray,G=t.getPublicInstance,re=t.getRootHostContext,J=t.getChildHostContext,$=t.prepareForCommit,le=t.resetAfterCommit,ue=t.createInstance,Te=t.appendInitialChild,ke=t.finalizeInitialChildren,Ve=t.prepareUpdate,Ae=t.shouldSetTextContent,X=t.createTextInstance,se=t.scheduleTimeout,R=t.cancelTimeout,H=t.noTimeout,Z=t.isPrimaryRenderer,ae=t.supportsMutation,ye=t.supportsPersistence,pe=t.supportsHydration,Ke=t.getInstanceFromNode,pt=t.preparePortalMount,xe=t.getCurrentEventPriority,en=t.detachDeletedInstance,kt=t.supportsMicrotasks,tn=t.scheduleMicrotask,ii=t.supportsTestSelectors,q0=t.findFiberRoot,Q0=t.getBoundingRect,J0=t.getTextContent,si=t.isHiddenSubtree,Z0=t.matchAccessibilityRole,$0=t.setFocusIfFocusable,e1=t.setupIntersectionObserver,t1=t.appendChild,n1=t.appendChildToContainer,r1=t.commitTextUpdate,i1=t.commitMount,s1=t.commitUpdate,a1=t.insertBefore,o1=t.insertInContainerBefore,l1=t.removeChild,u1=t.removeChildFromContainer,Yu=t.resetTextContent,c1=t.hideInstance,h1=t.hideTextInstance,d1=t.unhideInstance,f1=t.unhideTextInstance,g1=t.clearContainer,p1=t.cloneInstance,Xu=t.createContainerChildSet,qu=t.appendChildToContainerChildSet,m1=t.finalizeContainerChildren,eo=t.replaceContainerChildren,Qu=t.cloneHiddenInstance,Ju=t.cloneHiddenTextInstance,v1=t.canHydrateInstance,y1=t.canHydrateTextInstance,_1=t.canHydrateSuspenseInstance,Zu=t.isSuspenseInstancePending,to=t.isSuspenseInstanceFallback,S1=t.getSuspenseInstanceFallbackErrorDetails,w1=t.registerSuspenseInstanceRetry,hs=t.getNextHydratableSibling,C1=t.getFirstHydratableChild,E1=t.getFirstHydratableChildWithinContainer,P1=t.getFirstHydratableChildWithinSuspenseInstance,k1=t.hydrateInstance,x1=t.hydrateTextInstance,T1=t.hydrateSuspenseInstance,A1=t.getNextHydratableInstanceAfterSuspenseInstance,R1=t.commitHydratedContainer,b1=t.commitHydratedSuspenseInstance,I1=t.clearSuspenseBoundary,O1=t.clearSuspenseBoundaryFromContainer,D1=t.shouldDeleteUnhydratedTailInstances,L1=t.didNotMatchHydratedContainerTextInstance,M1=t.didNotMatchHydratedTextInstance,no;function ai(n){if(no===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);no=i&&i[1]||""}return`
`+no+n}var ro=!1;function io(n,i){if(!n||ro)return"";ro=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Q){var u=Q}Reflect.construct(n,[],i)}else{try{i.call()}catch(Q){u=Q}n.call(i.prototype)}else{try{throw Error()}catch(Q){u=Q}n()}}catch(Q){if(Q&&u&&typeof Q.stack=="string"){for(var c=Q.stack.split(`
`),g=u.stack.split(`
`),_=c.length-1,I=g.length-1;1<=_&&0<=I&&c[_]!==g[I];)I--;for(;1<=_&&0<=I;_--,I--)if(c[_]!==g[I]){if(_!==1||I!==1)do if(_--,I--,0>I||c[_]!==g[I]){var z=`
`+c[_].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=_&&0<=I);break}}}finally{ro=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?ai(n):""}var N1=Object.prototype.hasOwnProperty,so=[],xr=-1;function On(n){return{current:n}}function De(n){0>xr||(n.current=so[xr],so[xr]=null,xr--)}function Ie(n,i){xr++,so[xr]=n.current,n.current=i}var Dn={},at=On(Dn),mt=On(!1),ir=Dn;function Tr(n,i){var a=n.type.contextTypes;if(!a)return Dn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var c={},g;for(g in a)c[g]=i[g];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=c),c}function vt(n){return n=n.childContextTypes,n!=null}function ds(){De(mt),De(at)}function $u(n,i,a){if(at.current!==Dn)throw Error(l(168));Ie(at,i),Ie(mt,a)}function ec(n,i,a){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var c in u)if(!(c in i))throw Error(l(108,W(n)||"Unknown",c));return o({},a,u)}function fs(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Dn,ir=at.current,Ie(at,n),Ie(mt,mt.current),!0}function tc(n,i,a){var u=n.stateNode;if(!u)throw Error(l(169));a?(n=ec(n,i,ir),u.__reactInternalMemoizedMergedChildContext=n,De(mt),De(at),Ie(at,n)):De(mt),Ie(mt,a)}var Vt=Math.clz32?Math.clz32:z1,F1=Math.log,U1=Math.LN2;function z1(n){return n>>>=0,n===0?32:31-(F1(n)/U1|0)|0}var gs=64,ps=4194304;function oi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ms(n,i){var a=n.pendingLanes;if(a===0)return 0;var u=0,c=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var I=_&~c;I!==0?u=oi(I):(g&=_,g!==0&&(u=oi(g)))}else _=a&~c,_!==0?u=oi(_):g!==0&&(u=oi(g));if(u===0)return 0;if(i!==0&&i!==u&&!(i&c)&&(c=u&-u,g=i&-i,c>=g||c===16&&(g&4194240)!==0))return i;if(u&4&&(u|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)a=31-Vt(i),c=1<<a,u|=n[a],i&=~c;return u}function G1(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B1(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,c=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-Vt(g),I=1<<_,z=c[_];z===-1?(!(I&a)||I&u)&&(c[_]=G1(I,i)):z<=i&&(n.expiredLanes|=I),g&=~I}}function ao(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function nc(){var n=gs;return gs<<=1,!(gs&4194240)&&(gs=64),n}function oo(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function li(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Vt(i),n[i]=a}function V1(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var c=31-Vt(a),g=1<<c;i[c]=0,u[c]=-1,n[c]=-1,a&=~g}}function lo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-Vt(a),c=1<<u;c&i|n[u]&i&&(n[u]|=i),a&=~c}}var Ce=0;function rc(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var uo=s.unstable_scheduleCallback,ic=s.unstable_cancelCallback,j1=s.unstable_shouldYield,H1=s.unstable_requestPaint,$e=s.unstable_now,co=s.unstable_ImmediatePriority,W1=s.unstable_UserBlockingPriority,ho=s.unstable_NormalPriority,K1=s.unstable_IdlePriority,vs=null,nn=null;function Y1(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(vs,n,void 0,(n.current.flags&128)===128)}catch{}}function X1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var jt=typeof Object.is=="function"?Object.is:X1,mn=null,ys=!1,fo=!1;function sc(n){mn===null?mn=[n]:mn.push(n)}function q1(n){ys=!0,sc(n)}function rn(){if(!fo&&mn!==null){fo=!0;var n=0,i=Ce;try{var a=mn;for(Ce=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}mn=null,ys=!1}catch(c){throw mn!==null&&(mn=mn.slice(n+1)),uo(co,rn),c}finally{Ce=i,fo=!1}}return null}var Ar=[],Rr=0,_s=null,Ss=0,Rt=[],bt=0,sr=null,vn=1,yn="";function ar(n,i){Ar[Rr++]=Ss,Ar[Rr++]=_s,_s=n,Ss=i}function ac(n,i,a){Rt[bt++]=vn,Rt[bt++]=yn,Rt[bt++]=sr,sr=n;var u=vn;n=yn;var c=32-Vt(u)-1;u&=~(1<<c),a+=1;var g=32-Vt(i)+c;if(30<g){var _=c-c%5;g=(u&(1<<_)-1).toString(32),u>>=_,c-=_,vn=1<<32-Vt(i)+c|a<<c|u,yn=g+n}else vn=1<<g|a<<c|u,yn=n}function go(n){n.return!==null&&(ar(n,1),ac(n,1,0))}function po(n){for(;n===_s;)_s=Ar[--Rr],Ar[Rr]=null,Ss=Ar[--Rr],Ar[Rr]=null;for(;n===sr;)sr=Rt[--bt],Rt[bt]=null,yn=Rt[--bt],Rt[bt]=null,vn=Rt[--bt],Rt[bt]=null}var xt=null,It=null,Me=!1,ui=!1,Ht=null;function oc(n,i){var a=Nt(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function lc(n,i){switch(n.tag){case 5:return i=v1(i,n.type,n.pendingProps),i!==null?(n.stateNode=i,xt=n,It=C1(i),!0):!1;case 6:return i=y1(i,n.pendingProps),i!==null?(n.stateNode=i,xt=n,It=null,!0):!1;case 13:if(i=_1(i),i!==null){var a=sr!==null?{id:vn,overflow:yn}:null;return n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Nt(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,xt=n,It=null,!0}return!1;default:return!1}}function mo(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vo(n){if(Me){var i=It;if(i){var a=i;if(!lc(n,i)){if(mo(n))throw Error(l(418));i=hs(a);var u=xt;i&&lc(n,i)?oc(u,a):(n.flags=n.flags&-4097|2,Me=!1,xt=n)}}else{if(mo(n))throw Error(l(418));n.flags=n.flags&-4097|2,Me=!1,xt=n}}}function uc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xt=n}function ws(n){if(!pe||n!==xt)return!1;if(!Me)return uc(n),Me=!0,!1;if(n.tag!==3&&(n.tag!==5||D1(n.type)&&!Ae(n.type,n.memoizedProps))){var i=It;if(i){if(mo(n))throw cc(),Error(l(418));for(;i;)oc(n,i),i=hs(i)}}if(uc(n),n.tag===13){if(!pe)throw Error(l(316));if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(l(317));It=A1(n)}else It=xt?hs(n.stateNode):null;return!0}function cc(){for(var n=It;n;)n=hs(n)}function br(){pe&&(It=xt=null,ui=Me=!1)}function yo(n){Ht===null?Ht=[n]:Ht.push(n)}var Q1=h.ReactCurrentBatchConfig;function Cs(n,i){if(jt(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var c=a[u];if(!N1.call(i,c)||!jt(n[c],i[c]))return!1}return!0}function J1(n){switch(n.tag){case 5:return ai(n.type);case 16:return ai("Lazy");case 13:return ai("Suspense");case 19:return ai("SuspenseList");case 0:case 2:case 15:return n=io(n.type,!1),n;case 11:return n=io(n.type.render,!1),n;case 1:return n=io(n.type,!0),n;default:return""}}function Wt(n,i){if(n&&n.defaultProps){i=o({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}var Es=On(null),Ps=null,Ir=null,_o=null;function So(){_o=Ir=Ps=null}function hc(n,i,a){Z?(Ie(Es,i._currentValue),i._currentValue=a):(Ie(Es,i._currentValue2),i._currentValue2=a)}function wo(n){var i=Es.current;De(Es),Z?n._currentValue=i:n._currentValue2=i}function Co(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function Or(n,i){Ps=n,_o=Ir=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(yt=!0),n.firstContext=null)}function Ot(n){var i=Z?n._currentValue:n._currentValue2;if(_o!==n)if(n={context:n,memoizedValue:i,next:null},Ir===null){if(Ps===null)throw Error(l(308));Ir=n,Ps.dependencies={lanes:0,firstContext:n}}else Ir=Ir.next=n;return i}var or=null;function Eo(n){or===null?or=[n]:or.push(n)}function dc(n,i,a,u){var c=i.interleaved;return c===null?(a.next=a,Eo(i)):(a.next=c.next,c.next=a),i.interleaved=a,sn(n,u)}function sn(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ln=!1;function Po(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fc(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _n(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Mn(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,_e&2){var c=u.pending;return c===null?i.next=i:(i.next=c.next,c.next=i),u.pending=i,sn(n,a)}return c=u.interleaved,c===null?(i.next=i,Eo(u)):(i.next=c.next,c.next=i),u.interleaved=i,sn(n,a)}function ks(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,lo(n,a)}}function gc(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var c=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?c=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?c=g=i:g=g.next=i}else c=g=i;a={baseState:u.baseState,firstBaseUpdate:c,lastBaseUpdate:g,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function xs(n,i,a,u){var c=n.updateQueue;Ln=!1;var g=c.firstBaseUpdate,_=c.lastBaseUpdate,I=c.shared.pending;if(I!==null){c.shared.pending=null;var z=I,Q=z.next;z.next=null,_===null?g=Q:_.next=Q,_=z;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==_&&(I===null?ie.firstBaseUpdate=Q:I.next=Q,ie.lastBaseUpdate=z))}if(g!==null){var de=c.baseState;_=0,ie=Q=z=null,I=g;do{var ee=I.lane,Le=I.eventTime;if((u&ee)===ee){ie!==null&&(ie=ie.next={eventTime:Le,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var Re=n,wt=I;switch(ee=i,Le=a,wt.tag){case 1:if(Re=wt.payload,typeof Re=="function"){de=Re.call(Le,de,ee);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=wt.payload,ee=typeof Re=="function"?Re.call(Le,de,ee):Re,ee==null)break e;de=o({},de,ee);break e;case 2:Ln=!0}}I.callback!==null&&I.lane!==0&&(n.flags|=64,ee=c.effects,ee===null?c.effects=[I]:ee.push(I))}else Le={eventTime:Le,lane:ee,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(Q=ie=Le,z=de):ie=ie.next=Le,_|=ee;if(I=I.next,I===null){if(I=c.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,c.lastBaseUpdate=ee,c.shared.pending=null}}while(!0);if(ie===null&&(z=de),c.baseState=z,c.firstBaseUpdate=Q,c.lastBaseUpdate=ie,i=c.shared.interleaved,i!==null){c=i;do _|=c.lane,c=c.next;while(c!==i)}else g===null&&(c.shared.lanes=0);ur|=_,n.lanes=_,n.memoizedState=de}}function pc(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],c=u.callback;if(c!==null){if(u.callback=null,u=a,typeof c!="function")throw Error(l(191,c));c.call(u)}}}var mc=new r.Component().refs;function ko(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:o({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ts={isMounted:function(n){return(n=n._reactInternals)?w(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var u=ct(),c=Un(n),g=_n(u,c);g.payload=i,a!=null&&(g.callback=a),i=Mn(n,g,c),i!==null&&(Mt(i,n,c,u),ks(i,n,c))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=ct(),c=Un(n),g=_n(u,c);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Mn(n,g,c),i!==null&&(Mt(i,n,c,u),ks(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=ct(),u=Un(n),c=_n(a,u);c.tag=2,i!=null&&(c.callback=i),i=Mn(n,c,u),i!==null&&(Mt(i,n,u,a),ks(i,n,u))}};function vc(n,i,a,u,c,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,_):i.prototype&&i.prototype.isPureReactComponent?!Cs(a,u)||!Cs(c,g):!0}function yc(n,i,a){var u=!1,c=Dn,g=i.contextType;return typeof g=="object"&&g!==null?g=Ot(g):(c=vt(i)?ir:at.current,u=i.contextTypes,g=(u=u!=null)?Tr(n,c):Dn),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ts,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=c,n.__reactInternalMemoizedMaskedChildContext=g),i}function _c(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&Ts.enqueueReplaceState(i,i.state,null)}function xo(n,i,a,u){var c=n.stateNode;c.props=a,c.state=n.memoizedState,c.refs=mc,Po(n);var g=i.contextType;typeof g=="object"&&g!==null?c.context=Ot(g):(g=vt(i)?ir:at.current,c.context=Tr(n,g)),c.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ko(n,i,g,a),c.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(i=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),i!==c.state&&Ts.enqueueReplaceState(c,c.state,null),xs(n,a,c,u),c.state=n.memoizedState),typeof c.componentDidMount=="function"&&(n.flags|=4194308)}function ci(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(l(309));var u=a.stateNode}if(!u)throw Error(l(147,n));var c=u,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(_){var I=c.refs;I===mc&&(I=c.refs={}),_===null?delete I[g]:I[g]=_},i._stringRef=g,i)}if(typeof n!="string")throw Error(l(284));if(!a._owner)throw Error(l(290,n))}return n}function As(n,i){throw n=Object.prototype.toString.call(i),Error(l(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Sc(n){var i=n._init;return i(n._payload)}function wc(n){function i(U,L){if(n){var B=U.deletions;B===null?(U.deletions=[L],U.flags|=16):B.push(L)}}function a(U,L){if(!n)return null;for(;L!==null;)i(U,L),L=L.sibling;return null}function u(U,L){for(U=new Map;L!==null;)L.key!==null?U.set(L.key,L):U.set(L.index,L),L=L.sibling;return U}function c(U,L){return U=Gn(U,L),U.index=0,U.sibling=null,U}function g(U,L,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<L?(U.flags|=2,L):B):(U.flags|=2,L)):(U.flags|=1048576,L)}function _(U){return n&&U.alternate===null&&(U.flags|=2),U}function I(U,L,B,te){return L===null||L.tag!==6?(L=dl(B,U.mode,te),L.return=U,L):(L=c(L,B),L.return=U,L)}function z(U,L,B,te){var oe=B.type;return oe===p?ie(U,L,B.props.children,te,B.key):L!==null&&(L.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===M&&Sc(oe)===L.type)?(te=c(L,B.props),te.ref=ci(U,L,B),te.return=U,te):(te=ea(B.type,B.key,B.props,null,U.mode,te),te.ref=ci(U,L,B),te.return=U,te)}function Q(U,L,B,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==B.containerInfo||L.stateNode.implementation!==B.implementation?(L=fl(B,U.mode,te),L.return=U,L):(L=c(L,B.children||[]),L.return=U,L)}function ie(U,L,B,te,oe){return L===null||L.tag!==7?(L=fr(B,U.mode,te,oe),L.return=U,L):(L=c(L,B),L.return=U,L)}function de(U,L,B){if(typeof L=="string"&&L!==""||typeof L=="number")return L=dl(""+L,U.mode,B),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case d:return B=ea(L.type,L.key,L.props,null,U.mode,B),B.ref=ci(U,null,L),B.return=U,B;case f:return L=fl(L,U.mode,B),L.return=U,L;case M:var te=L._init;return de(U,te(L._payload),B)}if(N(L)||A(L))return L=fr(L,U.mode,B,null),L.return=U,L;As(U,L)}return null}function ee(U,L,B,te){var oe=L!==null?L.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return oe!==null?null:I(U,L,""+B,te);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case d:return B.key===oe?z(U,L,B,te):null;case f:return B.key===oe?Q(U,L,B,te):null;case M:return oe=B._init,ee(U,L,oe(B._payload),te)}if(N(B)||A(B))return oe!==null?null:ie(U,L,B,te,null);As(U,B)}return null}function Le(U,L,B,te,oe){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(B)||null,I(L,U,""+te,oe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case d:return U=U.get(te.key===null?B:te.key)||null,z(L,U,te,oe);case f:return U=U.get(te.key===null?B:te.key)||null,Q(L,U,te,oe);case M:var me=te._init;return Le(U,L,B,me(te._payload),oe)}if(N(te)||A(te))return U=U.get(B)||null,ie(L,U,te,oe,null);As(L,te)}return null}function Re(U,L,B,te){for(var oe=null,me=null,fe=L,Ee=L=0,nt=null;fe!==null&&Ee<B.length;Ee++){fe.index>Ee?(nt=fe,fe=null):nt=fe.sibling;var Pe=ee(U,fe,B[Ee],te);if(Pe===null){fe===null&&(fe=nt);break}n&&fe&&Pe.alternate===null&&i(U,fe),L=g(Pe,L,Ee),me===null?oe=Pe:me.sibling=Pe,me=Pe,fe=nt}if(Ee===B.length)return a(U,fe),Me&&ar(U,Ee),oe;if(fe===null){for(;Ee<B.length;Ee++)fe=de(U,B[Ee],te),fe!==null&&(L=g(fe,L,Ee),me===null?oe=fe:me.sibling=fe,me=fe);return Me&&ar(U,Ee),oe}for(fe=u(U,fe);Ee<B.length;Ee++)nt=Le(fe,U,Ee,B[Ee],te),nt!==null&&(n&&nt.alternate!==null&&fe.delete(nt.key===null?Ee:nt.key),L=g(nt,L,Ee),me===null?oe=nt:me.sibling=nt,me=nt);return n&&fe.forEach(function(Bn){return i(U,Bn)}),Me&&ar(U,Ee),oe}function wt(U,L,B,te){var oe=A(B);if(typeof oe!="function")throw Error(l(150));if(B=oe.call(B),B==null)throw Error(l(151));for(var me=oe=null,fe=L,Ee=L=0,nt=null,Pe=B.next();fe!==null&&!Pe.done;Ee++,Pe=B.next()){fe.index>Ee?(nt=fe,fe=null):nt=fe.sibling;var Bn=ee(U,fe,Pe.value,te);if(Bn===null){fe===null&&(fe=nt);break}n&&fe&&Bn.alternate===null&&i(U,fe),L=g(Bn,L,Ee),me===null?oe=Bn:me.sibling=Bn,me=Bn,fe=nt}if(Pe.done)return a(U,fe),Me&&ar(U,Ee),oe;if(fe===null){for(;!Pe.done;Ee++,Pe=B.next())Pe=de(U,Pe.value,te),Pe!==null&&(L=g(Pe,L,Ee),me===null?oe=Pe:me.sibling=Pe,me=Pe);return Me&&ar(U,Ee),oe}for(fe=u(U,fe);!Pe.done;Ee++,Pe=B.next())Pe=Le(fe,U,Ee,Pe.value,te),Pe!==null&&(n&&Pe.alternate!==null&&fe.delete(Pe.key===null?Ee:Pe.key),L=g(Pe,L,Ee),me===null?oe=Pe:me.sibling=Pe,me=Pe);return n&&fe.forEach(function(Tg){return i(U,Tg)}),Me&&ar(U,Ee),oe}function Cn(U,L,B,te){if(typeof B=="object"&&B!==null&&B.type===p&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case d:e:{for(var oe=B.key,me=L;me!==null;){if(me.key===oe){if(oe=B.type,oe===p){if(me.tag===7){a(U,me.sibling),L=c(me,B.props.children),L.return=U,U=L;break e}}else if(me.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===M&&Sc(oe)===me.type){a(U,me.sibling),L=c(me,B.props),L.ref=ci(U,me,B),L.return=U,U=L;break e}a(U,me);break}else i(U,me);me=me.sibling}B.type===p?(L=fr(B.props.children,U.mode,te,B.key),L.return=U,U=L):(te=ea(B.type,B.key,B.props,null,U.mode,te),te.ref=ci(U,L,B),te.return=U,U=te)}return _(U);case f:e:{for(me=B.key;L!==null;){if(L.key===me)if(L.tag===4&&L.stateNode.containerInfo===B.containerInfo&&L.stateNode.implementation===B.implementation){a(U,L.sibling),L=c(L,B.children||[]),L.return=U,U=L;break e}else{a(U,L);break}else i(U,L);L=L.sibling}L=fl(B,U.mode,te),L.return=U,U=L}return _(U);case M:return me=B._init,Cn(U,L,me(B._payload),te)}if(N(B))return Re(U,L,B,te);if(A(B))return wt(U,L,B,te);As(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,L!==null&&L.tag===6?(a(U,L.sibling),L=c(L,B),L.return=U,U=L):(a(U,L),L=dl(B,U.mode,te),L.return=U,U=L),_(U)):a(U,L)}return Cn}var Dr=wc(!0),Cc=wc(!1),hi={},Dt=On(hi),di=On(hi),Lr=On(hi);function an(n){if(n===hi)throw Error(l(174));return n}function To(n,i){Ie(Lr,i),Ie(di,n),Ie(Dt,hi),n=re(i),De(Dt),Ie(Dt,n)}function Mr(){De(Dt),De(di),De(Lr)}function Ec(n){var i=an(Lr.current),a=an(Dt.current);i=J(a,n.type,i),a!==i&&(Ie(di,n),Ie(Dt,i))}function Ao(n){di.current===n&&(De(Dt),De(di))}var Fe=On(0);function Rs(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zu(a)||to(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ro=[];function bo(){for(var n=0;n<Ro.length;n++){var i=Ro[n];Z?i._workInProgressVersionPrimary=null:i._workInProgressVersionSecondary=null}Ro.length=0}var bs=h.ReactCurrentDispatcher,Io=h.ReactCurrentBatchConfig,lr=0,Ue=null,Ye=null,et=null,Is=!1,fi=!1,gi=0,Z1=0;function ot(){throw Error(l(321))}function Oo(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!jt(n[a],i[a]))return!1;return!0}function Do(n,i,a,u,c,g){if(lr=g,Ue=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,bs.current=n===null||n.memoizedState===null?ng:rg,n=a(u,c),fi){g=0;do{if(fi=!1,gi=0,25<=g)throw Error(l(301));g+=1,et=Ye=null,i.updateQueue=null,bs.current=ig,n=a(u,c)}while(fi)}if(bs.current=Ls,i=Ye!==null&&Ye.next!==null,lr=0,et=Ye=Ue=null,Is=!1,i)throw Error(l(300));return n}function Lo(){var n=gi!==0;return gi=0,n}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ue.memoizedState=et=n:et=et.next=n,et}function Lt(){if(Ye===null){var n=Ue.alternate;n=n!==null?n.memoizedState:null}else n=Ye.next;var i=et===null?Ue.memoizedState:et.next;if(i!==null)et=i,Ye=n;else{if(n===null)throw Error(l(310));Ye=n,n={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Ue.memoizedState=et=n:et=et.next=n}return et}function pi(n,i){return typeof i=="function"?i(n):i}function Mo(n){var i=Lt(),a=i.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=n;var u=Ye,c=u.baseQueue,g=a.pending;if(g!==null){if(c!==null){var _=c.next;c.next=g.next,g.next=_}u.baseQueue=c=g,a.pending=null}if(c!==null){g=c.next,u=u.baseState;var I=_=null,z=null,Q=g;do{var ie=Q.lane;if((lr&ie)===ie)z!==null&&(z=z.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),u=Q.hasEagerState?Q.eagerState:n(u,Q.action);else{var de={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};z===null?(I=z=de,_=u):z=z.next=de,Ue.lanes|=ie,ur|=ie}Q=Q.next}while(Q!==null&&Q!==g);z===null?_=u:z.next=I,jt(u,i.memoizedState)||(yt=!0),i.memoizedState=u,i.baseState=_,i.baseQueue=z,a.lastRenderedState=u}if(n=a.interleaved,n!==null){c=n;do g=c.lane,Ue.lanes|=g,ur|=g,c=c.next;while(c!==n)}else c===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function No(n){var i=Lt(),a=i.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=n;var u=a.dispatch,c=a.pending,g=i.memoizedState;if(c!==null){a.pending=null;var _=c=c.next;do g=n(g,_.action),_=_.next;while(_!==c);jt(g,i.memoizedState)||(yt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,u]}function Pc(){}function kc(n,i){var a=Ue,u=Lt(),c=i(),g=!jt(u.memoizedState,c);if(g&&(u.memoizedState=c,yt=!0),u=u.queue,Fo(Ac.bind(null,a,u,n),[n]),u.getSnapshot!==i||g||et!==null&&et.memoizedState.tag&1){if(a.flags|=2048,mi(9,Tc.bind(null,a,u,c,i),void 0,null),tt===null)throw Error(l(349));lr&30||xc(a,i,c)}return c}function xc(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ue.updateQueue,i===null?(i={lastEffect:null,stores:null},Ue.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Tc(n,i,a,u){i.value=a,i.getSnapshot=u,Rc(i)&&bc(n)}function Ac(n,i,a){return a(function(){Rc(i)&&bc(n)})}function Rc(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!jt(n,a)}catch{return!0}}function bc(n){var i=sn(n,1);i!==null&&Mt(i,n,1,-1)}function Ic(n){var i=on();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:n},i.queue=n,n=n.dispatch=tg.bind(null,Ue,n),[i.memoizedState,n]}function mi(n,i,a,u){return n={tag:n,create:i,destroy:a,deps:u,next:null},i=Ue.updateQueue,i===null?(i={lastEffect:null,stores:null},Ue.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n)),n}function Oc(){return Lt().memoizedState}function Os(n,i,a,u){var c=on();Ue.flags|=n,c.memoizedState=mi(1|i,a,void 0,u===void 0?null:u)}function Ds(n,i,a,u){var c=Lt();u=u===void 0?null:u;var g=void 0;if(Ye!==null){var _=Ye.memoizedState;if(g=_.destroy,u!==null&&Oo(u,_.deps)){c.memoizedState=mi(i,a,g,u);return}}Ue.flags|=n,c.memoizedState=mi(1|i,a,g,u)}function Dc(n,i){return Os(8390656,8,n,i)}function Fo(n,i){return Ds(2048,8,n,i)}function Lc(n,i){return Ds(4,2,n,i)}function Mc(n,i){return Ds(4,4,n,i)}function Nc(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Fc(n,i,a){return a=a!=null?a.concat([n]):null,Ds(4,4,Nc.bind(null,i,n),a)}function Uo(){}function Uc(n,i){var a=Lt();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&Oo(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function zc(n,i){var a=Lt();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&Oo(i,u[1])?u[0]:(n=n(),a.memoizedState=[n,i],n)}function Gc(n,i,a){return lr&21?(jt(a,i)||(a=nc(),Ue.lanes|=a,ur|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,yt=!0),n.memoizedState=a)}function $1(n,i){var a=Ce;Ce=a!==0&&4>a?a:4,n(!0);var u=Io.transition;Io.transition={};try{n(!1),i()}finally{Ce=a,Io.transition=u}}function Bc(){return Lt().memoizedState}function eg(n,i,a){var u=Un(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},Vc(n))jc(i,a);else if(a=dc(n,i,a,u),a!==null){var c=ct();Mt(a,n,u,c),Hc(a,i,u)}}function tg(n,i,a){var u=Un(n),c={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vc(n))jc(i,c);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,I=g(_,a);if(c.hasEagerState=!0,c.eagerState=I,jt(I,_)){var z=i.interleaved;z===null?(c.next=c,Eo(i)):(c.next=z.next,z.next=c),i.interleaved=c;return}}catch{}finally{}a=dc(n,i,c,u),a!==null&&(c=ct(),Mt(a,n,u,c),Hc(a,i,u))}}function Vc(n){var i=n.alternate;return n===Ue||i!==null&&i===Ue}function jc(n,i){fi=Is=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Hc(n,i,a){if(a&4194240){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,lo(n,a)}}var Ls={readContext:Ot,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},ng={readContext:Ot,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Ot,useEffect:Dc,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Os(4194308,4,Nc.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Os(4194308,4,n,i)},useInsertionEffect:function(n,i){return Os(4,2,n,i)},useMemo:function(n,i){var a=on();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var u=on();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=eg.bind(null,Ue,n),[u.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:Ic,useDebugValue:Uo,useDeferredValue:function(n){return on().memoizedState=n},useTransition:function(){var n=Ic(!1),i=n[0];return n=$1.bind(null,n[1]),on().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var u=Ue,c=on();if(Me){if(a===void 0)throw Error(l(407));a=a()}else{if(a=i(),tt===null)throw Error(l(349));lr&30||xc(u,i,a)}c.memoizedState=a;var g={value:a,getSnapshot:i};return c.queue=g,Dc(Ac.bind(null,u,g,n),[n]),u.flags|=2048,mi(9,Tc.bind(null,u,g,a,i),void 0,null),a},useId:function(){var n=on(),i=tt.identifierPrefix;if(Me){var a=yn,u=vn;a=(u&~(1<<32-Vt(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=gi++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Z1++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},rg={readContext:Ot,useCallback:Uc,useContext:Ot,useEffect:Fo,useImperativeHandle:Fc,useInsertionEffect:Lc,useLayoutEffect:Mc,useMemo:zc,useReducer:Mo,useRef:Oc,useState:function(){return Mo(pi)},useDebugValue:Uo,useDeferredValue:function(n){var i=Lt();return Gc(i,Ye.memoizedState,n)},useTransition:function(){var n=Mo(pi)[0],i=Lt().memoizedState;return[n,i]},useMutableSource:Pc,useSyncExternalStore:kc,useId:Bc,unstable_isNewReconciler:!1},ig={readContext:Ot,useCallback:Uc,useContext:Ot,useEffect:Fo,useImperativeHandle:Fc,useInsertionEffect:Lc,useLayoutEffect:Mc,useMemo:zc,useReducer:No,useRef:Oc,useState:function(){return No(pi)},useDebugValue:Uo,useDeferredValue:function(n){var i=Lt();return Ye===null?i.memoizedState=n:Gc(i,Ye.memoizedState,n)},useTransition:function(){var n=No(pi)[0],i=Lt().memoizedState;return[n,i]},useMutableSource:Pc,useSyncExternalStore:kc,useId:Bc,unstable_isNewReconciler:!1};function Nr(n,i){try{var a="",u=i;do a+=J1(u),u=u.return;while(u);var c=a}catch(g){c=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:c,digest:null}}function zo(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Go(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var sg=typeof WeakMap=="function"?WeakMap:Map;function Wc(n,i,a){a=_n(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){Xs||(Xs=!0,sl=u),Go(n,i)},a}function Kc(n,i,a){a=_n(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var c=i.value;a.payload=function(){return u(c)},a.callback=function(){Go(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Go(n,i),typeof u!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function Yc(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new sg;var c=new Set;u.set(i,c)}else c=u.get(i),c===void 0&&(c=new Set,u.set(i,c));c.has(a)||(c.add(a),n=_g.bind(null,n,i,a),i.then(n,n))}function Xc(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function qc(n,i,a,u,c){return n.mode&1?(n.flags|=65536,n.lanes=c,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=_n(-1,1),i.tag=2,Mn(a,i,1))),a.lanes|=1),n)}var ag=h.ReactCurrentOwner,yt=!1;function gt(n,i,a,u){i.child=n===null?Cc(i,null,a,u):Dr(i,n.child,a,u)}function Qc(n,i,a,u,c){a=a.render;var g=i.ref;return Or(i,c),u=Do(n,i,a,u,g,c),a=Lo(),n!==null&&!yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~c,Sn(n,i,c)):(Me&&a&&go(i),i.flags|=1,gt(n,i,u,c),i.child)}function Jc(n,i,a,u,c){if(n===null){var g=a.type;return typeof g=="function"&&!hl(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Zc(n,i,g,u,c)):(n=ea(a.type,null,u,i,i.mode,c),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!(n.lanes&c)){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:Cs,a(_,u)&&n.ref===i.ref)return Sn(n,i,c)}return i.flags|=1,n=Gn(g,u),n.ref=i.ref,n.return=i,i.child=n}function Zc(n,i,a,u,c){if(n!==null){var g=n.memoizedProps;if(Cs(g,u)&&n.ref===i.ref)if(yt=!1,i.pendingProps=u=g,(n.lanes&c)!==0)n.flags&131072&&(yt=!0);else return i.lanes=n.lanes,Sn(n,i,c)}return Bo(n,i,a,u,c)}function $c(n,i,a){var u=i.pendingProps,c=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ur,Tt),Tt|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ie(Ur,Tt),Tt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:a,Ie(Ur,Tt),Tt|=u}else g!==null?(u=g.baseLanes|a,i.memoizedState=null):u=a,Ie(Ur,Tt),Tt|=u;return gt(n,i,c,a),i.child}function eh(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Bo(n,i,a,u,c){var g=vt(a)?ir:at.current;return g=Tr(i,g),Or(i,c),a=Do(n,i,a,u,g,c),u=Lo(),n!==null&&!yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~c,Sn(n,i,c)):(Me&&u&&go(i),i.flags|=1,gt(n,i,a,c),i.child)}function th(n,i,a,u,c){if(vt(a)){var g=!0;fs(i)}else g=!1;if(Or(i,c),i.stateNode===null)Ns(n,i),yc(i,a,u),xo(i,a,u,c),u=!0;else if(n===null){var _=i.stateNode,I=i.memoizedProps;_.props=I;var z=_.context,Q=a.contextType;typeof Q=="object"&&Q!==null?Q=Ot(Q):(Q=vt(a)?ir:at.current,Q=Tr(i,Q));var ie=a.getDerivedStateFromProps,de=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function";de||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==u||z!==Q)&&_c(i,_,u,Q),Ln=!1;var ee=i.memoizedState;_.state=ee,xs(i,u,_,c),z=i.memoizedState,I!==u||ee!==z||mt.current||Ln?(typeof ie=="function"&&(ko(i,a,ie,u),z=i.memoizedState),(I=Ln||vc(i,a,I,u,ee,z,Q))?(de||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=z),_.props=u,_.state=z,_.context=Q,u=I):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{_=i.stateNode,fc(n,i),I=i.memoizedProps,Q=i.type===i.elementType?I:Wt(i.type,I),_.props=Q,de=i.pendingProps,ee=_.context,z=a.contextType,typeof z=="object"&&z!==null?z=Ot(z):(z=vt(a)?ir:at.current,z=Tr(i,z));var Le=a.getDerivedStateFromProps;(ie=typeof Le=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==de||ee!==z)&&_c(i,_,u,z),Ln=!1,ee=i.memoizedState,_.state=ee,xs(i,u,_,c);var Re=i.memoizedState;I!==de||ee!==Re||mt.current||Ln?(typeof Le=="function"&&(ko(i,a,Le,u),Re=i.memoizedState),(Q=Ln||vc(i,a,Q,u,ee,Re,z)||!1)?(ie||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Re,z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Re,z)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||I===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Re),_.props=u,_.state=Re,_.context=z,u=Q):(typeof _.componentDidUpdate!="function"||I===n.memoizedProps&&ee===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===n.memoizedProps&&ee===n.memoizedState||(i.flags|=1024),u=!1)}return Vo(n,i,a,u,g,c)}function Vo(n,i,a,u,c,g){eh(n,i);var _=(i.flags&128)!==0;if(!u&&!_)return c&&tc(i,a,!1),Sn(n,i,g);u=i.stateNode,ag.current=i;var I=_&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&_?(i.child=Dr(i,n.child,null,g),i.child=Dr(i,null,I,g)):gt(n,i,I,g),i.memoizedState=u.state,c&&tc(i,a,!0),i.child}function nh(n){var i=n.stateNode;i.pendingContext?$u(n,i.pendingContext,i.pendingContext!==i.context):i.context&&$u(n,i.context,!1),To(n,i.containerInfo)}function rh(n,i,a,u,c){return br(),yo(c),i.flags|=256,gt(n,i,a,u),i.child}var jo={dehydrated:null,treeContext:null,retryLane:0};function Ho(n){return{baseLanes:n,cachePool:null,transitions:null}}function ih(n,i,a){var u=i.pendingProps,c=Fe.current,g=!1,_=(i.flags&128)!==0,I;if((I=_)||(I=n!==null&&n.memoizedState===null?!1:(c&2)!==0),I?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(c|=1),Ie(Fe,c&1),n===null)return vo(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?to(n)?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(_=u.children,n=u.fallback,g?(u=i.mode,g=i.child,_={mode:"hidden",children:_},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=_):g=ta(_,u,0,null),n=fr(n,u,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Ho(a),i.memoizedState=jo,n):Wo(i,_));if(c=n.memoizedState,c!==null&&(I=c.dehydrated,I!==null))return og(n,i,_,u,I,c,a);if(g){g=u.fallback,_=i.mode,c=n.child,I=c.sibling;var z={mode:"hidden",children:u.children};return!(_&1)&&i.child!==c?(u=i.child,u.childLanes=0,u.pendingProps=z,i.deletions=null):(u=Gn(c,z),u.subtreeFlags=c.subtreeFlags&14680064),I!==null?g=Gn(I,g):(g=fr(g,_,a,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,_=n.child.memoizedState,_=_===null?Ho(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,i.memoizedState=jo,u}return g=n.child,n=g.sibling,u=Gn(g,{mode:"visible",children:u.children}),!(i.mode&1)&&(u.lanes=a),u.return=i,u.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=u,i.memoizedState=null,u}function Wo(n,i){return i=ta({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ms(n,i,a,u){return u!==null&&yo(u),Dr(i,n.child,null,a),n=Wo(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function og(n,i,a,u,c,g,_){if(a)return i.flags&256?(i.flags&=-257,u=zo(Error(l(422))),Ms(n,i,_,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=u.fallback,c=i.mode,u=ta({mode:"visible",children:u.children},c,0,null),g=fr(g,c,_,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,i.mode&1&&Dr(i,n.child,null,_),i.child.memoizedState=Ho(_),i.memoizedState=jo,g);if(!(i.mode&1))return Ms(n,i,_,null);if(to(c))return u=S1(c).digest,g=Error(l(419)),u=zo(g,u,void 0),Ms(n,i,_,u);if(a=(_&n.childLanes)!==0,yt||a){if(u=tt,u!==null){switch(_&-_){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(u.suspendedLanes|_)?0:c,c!==0&&c!==g.retryLane&&(g.retryLane=c,sn(n,c),Mt(u,n,c,-1))}return cl(),u=zo(Error(l(421))),Ms(n,i,_,u)}return Zu(c)?(i.flags|=128,i.child=n.child,i=Sg.bind(null,n),w1(c,i),null):(n=g.treeContext,pe&&(It=P1(c),xt=i,Me=!0,Ht=null,ui=!1,n!==null&&(Rt[bt++]=vn,Rt[bt++]=yn,Rt[bt++]=sr,vn=n.id,yn=n.overflow,sr=i)),i=Wo(i,u.children),i.flags|=4096,i)}function sh(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Co(n.return,i,a)}function Ko(n,i,a,u,c){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:c}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=a,g.tailMode=c)}function ah(n,i,a){var u=i.pendingProps,c=u.revealOrder,g=u.tail;if(gt(n,i,u.children,a),u=Fe.current,u&2)u=u&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sh(n,a,i);else if(n.tag===19)sh(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Ie(Fe,u),!(i.mode&1))i.memoizedState=null;else switch(c){case"forwards":for(a=i.child,c=null;a!==null;)n=a.alternate,n!==null&&Rs(n)===null&&(c=a),a=a.sibling;a=c,a===null?(c=i.child,i.child=null):(c=a.sibling,a.sibling=null),Ko(i,!1,c,a,g);break;case"backwards":for(a=null,c=i.child,i.child=null;c!==null;){if(n=c.alternate,n!==null&&Rs(n)===null){i.child=c;break}n=c.sibling,c.sibling=a,a=c,c=n}Ko(i,!0,a,null,g);break;case"together":Ko(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ns(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Sn(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ur|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(l(153));if(i.child!==null){for(n=i.child,a=Gn(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Gn(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function lg(n,i,a){switch(i.tag){case 3:nh(i),br();break;case 5:Ec(i);break;case 1:vt(i.type)&&fs(i);break;case 4:To(i,i.stateNode.containerInfo);break;case 10:hc(i,i.type._context,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ie(Fe,Fe.current&1),i.flags|=128,null):a&i.child.childLanes?ih(n,i,a):(Ie(Fe,Fe.current&1),n=Sn(n,i,a),n!==null?n.sibling:null);Ie(Fe,Fe.current&1);break;case 19:if(u=(a&i.childLanes)!==0,n.flags&128){if(u)return ah(n,i,a);i.flags|=128}var c=i.memoizedState;if(c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ie(Fe,Fe.current),u)break;return null;case 22:case 23:return i.lanes=0,$c(n,i,a)}return Sn(n,i,a)}function ln(n){n.flags|=4}function oh(n,i){if(n!==null&&n.child===i.child)return!0;if(i.flags&16)return!1;for(n=i.child;n!==null;){if(n.flags&12854||n.subtreeFlags&12854)return!1;n=n.sibling}return!0}var vi,yi,Fs,Us;if(ae)vi=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)Te(n,a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},yi=function(){},Fs=function(n,i,a,u,c){if(n=n.memoizedProps,n!==u){var g=i.stateNode,_=an(Dt.current);a=Ve(g,a,n,u,c,_),(i.updateQueue=a)&&ln(i)}},Us=function(n,i,a,u){a!==u&&ln(i)};else if(ye){vi=function(n,i,a,u){for(var c=i.child;c!==null;){if(c.tag===5){var g=c.stateNode;a&&u&&(g=Qu(g,c.type,c.memoizedProps,c)),Te(n,g)}else if(c.tag===6)g=c.stateNode,a&&u&&(g=Ju(g,c.memoizedProps,c)),Te(n,g);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)g=c.child,g!==null&&(g.return=c),vi(n,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};var lh=function(n,i,a,u){for(var c=i.child;c!==null;){if(c.tag===5){var g=c.stateNode;a&&u&&(g=Qu(g,c.type,c.memoizedProps,c)),qu(n,g)}else if(c.tag===6)g=c.stateNode,a&&u&&(g=Ju(g,c.memoizedProps,c)),qu(n,g);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)g=c.child,g!==null&&(g.return=c),lh(n,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};yi=function(n,i){var a=i.stateNode;if(!oh(n,i)){n=a.containerInfo;var u=Xu(n);lh(u,i,!1,!1),a.pendingChildren=u,ln(i),m1(n,u)}},Fs=function(n,i,a,u,c){var g=n.stateNode,_=n.memoizedProps;if((n=oh(n,i))&&_===u)i.stateNode=g;else{var I=i.stateNode,z=an(Dt.current),Q=null;_!==u&&(Q=Ve(I,a,_,u,c,z)),n&&Q===null?i.stateNode=g:(g=p1(g,Q,a,_,u,i,n,I),ke(g,a,u,c,z)&&ln(i),i.stateNode=g,n?ln(i):vi(g,i,!1,!1))}},Us=function(n,i,a,u){a!==u?(n=an(Lr.current),a=an(Dt.current),i.stateNode=X(u,n,a,i),ln(i)):i.stateNode=n.stateNode}}else yi=function(){},Fs=function(){},Us=function(){};function _i(n,i){if(!Me)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var c=n.child;c!==null;)a|=c.lanes|c.childLanes,u|=c.subtreeFlags&14680064,u|=c.flags&14680064,c.return=n,c=c.sibling;else for(c=n.child;c!==null;)a|=c.lanes|c.childLanes,u|=c.subtreeFlags,u|=c.flags,c.return=n,c=c.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function ug(n,i,a){var u=i.pendingProps;switch(po(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return vt(i.type)&&ds(),lt(i),null;case 3:return a=i.stateNode,Mr(),De(mt),De(at),bo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ws(i)?ln(i):n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Ht!==null&&(ll(Ht),Ht=null))),yi(n,i),lt(i),null;case 5:Ao(i),a=an(Lr.current);var c=i.type;if(n!==null&&i.stateNode!=null)Fs(n,i,c,u,a),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(l(166));return lt(i),null}if(n=an(Dt.current),ws(i)){if(!pe)throw Error(l(175));n=k1(i.stateNode,i.type,i.memoizedProps,a,n,i,!ui),i.updateQueue=n,n!==null&&ln(i)}else{var g=ue(c,u,a,n,i);vi(g,i,!1,!1),i.stateNode=g,ke(g,c,u,a,n)&&ln(i)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return lt(i),null;case 6:if(n&&i.stateNode!=null)Us(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(l(166));if(n=an(Lr.current),a=an(Dt.current),ws(i)){if(!pe)throw Error(l(176));if(n=i.stateNode,a=i.memoizedProps,(u=x1(n,a,i,!ui))&&(c=xt,c!==null))switch(c.tag){case 3:L1(c.stateNode.containerInfo,n,a,(c.mode&1)!==0);break;case 5:M1(c.type,c.memoizedProps,c.stateNode,n,a,(c.mode&1)!==0)}u&&ln(i)}else i.stateNode=X(u,n,a,i)}return lt(i),null;case 13:if(De(Fe),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Me&&It!==null&&i.mode&1&&!(i.flags&128))cc(),br(),i.flags|=98560,c=!1;else if(c=ws(i),u!==null&&u.dehydrated!==null){if(n===null){if(!c)throw Error(l(318));if(!pe)throw Error(l(344));if(c=i.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));T1(c,i)}else br(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;lt(i),c=!1}else Ht!==null&&(ll(Ht),Ht=null),c=!0;if(!c)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(a=u!==null,a!==(n!==null&&n.memoizedState!==null)&&a&&(i.child.flags|=8192,i.mode&1&&(n===null||Fe.current&1?Xe===0&&(Xe=3):cl())),i.updateQueue!==null&&(i.flags|=4),lt(i),null);case 4:return Mr(),yi(n,i),n===null&&pt(i.stateNode.containerInfo),lt(i),null;case 10:return wo(i.type._context),lt(i),null;case 17:return vt(i.type)&&ds(),lt(i),null;case 19:if(De(Fe),c=i.memoizedState,c===null)return lt(i),null;if(u=(i.flags&128)!==0,g=c.rendering,g===null)if(u)_i(c,!1);else{if(Xe!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(g=Rs(n),g!==null){for(i.flags|=128,_i(c,!1),n=g.updateQueue,n!==null&&(i.updateQueue=n,i.flags|=4),i.subtreeFlags=0,n=a,a=i.child;a!==null;)u=a,c=n,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,c=g.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a=a.sibling;return Ie(Fe,Fe.current&1|2),i.child}n=n.sibling}c.tail!==null&&$e()>il&&(i.flags|=128,u=!0,_i(c,!1),i.lanes=4194304)}else{if(!u)if(n=Rs(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,n!==null&&(i.updateQueue=n,i.flags|=4),_i(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Me)return lt(i),null}else 2*$e()-c.renderingStartTime>il&&a!==1073741824&&(i.flags|=128,u=!0,_i(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(n=c.last,n!==null?n.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=$e(),i.sibling=null,n=Fe.current,Ie(Fe,u?n&1|2:n&1),i):(lt(i),null);case 22:case 23:return ul(),a=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==a&&(i.flags|=8192),a&&i.mode&1?Tt&1073741824&&(lt(i),ae&&i.subtreeFlags&6&&(i.flags|=8192)):lt(i),null;case 24:return null;case 25:return null}throw Error(l(156,i.tag))}function cg(n,i){switch(po(i),i.tag){case 1:return vt(i.type)&&ds(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Mr(),De(mt),De(at),bo(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return Ao(i),null;case 13:if(De(Fe),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(l(340));br()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return De(Fe),null;case 4:return Mr(),null;case 10:return wo(i.type._context),null;case 22:case 23:return ul(),null;case 24:return null;default:return null}}var zs=!1,ut=!1,hg=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Fr(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Ne(n,i,u)}else a.current=null}function uh(n,i,a){try{a()}catch(u){Ne(n,i,u)}}var ch=!1;function dg(n,i){for($(n.containerInfo),ne=i;ne!==null;)if(n=ne,i=n.child,(n.subtreeFlags&1028)!==0&&i!==null)i.return=n,ne=i;else for(;ne!==null;){n=ne;try{var a=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(a!==null){var u=a.memoizedProps,c=a.memoizedState,g=n.stateNode,_=g.getSnapshotBeforeUpdate(n.elementType===n.type?u:Wt(n.type,u),c);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:ae&&g1(n.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(I){Ne(n,n.return,I)}if(i=n.sibling,i!==null){i.return=n.return,ne=i;break}ne=n.return}return a=ch,ch=!1,a}function Si(n,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var c=u=u.next;do{if((c.tag&n)===n){var g=c.destroy;c.destroy=void 0,g!==void 0&&uh(i,a,g)}c=c.next}while(c!==u)}}function Gs(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function Yo(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=G(a);break;default:n=a}typeof i=="function"?i(n):i.current=n}}function hh(n){var i=n.alternate;i!==null&&(n.alternate=null,hh(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&en(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dh(n){return n.tag===5||n.tag===3||n.tag===4}function fh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xo(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o1(a,n,i):n1(a,n);else if(u!==4&&(n=n.child,n!==null))for(Xo(n,i,a),n=n.sibling;n!==null;)Xo(n,i,a),n=n.sibling}function qo(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a1(a,n,i):t1(a,n);else if(u!==4&&(n=n.child,n!==null))for(qo(n,i,a),n=n.sibling;n!==null;)qo(n,i,a),n=n.sibling}var it=null,Kt=!1;function un(n,i,a){for(a=a.child;a!==null;)Qo(n,i,a),a=a.sibling}function Qo(n,i,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(vs,a)}catch{}switch(a.tag){case 5:ut||Fr(a,i);case 6:if(ae){var u=it,c=Kt;it=null,un(n,i,a),it=u,Kt=c,it!==null&&(Kt?u1(it,a.stateNode):l1(it,a.stateNode))}else un(n,i,a);break;case 18:ae&&it!==null&&(Kt?O1(it,a.stateNode):I1(it,a.stateNode));break;case 4:ae?(u=it,c=Kt,it=a.stateNode.containerInfo,Kt=!0,un(n,i,a),it=u,Kt=c):(ye&&(u=a.stateNode.containerInfo,c=Xu(u),eo(u,c)),un(n,i,a));break;case 0:case 11:case 14:case 15:if(!ut&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){c=u=u.next;do{var g=c,_=g.destroy;g=g.tag,_!==void 0&&(g&2||g&4)&&uh(a,i,_),c=c.next}while(c!==u)}un(n,i,a);break;case 1:if(!ut&&(Fr(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(I){Ne(a,i,I)}un(n,i,a);break;case 21:un(n,i,a);break;case 22:a.mode&1?(ut=(u=ut)||a.memoizedState!==null,un(n,i,a),ut=u):un(n,i,a);break;default:un(n,i,a)}}function gh(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new hg),i.forEach(function(u){var c=wg.bind(null,n,u);a.has(u)||(a.add(u),u.then(c,c))})}}function Yt(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var c=a[u];try{var g=n,_=i;if(ae){var I=_;e:for(;I!==null;){switch(I.tag){case 5:it=I.stateNode,Kt=!1;break e;case 3:it=I.stateNode.containerInfo,Kt=!0;break e;case 4:it=I.stateNode.containerInfo,Kt=!0;break e}I=I.return}if(it===null)throw Error(l(160));Qo(g,_,c),it=null,Kt=!1}else Qo(g,_,c);var z=c.alternate;z!==null&&(z.return=null),c.return=null}catch(Q){Ne(c,i,Q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ph(i,n),i=i.sibling}function ph(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Yt(i,n),cn(n),u&4){try{Si(3,n,n.return),Gs(3,n)}catch(ee){Ne(n,n.return,ee)}try{Si(5,n,n.return)}catch(ee){Ne(n,n.return,ee)}}break;case 1:Yt(i,n),cn(n),u&512&&a!==null&&Fr(a,a.return);break;case 5:if(Yt(i,n),cn(n),u&512&&a!==null&&Fr(a,a.return),ae){if(n.flags&32){var c=n.stateNode;try{Yu(c)}catch(ee){Ne(n,n.return,ee)}}if(u&4&&(c=n.stateNode,c!=null)){var g=n.memoizedProps;if(a=a!==null?a.memoizedProps:g,u=n.type,i=n.updateQueue,n.updateQueue=null,i!==null)try{s1(c,i,u,a,g,n)}catch(ee){Ne(n,n.return,ee)}}}break;case 6:if(Yt(i,n),cn(n),u&4&&ae){if(n.stateNode===null)throw Error(l(162));c=n.stateNode,g=n.memoizedProps,a=a!==null?a.memoizedProps:g;try{r1(c,a,g)}catch(ee){Ne(n,n.return,ee)}}break;case 3:if(Yt(i,n),cn(n),u&4){if(ae&&pe&&a!==null&&a.memoizedState.isDehydrated)try{R1(i.containerInfo)}catch(ee){Ne(n,n.return,ee)}if(ye){c=i.containerInfo,g=i.pendingChildren;try{eo(c,g)}catch(ee){Ne(n,n.return,ee)}}}break;case 4:if(Yt(i,n),cn(n),u&4&&ye){g=n.stateNode,c=g.containerInfo,g=g.pendingChildren;try{eo(c,g)}catch(ee){Ne(n,n.return,ee)}}break;case 13:Yt(i,n),cn(n),c=n.child,c.flags&8192&&(g=c.memoizedState!==null,c.stateNode.isHidden=g,!g||c.alternate!==null&&c.alternate.memoizedState!==null||(rl=$e())),u&4&&gh(n);break;case 22:var _=a!==null&&a.memoizedState!==null;if(n.mode&1?(ut=(a=ut)||_,Yt(i,n),ut=a):Yt(i,n),cn(n),u&8192){if(a=n.memoizedState!==null,(n.stateNode.isHidden=a)&&!_&&n.mode&1)for(ne=n,u=n.child;u!==null;){for(i=ne=u;ne!==null;){_=ne;var I=_.child;switch(_.tag){case 0:case 11:case 14:case 15:Si(4,_,_.return);break;case 1:Fr(_,_.return);var z=_.stateNode;if(typeof z.componentWillUnmount=="function"){var Q=_,ie=_.return;try{var de=Q;z.props=de.memoizedProps,z.state=de.memoizedState,z.componentWillUnmount()}catch(ee){Ne(Q,ie,ee)}}break;case 5:Fr(_,_.return);break;case 22:if(_.memoizedState!==null){yh(i);continue}}I!==null?(I.return=_,ne=I):yh(i)}u=u.sibling}if(ae){e:if(u=null,ae)for(i=n;;){if(i.tag===5){if(u===null){u=i;try{c=i.stateNode,a?c1(c):d1(i.stateNode,i.memoizedProps)}catch(ee){Ne(n,n.return,ee)}}}else if(i.tag===6){if(u===null)try{g=i.stateNode,a?h1(g):f1(g,i.memoizedProps)}catch(ee){Ne(n,n.return,ee)}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;u===i&&(u=null),i=i.return}u===i&&(u=null),i.sibling.return=i.return,i=i.sibling}}}break;case 19:Yt(i,n),cn(n),u&4&&gh(n);break;case 21:break;default:Yt(i,n),cn(n)}}function cn(n){var i=n.flags;if(i&2){try{if(ae){e:{for(var a=n.return;a!==null;){if(dh(a)){var u=a;break e}a=a.return}throw Error(l(160))}switch(u.tag){case 5:var c=u.stateNode;u.flags&32&&(Yu(c),u.flags&=-33);var g=fh(n);qo(n,g,c);break;case 3:case 4:var _=u.stateNode.containerInfo,I=fh(n);Xo(n,I,_);break;default:throw Error(l(161))}}}catch(z){Ne(n,n.return,z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function fg(n,i,a){ne=n,mh(n)}function mh(n,i,a){for(var u=(n.mode&1)!==0;ne!==null;){var c=ne,g=c.child;if(c.tag===22&&u){var _=c.memoizedState!==null||zs;if(!_){var I=c.alternate,z=I!==null&&I.memoizedState!==null||ut;I=zs;var Q=ut;if(zs=_,(ut=z)&&!Q)for(ne=c;ne!==null;)_=ne,z=_.child,_.tag===22&&_.memoizedState!==null?_h(c):z!==null?(z.return=_,ne=z):_h(c);for(;g!==null;)ne=g,mh(g),g=g.sibling;ne=c,zs=I,ut=Q}vh(n)}else c.subtreeFlags&8772&&g!==null?(g.return=c,ne=g):vh(n)}}function vh(n){for(;ne!==null;){var i=ne;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:ut||Gs(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!ut)if(a===null)u.componentDidMount();else{var c=i.elementType===i.type?a.memoizedProps:Wt(i.type,a.memoizedProps);u.componentDidUpdate(c,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&pc(i,g,u);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=G(i.child.stateNode);break;case 1:a=i.child.stateNode}pc(i,_,a)}break;case 5:var I=i.stateNode;a===null&&i.flags&4&&i1(I,i.type,i.memoizedProps,i);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&i.memoizedState===null){var z=i.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var ie=Q.dehydrated;ie!==null&&b1(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}ut||i.flags&512&&Yo(i)}catch(de){Ne(i,i.return,de)}}if(i===n){ne=null;break}if(a=i.sibling,a!==null){a.return=i.return,ne=a;break}ne=i.return}}function yh(n){for(;ne!==null;){var i=ne;if(i===n){ne=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ne=a;break}ne=i.return}}function _h(n){for(;ne!==null;){var i=ne;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Gs(4,i)}catch(z){Ne(i,a,z)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var c=i.return;try{u.componentDidMount()}catch(z){Ne(i,c,z)}}var g=i.return;try{Yo(i)}catch(z){Ne(i,g,z)}break;case 5:var _=i.return;try{Yo(i)}catch(z){Ne(i,_,z)}}}catch(z){Ne(i,i.return,z)}if(i===n){ne=null;break}var I=i.sibling;if(I!==null){I.return=i.return,ne=I;break}ne=i.return}}var Bs=0,Vs=1,js=2,Hs=3,Ws=4;if(typeof Symbol=="function"&&Symbol.for){var wi=Symbol.for;Bs=wi("selector.component"),Vs=wi("selector.has_pseudo_class"),js=wi("selector.role"),Hs=wi("selector.test_id"),Ws=wi("selector.text")}function Jo(n){var i=Ke(n);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(l(364));return i}if(n=q0(n),n===null)throw Error(l(362));return n.stateNode.current}function Zo(n,i){switch(i.$$typeof){case Bs:if(n.type===i.value)return!0;break;case Vs:e:{i=i.value,n=[n,0];for(var a=0;a<n.length;){var u=n[a++],c=n[a++],g=i[c];if(u.tag!==5||!si(u)){for(;g!=null&&Zo(u,g);)c++,g=i[c];if(c===i.length){i=!0;break e}else for(u=u.child;u!==null;)n.push(u,c),u=u.sibling}}i=!1}return i;case js:if(n.tag===5&&Z0(n.stateNode,i.value))return!0;break;case Ws:if((n.tag===5||n.tag===6)&&(n=J0(n),n!==null&&0<=n.indexOf(i.value)))return!0;break;case Hs:if(n.tag===5&&(n=n.memoizedProps["data-testname"],typeof n=="string"&&n.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function $o(n){switch(n.$$typeof){case Bs:return"<"+(F(n.value)||"Unknown")+">";case Vs:return":has("+($o(n)||"")+")";case js:return'[role="'+n.value+'"]';case Ws:return'"'+n.value+'"';case Hs:return'[data-testname="'+n.value+'"]';default:throw Error(l(365))}}function Sh(n,i){var a=[];n=[n,0];for(var u=0;u<n.length;){var c=n[u++],g=n[u++],_=i[g];if(c.tag!==5||!si(c)){for(;_!=null&&Zo(c,_);)g++,_=i[g];if(g===i.length)a.push(c);else for(c=c.child;c!==null;)n.push(c,g),c=c.sibling}}return a}function el(n,i){if(!ii)throw Error(l(363));n=Jo(n),n=Sh(n,i),i=[],n=Array.from(n);for(var a=0;a<n.length;){var u=n[a++];if(u.tag===5)si(u)||i.push(u.stateNode);else for(u=u.child;u!==null;)n.push(u),u=u.sibling}return i}var gg=Math.ceil,Ks=h.ReactCurrentDispatcher,tl=h.ReactCurrentOwner,je=h.ReactCurrentBatchConfig,_e=0,tt=null,We=null,st=0,Tt=0,Ur=On(0),Xe=0,Ci=null,ur=0,Ys=0,nl=0,Ei=null,_t=null,rl=0,il=1/0,wn=null;function zr(){il=$e()+500}var Xs=!1,sl=null,Nn=null,qs=!1,Fn=null,Qs=0,Pi=0,al=null,Js=-1,Zs=0;function ct(){return _e&6?$e():Js!==-1?Js:Js=$e()}function Un(n){return n.mode&1?_e&2&&st!==0?st&-st:Q1.transition!==null?(Zs===0&&(Zs=nc()),Zs):(n=Ce,n!==0?n:xe()):1}function Mt(n,i,a,u){if(50<Pi)throw Pi=0,al=null,Error(l(185));li(n,a,u),(!(_e&2)||n!==tt)&&(n===tt&&(!(_e&2)&&(Ys|=a),Xe===4&&zn(n,st)),St(n,u),a===1&&_e===0&&!(i.mode&1)&&(zr(),ys&&rn()))}function St(n,i){var a=n.callbackNode;B1(n,i);var u=ms(n,n===tt?st:0);if(u===0)a!==null&&ic(a),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(a!=null&&ic(a),i===1)n.tag===0?q1(Ch.bind(null,n)):sc(Ch.bind(null,n)),kt?tn(function(){!(_e&6)&&rn()}):uo(co,rn),a=null;else{switch(rc(u)){case 1:a=co;break;case 4:a=W1;break;case 16:a=ho;break;case 536870912:a=K1;break;default:a=ho}a=Ih(a,wh.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function wh(n,i){if(Js=-1,Zs=0,_e&6)throw Error(l(327));var a=n.callbackNode;if(dr()&&n.callbackNode!==a)return null;var u=ms(n,n===tt?st:0);if(u===0)return null;if(u&30||u&n.expiredLanes||i)i=$s(n,u);else{i=u;var c=_e;_e|=2;var g=kh();(tt!==n||st!==i)&&(wn=null,zr(),cr(n,i));do try{vg();break}catch(I){Ph(n,I)}while(!0);So(),Ks.current=g,_e=c,We!==null?i=0:(tt=null,st=0,i=Xe)}if(i!==0){if(i===2&&(c=ao(n),c!==0&&(u=c,i=ol(n,c))),i===1)throw a=Ci,cr(n,0),zn(n,u),St(n,$e()),a;if(i===6)zn(n,u);else{if(c=n.current.alternate,!(u&30)&&!pg(c)&&(i=$s(n,u),i===2&&(g=ao(n),g!==0&&(u=g,i=ol(n,g))),i===1))throw a=Ci,cr(n,0),zn(n,u),St(n,$e()),a;switch(n.finishedWork=c,n.finishedLanes=u,i){case 0:case 1:throw Error(l(345));case 2:hr(n,_t,wn);break;case 3:if(zn(n,u),(u&130023424)===u&&(i=rl+500-$e(),10<i)){if(ms(n,0)!==0)break;if(c=n.suspendedLanes,(c&u)!==u){ct(),n.pingedLanes|=n.suspendedLanes&c;break}n.timeoutHandle=se(hr.bind(null,n,_t,wn),i);break}hr(n,_t,wn);break;case 4:if(zn(n,u),(u&4194240)===u)break;for(i=n.eventTimes,c=-1;0<u;){var _=31-Vt(u);g=1<<_,_=i[_],_>c&&(c=_),u&=~g}if(u=c,u=$e()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*gg(u/1960))-u,10<u){n.timeoutHandle=se(hr.bind(null,n,_t,wn),u);break}hr(n,_t,wn);break;case 5:hr(n,_t,wn);break;default:throw Error(l(329))}}}return St(n,$e()),n.callbackNode===a?wh.bind(null,n):null}function ol(n,i){var a=Ei;return n.current.memoizedState.isDehydrated&&(cr(n,i).flags|=256),n=$s(n,i),n!==2&&(i=_t,_t=a,i!==null&&ll(i)),n}function ll(n){_t===null?_t=n:_t.push.apply(_t,n)}function pg(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var c=a[u],g=c.getSnapshot;c=c.value;try{if(!jt(g(),c))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zn(n,i){for(i&=~nl,i&=~Ys,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Vt(i),u=1<<a;n[a]=-1,i&=~u}}function Ch(n){if(_e&6)throw Error(l(327));dr();var i=ms(n,0);if(!(i&1))return St(n,$e()),null;var a=$s(n,i);if(n.tag!==0&&a===2){var u=ao(n);u!==0&&(i=u,a=ol(n,u))}if(a===1)throw a=Ci,cr(n,0),zn(n,i),St(n,$e()),a;if(a===6)throw Error(l(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,hr(n,_t,wn),St(n,$e()),null}function Eh(n){Fn!==null&&Fn.tag===0&&!(_e&6)&&dr();var i=_e;_e|=1;var a=je.transition,u=Ce;try{if(je.transition=null,Ce=1,n)return n()}finally{Ce=u,je.transition=a,_e=i,!(_e&6)&&rn()}}function ul(){Tt=Ur.current,De(Ur)}function cr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==H&&(n.timeoutHandle=H,R(a)),We!==null)for(a=We.return;a!==null;){var u=a;switch(po(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ds();break;case 3:Mr(),De(mt),De(at),bo();break;case 5:Ao(u);break;case 4:Mr();break;case 13:De(Fe);break;case 19:De(Fe);break;case 10:wo(u.type._context);break;case 22:case 23:ul()}a=a.return}if(tt=n,We=n=Gn(n.current,null),st=Tt=i,Xe=0,Ci=null,nl=Ys=ur=0,_t=Ei=null,or!==null){for(i=0;i<or.length;i++)if(a=or[i],u=a.interleaved,u!==null){a.interleaved=null;var c=u.next,g=a.pending;if(g!==null){var _=g.next;g.next=c,u.next=_}a.pending=u}or=null}return n}function Ph(n,i){do{var a=We;try{if(So(),bs.current=Ls,Is){for(var u=Ue.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}Is=!1}if(lr=0,et=Ye=Ue=null,fi=!1,gi=0,tl.current=null,a===null||a.return===null){Xe=1,Ci=i,We=null;break}e:{var g=n,_=a.return,I=a,z=i;if(i=st,I.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=z,ie=I,de=ie.tag;if(!(ie.mode&1)&&(de===0||de===11||de===15)){var ee=ie.alternate;ee?(ie.updateQueue=ee.updateQueue,ie.memoizedState=ee.memoizedState,ie.lanes=ee.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var Le=Xc(_);if(Le!==null){Le.flags&=-257,qc(Le,_,I,g,i),Le.mode&1&&Yc(g,Q,i),i=Le,z=Q;var Re=i.updateQueue;if(Re===null){var wt=new Set;wt.add(z),i.updateQueue=wt}else Re.add(z);break e}else{if(!(i&1)){Yc(g,Q,i),cl();break e}z=Error(l(426))}}else if(Me&&I.mode&1){var Cn=Xc(_);if(Cn!==null){!(Cn.flags&65536)&&(Cn.flags|=256),qc(Cn,_,I,g,i),yo(Nr(z,I));break e}}g=z=Nr(z,I),Xe!==4&&(Xe=2),Ei===null?Ei=[g]:Ei.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=Wc(g,z,i);gc(g,U);break e;case 1:I=z;var L=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof L.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Nn===null||!Nn.has(B)))){g.flags|=65536,i&=-i,g.lanes|=i;var te=Kc(g,I,i);gc(g,te);break e}}g=g.return}while(g!==null)}Th(a)}catch(oe){i=oe,We===a&&a!==null&&(We=a=a.return);continue}break}while(!0)}function kh(){var n=Ks.current;return Ks.current=Ls,n===null?Ls:n}function cl(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(ur&268435455)&&!(Ys&268435455)||zn(tt,st)}function $s(n,i){var a=_e;_e|=2;var u=kh();(tt!==n||st!==i)&&(wn=null,cr(n,i));do try{mg();break}catch(c){Ph(n,c)}while(!0);if(So(),_e=a,Ks.current=u,We!==null)throw Error(l(261));return tt=null,st=0,Xe}function mg(){for(;We!==null;)xh(We)}function vg(){for(;We!==null&&!j1();)xh(We)}function xh(n){var i=bh(n.alternate,n,Tt);n.memoizedProps=n.pendingProps,i===null?Th(n):We=i,tl.current=null}function Th(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=cg(a,i),a!==null){a.flags&=32767,We=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xe=6,We=null;return}}else if(a=ug(a,i,Tt),a!==null){We=a;return}if(i=i.sibling,i!==null){We=i;return}We=i=n}while(i!==null);Xe===0&&(Xe=5)}function hr(n,i,a){var u=Ce,c=je.transition;try{je.transition=null,Ce=1,yg(n,i,a,u)}finally{je.transition=c,Ce=u}return null}function yg(n,i,a,u){do dr();while(Fn!==null);if(_e&6)throw Error(l(327));a=n.finishedWork;var c=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(l(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(V1(n,g),n===tt&&(We=tt=null,st=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||qs||(qs=!0,Ih(ho,function(){return dr(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=je.transition,je.transition=null;var _=Ce;Ce=1;var I=_e;_e|=4,tl.current=null,dg(n,a),ph(a,n),le(n.containerInfo),n.current=a,fg(a),H1(),_e=I,Ce=_,je.transition=g}else n.current=a;if(qs&&(qs=!1,Fn=n,Qs=c),g=n.pendingLanes,g===0&&(Nn=null),Y1(a.stateNode),St(n,$e()),i!==null)for(u=n.onRecoverableError,a=0;a<i.length;a++)c=i[a],u(c.value,{componentStack:c.stack,digest:c.digest});if(Xs)throw Xs=!1,n=sl,sl=null,n;return Qs&1&&n.tag!==0&&dr(),g=n.pendingLanes,g&1?n===al?Pi++:(Pi=0,al=n):Pi=0,rn(),null}function dr(){if(Fn!==null){var n=rc(Qs),i=je.transition,a=Ce;try{if(je.transition=null,Ce=16>n?16:n,Fn===null)var u=!1;else{if(n=Fn,Fn=null,Qs=0,_e&6)throw Error(l(331));var c=_e;for(_e|=4,ne=n.current;ne!==null;){var g=ne,_=g.child;if(ne.flags&16){var I=g.deletions;if(I!==null){for(var z=0;z<I.length;z++){var Q=I[z];for(ne=Q;ne!==null;){var ie=ne;switch(ie.tag){case 0:case 11:case 15:Si(8,ie,g)}var de=ie.child;if(de!==null)de.return=ie,ne=de;else for(;ne!==null;){ie=ne;var ee=ie.sibling,Le=ie.return;if(hh(ie),ie===Q){ne=null;break}if(ee!==null){ee.return=Le,ne=ee;break}ne=Le}}}var Re=g.alternate;if(Re!==null){var wt=Re.child;if(wt!==null){Re.child=null;do{var Cn=wt.sibling;wt.sibling=null,wt=Cn}while(wt!==null)}}ne=g}}if(g.subtreeFlags&2064&&_!==null)_.return=g,ne=_;else e:for(;ne!==null;){if(g=ne,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Si(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ne=U;break e}ne=g.return}}var L=n.current;for(ne=L;ne!==null;){_=ne;var B=_.child;if(_.subtreeFlags&2064&&B!==null)B.return=_,ne=B;else e:for(_=L;ne!==null;){if(I=ne,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Gs(9,I)}}catch(oe){Ne(I,I.return,oe)}if(I===_){ne=null;break e}var te=I.sibling;if(te!==null){te.return=I.return,ne=te;break e}ne=I.return}}if(_e=c,rn(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(vs,n)}catch{}u=!0}return u}finally{Ce=a,je.transition=i}}return!1}function Ah(n,i,a){i=Nr(a,i),i=Wc(n,i,1),n=Mn(n,i,1),i=ct(),n!==null&&(li(n,1,i),St(n,i))}function Ne(n,i,a){if(n.tag===3)Ah(n,n,a);else for(;i!==null;){if(i.tag===3){Ah(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Nn===null||!Nn.has(u))){n=Nr(a,n),n=Kc(i,n,1),i=Mn(i,n,1),n=ct(),i!==null&&(li(i,1,n),St(i,n));break}}i=i.return}}function _g(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),i=ct(),n.pingedLanes|=n.suspendedLanes&a,tt===n&&(st&a)===a&&(Xe===4||Xe===3&&(st&130023424)===st&&500>$e()-rl?cr(n,0):nl|=a),St(n,i)}function Rh(n,i){i===0&&(n.mode&1?(i=ps,ps<<=1,!(ps&130023424)&&(ps=4194304)):i=1);var a=ct();n=sn(n,i),n!==null&&(li(n,i,a),St(n,a))}function Sg(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Rh(n,a)}function wg(n,i){var a=0;switch(n.tag){case 13:var u=n.stateNode,c=n.memoizedState;c!==null&&(a=c.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(l(314))}u!==null&&u.delete(i),Rh(n,a)}var bh;bh=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||mt.current)yt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return yt=!1,lg(n,i,a);yt=!!(n.flags&131072)}else yt=!1,Me&&i.flags&1048576&&ac(i,Ss,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;Ns(n,i),n=i.pendingProps;var c=Tr(i,at.current);Or(i,a),c=Do(null,i,u,n,c,a);var g=Lo();return i.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,vt(u)?(g=!0,fs(i)):g=!1,i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Po(i),c.updater=Ts,i.stateNode=c,c._reactInternals=i,xo(i,u,n,a),i=Vo(null,i,u,!0,g,a)):(i.tag=0,Me&&g&&go(i),gt(null,i,c,a),i=i.child),i;case 16:u=i.elementType;e:{switch(Ns(n,i),n=i.pendingProps,c=u._init,u=c(u._payload),i.type=u,c=i.tag=Eg(u),n=Wt(u,n),c){case 0:i=Bo(null,i,u,n,a);break e;case 1:i=th(null,i,u,n,a);break e;case 11:i=Qc(null,i,u,n,a);break e;case 14:i=Jc(null,i,u,Wt(u.type,n),a);break e}throw Error(l(306,u,""))}return i;case 0:return u=i.type,c=i.pendingProps,c=i.elementType===u?c:Wt(u,c),Bo(n,i,u,c,a);case 1:return u=i.type,c=i.pendingProps,c=i.elementType===u?c:Wt(u,c),th(n,i,u,c,a);case 3:e:{if(nh(i),n===null)throw Error(l(387));u=i.pendingProps,g=i.memoizedState,c=g.element,fc(n,i),xs(i,u,null,a);var _=i.memoizedState;if(u=_.element,pe&&g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){c=Nr(Error(l(423)),i),i=rh(n,i,u,a,c);break e}else if(u!==c){c=Nr(Error(l(424)),i),i=rh(n,i,u,a,c);break e}else for(pe&&(It=E1(i.stateNode.containerInfo),xt=i,Me=!0,Ht=null,ui=!1),a=Cc(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(br(),u===c){i=Sn(n,i,a);break e}gt(n,i,u,a)}i=i.child}return i;case 5:return Ec(i),n===null&&vo(i),u=i.type,c=i.pendingProps,g=n!==null?n.memoizedProps:null,_=c.children,Ae(u,c)?_=null:g!==null&&Ae(u,g)&&(i.flags|=32),eh(n,i),gt(n,i,_,a),i.child;case 6:return n===null&&vo(i),null;case 13:return ih(n,i,a);case 4:return To(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Dr(i,null,u,a):gt(n,i,u,a),i.child;case 11:return u=i.type,c=i.pendingProps,c=i.elementType===u?c:Wt(u,c),Qc(n,i,u,c,a);case 7:return gt(n,i,i.pendingProps,a),i.child;case 8:return gt(n,i,i.pendingProps.children,a),i.child;case 12:return gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,c=i.pendingProps,g=i.memoizedProps,_=c.value,hc(i,u,_),g!==null)if(jt(g.value,_)){if(g.children===c.children&&!mt.current){i=Sn(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var I=g.dependencies;if(I!==null){_=g.child;for(var z=I.firstContext;z!==null;){if(z.context===u){if(g.tag===1){z=_n(-1,a&-a),z.tag=2;var Q=g.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?z.next=z:(z.next=ie.next,ie.next=z),Q.pending=z}}g.lanes|=a,z=g.alternate,z!==null&&(z.lanes|=a),Co(g.return,a,i),I.lanes|=a;break}z=z.next}}else if(g.tag===10)_=g.type===i.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(l(341));_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Co(_,a,i),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}gt(n,i,c.children,a),i=i.child}return i;case 9:return c=i.type,u=i.pendingProps.children,Or(i,a),c=Ot(c),u=u(c),i.flags|=1,gt(n,i,u,a),i.child;case 14:return u=i.type,c=Wt(u,i.pendingProps),c=Wt(u.type,c),Jc(n,i,u,c,a);case 15:return Zc(n,i,i.type,i.pendingProps,a);case 17:return u=i.type,c=i.pendingProps,c=i.elementType===u?c:Wt(u,c),Ns(n,i),i.tag=1,vt(u)?(n=!0,fs(i)):n=!1,Or(i,a),yc(i,u,c),xo(i,u,c,a),Vo(null,i,u,!0,n,a);case 19:return ah(n,i,a);case 22:return $c(n,i,a)}throw Error(l(156,i.tag))};function Ih(n,i){return uo(n,i)}function Cg(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(n,i,a,u){return new Cg(n,i,a,u)}function hl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Eg(n){if(typeof n=="function")return hl(n)?1:0;if(n!=null){if(n=n.$$typeof,n===v)return 11;if(n===b)return 14}return 2}function Gn(n,i){var a=n.alternate;return a===null?(a=Nt(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ea(n,i,a,u,c,g){var _=2;if(u=n,typeof n=="function")hl(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case p:return fr(a.children,c,g,i);case y:_=8,c|=8;break;case P:return n=Nt(12,a,i,c|2),n.elementType=P,n.lanes=g,n;case k:return n=Nt(13,a,i,c),n.elementType=k,n.lanes=g,n;case x:return n=Nt(19,a,i,c),n.elementType=x,n.lanes=g,n;case m:return ta(a,c,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case E:_=10;break e;case S:_=9;break e;case v:_=11;break e;case b:_=14;break e;case M:_=16,u=null;break e}throw Error(l(130,n==null?n:typeof n,""))}return i=Nt(_,a,i,c),i.elementType=n,i.type=u,i.lanes=g,i}function fr(n,i,a,u){return n=Nt(7,n,u,i),n.lanes=a,n}function ta(n,i,a,u){return n=Nt(22,n,u,i),n.elementType=m,n.lanes=a,n.stateNode={isHidden:!1},n}function dl(n,i,a){return n=Nt(6,n,null,i),n.lanes=a,n}function fl(n,i,a){return i=Nt(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Pg(n,i,a,u,c){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=H,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oo(0),this.expirationTimes=oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.identifierPrefix=u,this.onRecoverableError=c,pe&&(this.mutableSourceEagerHydrationData=null)}function Oh(n,i,a,u,c,g,_,I,z){return n=new Pg(n,i,a,I,z),i===1?(i=1,g===!0&&(i|=8)):i=0,g=Nt(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(g),n}function Dh(n){if(!n)return Dn;n=n._reactInternals;e:{if(w(n)!==n||n.tag!==1)throw Error(l(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(vt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(l(171))}if(n.tag===1){var a=n.type;if(vt(a))return ec(n,a,i)}return i}function Lh(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(l(188)):(n=Object.keys(n).join(","),Error(l(268,n)));return n=O(i),n===null?null:n.stateNode}function Mh(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function na(n,i){Mh(n,i),(n=n.alternate)&&Mh(n,i)}function kg(n){return n=O(n),n===null?null:n.stateNode}function xg(){return null}return e.attemptContinuousHydration=function(n){if(n.tag===13){var i=sn(n,134217728);if(i!==null){var a=ct();Mt(i,n,134217728,a)}na(n,134217728)}},e.attemptDiscreteHydration=function(n){if(n.tag===13){var i=sn(n,1);if(i!==null){var a=ct();Mt(i,n,1,a)}na(n,1)}},e.attemptHydrationAtCurrentPriority=function(n){if(n.tag===13){var i=Un(n),a=sn(n,i);if(a!==null){var u=ct();Mt(a,n,i,u)}na(n,i)}},e.attemptSynchronousHydration=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=oi(i.pendingLanes);a!==0&&(lo(i,a|1),St(i,$e()),!(_e&6)&&(zr(),rn()))}break;case 13:Eh(function(){var u=sn(n,1);if(u!==null){var c=ct();Mt(u,n,1,c)}}),na(n,1)}},e.batchedUpdates=function(n,i){var a=_e;_e|=1;try{return n(i)}finally{_e=a,_e===0&&(zr(),ys&&rn())}},e.createComponentSelector=function(n){return{$$typeof:Bs,value:n}},e.createContainer=function(n,i,a,u,c,g,_){return Oh(n,i,!1,null,a,u,c,g,_)},e.createHasPseudoClassSelector=function(n){return{$$typeof:Vs,value:n}},e.createHydrationContainer=function(n,i,a,u,c,g,_,I,z){return n=Oh(a,u,!0,n,c,g,_,I,z),n.context=Dh(null),a=n.current,u=ct(),c=Un(a),g=_n(u,c),g.callback=i??null,Mn(a,g,c),n.current.lanes=c,li(n,c,u),St(n,u),n},e.createPortal=function(n,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:u==null?null:""+u,children:n,containerInfo:i,implementation:a}},e.createRoleSelector=function(n){return{$$typeof:js,value:n}},e.createTestNameSelector=function(n){return{$$typeof:Hs,value:n}},e.createTextSelector=function(n){return{$$typeof:Ws,value:n}},e.deferredUpdates=function(n){var i=Ce,a=je.transition;try{return je.transition=null,Ce=16,n()}finally{Ce=i,je.transition=a}},e.discreteUpdates=function(n,i,a,u,c){var g=Ce,_=je.transition;try{return je.transition=null,Ce=1,n(i,a,u,c)}finally{Ce=g,je.transition=_,_e===0&&zr()}},e.findAllNodes=el,e.findBoundingRects=function(n,i){if(!ii)throw Error(l(363));i=el(n,i),n=[];for(var a=0;a<i.length;a++)n.push(Q0(i[a]));for(i=n.length-1;0<i;i--){a=n[i];for(var u=a.x,c=u+a.width,g=a.y,_=g+a.height,I=i-1;0<=I;I--)if(i!==I){var z=n[I],Q=z.x,ie=Q+z.width,de=z.y,ee=de+z.height;if(u>=Q&&g>=de&&c<=ie&&_<=ee){n.splice(i,1);break}else if(u!==Q||a.width!==z.width||ee<g||de>_){if(!(g!==de||a.height!==z.height||ie<u||Q>c)){Q>u&&(z.width+=Q-u,z.x=u),ie<c&&(z.width=c-Q),n.splice(i,1);break}}else{de>g&&(z.height+=de-g,z.y=g),ee<_&&(z.height=_-de),n.splice(i,1);break}}}return n},e.findHostInstance=Lh,e.findHostInstanceWithNoPortals=function(n){return n=T(n),n=n!==null?j(n):null,n===null?null:n.stateNode},e.findHostInstanceWithWarning=function(n){return Lh(n)},e.flushControlled=function(n){var i=_e;_e|=1;var a=je.transition,u=Ce;try{je.transition=null,Ce=1,n()}finally{Ce=u,je.transition=a,_e=i,_e===0&&(zr(),rn())}},e.flushPassiveEffects=dr,e.flushSync=Eh,e.focusWithin=function(n,i){if(!ii)throw Error(l(363));for(n=Jo(n),i=Sh(n,i),i=Array.from(i),n=0;n<i.length;){var a=i[n++];if(!si(a)){if(a.tag===5&&$0(a.stateNode))return!0;for(a=a.child;a!==null;)i.push(a),a=a.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Ce},e.getFindAllNodesFailureDescription=function(n,i){if(!ii)throw Error(l(363));var a=0,u=[];n=[Jo(n),0];for(var c=0;c<n.length;){var g=n[c++],_=n[c++],I=i[_];if((g.tag!==5||!si(g))&&(Zo(g,I)&&(u.push($o(I)),_++,_>a&&(a=_)),_<i.length))for(g=g.child;g!==null;)n.push(g,_),g=g.sibling}if(a<i.length){for(n=[];a<i.length;a++)n.push($o(i[a]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+n.join(" > ")}return null},e.getPublicRootInstance=function(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return G(n.child.stateNode);default:return n.child.stateNode}},e.injectIntoDevTools=function(n){if(n={bundleType:n.bundleType,version:n.version,rendererPackageName:n.rendererPackageName,rendererConfig:n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:kg,findFiberByHostInstance:n.findFiberByHostInstance||xg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")n=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)n=!0;else{try{vs=i.inject(n),nn=i}catch{}n=!!i.checkDCE}}return n},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(n,i,a,u){if(!ii)throw Error(l(363));n=el(n,i);var c=e1(n,a,u).disconnect;return{disconnect:function(){c()}}},e.registerMutableSourceForHydration=function(n,i){var a=i._getVersion;a=a(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,a]:n.mutableSourceEagerHydrationData.push(i,a)},e.runWithPriority=function(n,i){var a=Ce;try{return Ce=n,i()}finally{Ce=a}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(n,i,a,u){var c=i.current,g=ct(),_=Un(c);return a=Dh(a),i.context===null?i.context=a:i.pendingContext=a,i=_n(g,_),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=Mn(c,i,_),n!==null&&(Mt(n,c,_,g),ks(n,c,_)),_},e};e0.exports=pv;var mv=e0.exports;const vv=af(mv);var t0={exports:{}},Cr={};Cr.ConcurrentRoot=1;Cr.ContinuousEventPriority=4;Cr.DefaultEventPriority=16;Cr.DiscreteEventPriority=1;Cr.IdleEventPriority=536870912;Cr.LegacyRoot=0;t0.exports=Cr;var n0=t0.exports;const Ed={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Pd=!1,kd=!1;const bu=".react-konva-event",yv=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,_v=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Sv={};function Ka(t,e,r=Sv){if(!Pd&&"zIndex"in e&&(console.warn(_v),Pd=!0),!kd&&e.draggable){var s=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;s&&!o&&(console.warn(yv),kd=!0)}for(var l in r)if(!Ed[l]){var h=l.slice(0,2)==="on",d=r[l]!==e[l];if(h&&d){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),t.off(f,r[l])}var p=!e.hasOwnProperty(l);p&&t.setAttr(l,void 0)}var y=e._useStrictMode,P={},E=!1;const S={};for(var l in e)if(!Ed[l]){var h=l.slice(0,2)==="on",v=r[l]!==e[l];if(h&&v){var f=l.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),e[l]&&(S[f]=e[l])}!h&&(e[l]!==r[l]||y&&e[l]!==t.getAttr(l))&&(E=!0,P[l]=e[l])}E&&(t.setAttrs(P),$n(t));for(var f in S)t.on(f+bu,S[f])}function $n(t){if(!Oe.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const r0={},wv={};qn.Node.prototype._applyProps=Ka;function Cv(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),$n(t)}function Ev(t,e,r){let s=qn[t];s||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),s=qn.Group);const o={},l={};for(var h in e){var d=h.slice(0,2)==="on";d?l[h]=e[h]:o[h]=e[h]}const f=new s(o);return Ka(f,l),f}function Pv(t,e,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function kv(t,e,r){return!1}function xv(t){return t}function Tv(){return null}function Av(){return null}function Rv(t,e,r,s){return wv}function bv(){}function Iv(t){}function Ov(t,e){return!1}function Dv(){return r0}function Lv(){return r0}const Mv=setTimeout,Nv=clearTimeout,Fv=-1;function Uv(t,e){return!1}const zv=!1,Gv=!0,Bv=!0;function Vv(t,e){e.parent===t?e.moveToTop():t.add(e),$n(t)}function jv(t,e){e.parent===t?e.moveToTop():t.add(e),$n(t)}function i0(t,e,r){e._remove(),t.add(e),e.setZIndex(r.getZIndex()),$n(t)}function Hv(t,e,r){i0(t,e,r)}function Wv(t,e){e.destroy(),e.off(bu),$n(t)}function Kv(t,e){e.destroy(),e.off(bu),$n(t)}function Yv(t,e,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Xv(t,e,r){}function qv(t,e,r,s,o){Ka(t,o,s)}function Qv(t){t.hide(),$n(t)}function Jv(t){}function Zv(t,e){(e.visible==null||e.visible)&&t.show()}function $v(t,e){}function ey(t){}function ty(){}const ny=()=>n0.DefaultEventPriority,ry=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Vv,appendChildToContainer:jv,appendInitialChild:Cv,cancelTimeout:Nv,clearContainer:ey,commitMount:Xv,commitTextUpdate:Yv,commitUpdate:qv,createInstance:Ev,createTextInstance:Pv,detachDeletedInstance:ty,finalizeInitialChildren:kv,getChildHostContext:Lv,getCurrentEventPriority:ny,getPublicInstance:xv,getRootHostContext:Dv,hideInstance:Qv,hideTextInstance:Jv,idlePriority:da.unstable_IdlePriority,insertBefore:i0,insertInContainerBefore:Hv,isPrimaryRenderer:zv,noTimeout:Fv,now:da.unstable_now,prepareForCommit:Tv,preparePortalMount:Av,prepareUpdate:Rv,removeChild:Wv,removeChildFromContainer:Kv,resetAfterCommit:bv,resetTextContent:Iv,run:da.unstable_runWithPriority,scheduleTimeout:Mv,shouldDeprioritizeSubtree:Ov,shouldSetTextContent:Uv,supportsMutation:Bv,unhideInstance:Zv,unhideTextInstance:$v,warnsIfNotActing:Gv},Symbol.toStringTag,{value:"Module"}));var iy=Object.defineProperty,sy=Object.defineProperties,ay=Object.getOwnPropertyDescriptors,xd=Object.getOwnPropertySymbols,oy=Object.prototype.hasOwnProperty,ly=Object.prototype.propertyIsEnumerable,Td=(t,e,r)=>e in t?iy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ad=(t,e)=>{for(var r in e||(e={}))oy.call(e,r)&&Td(t,r,e[r]);if(xd)for(var r of xd(e))ly.call(e,r)&&Td(t,r,e[r]);return t},uy=(t,e)=>sy(t,ay(e));function s0(t,e,r){if(!t)return;if(r(t)===!0)return t;let s=t.child;for(;s;){const o=s0(s,e,r);if(o)return o;s=s.sibling}}function a0(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Iu=a0(Y.createContext(null));class o0 extends Y.Component{render(){return Y.createElement(Iu.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:El,ReactCurrentDispatcher:Pl}=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function cy(){const t=Y.useContext(Iu);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Y.useId();return Y.useMemo(()=>{for(const r of[El==null?void 0:El.current,t,t==null?void 0:t.alternate]){if(!r)continue;const s=s0(r,!1,o=>{let l=o.memoizedState;for(;l;){if(l.memoizedState===e)return!0;l=l.next}});if(s)return s}},[t,e])}function hy(){var t,e;const r=cy(),[s]=Y.useState(()=>new Map);s.clear();let o=r;for(;o;){const l=(t=o.type)==null?void 0:t._context;l&&l!==Iu&&!s.has(l)&&s.set(l,(e=Pl==null?void 0:Pl.current)==null?void 0:e.readContext(a0(l))),o=o.return}return s}function dy(){const t=hy();return Y.useMemo(()=>Array.from(t.keys()).reduce((e,r)=>s=>Y.createElement(e,null,Y.createElement(r.Provider,uy(Ad({},s),{value:t.get(r)}))),e=>Y.createElement(o0,Ad({},e))),[t])}function fy(t){const e=Je.useRef({});return Je.useLayoutEffect(()=>{e.current=t}),Je.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const gy=t=>{const e=Je.useRef(),r=Je.useRef(),s=Je.useRef(),o=fy(t),l=dy(),h=d=>{const{forwardedRef:f}=t;f&&(typeof f=="function"?f(d):f.current=d)};return Je.useLayoutEffect(()=>(r.current=new qn.Stage({width:t.width,height:t.height,container:e.current}),h(r.current),s.current=Li.createContainer(r.current,n0.LegacyRoot,!1,null),Li.updateContainer(Je.createElement(l,{},t.children),s.current),()=>{qn.isBrowser&&(h(null),Li.updateContainer(null,s.current,null),r.current.destroy())}),[]),Je.useLayoutEffect(()=>{h(r.current),Ka(r.current,t,o),Li.updateContainer(Je.createElement(l,{},t.children),s.current,null)}),Je.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},Rd="Layer",_r="Group",l0="Rect",u0="Circle",py="Ellipse",ma="Line",my="Image",Ou="Text",tu="Path",Li=vv(ry);Li.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Je.version,rendererPackageName:"react-konva"});const vy=Je.forwardRef((t,e)=>Je.createElement(o0,{},Je.createElement(gy,{...t,forwardedRef:e})));var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.Rect=void 0;const yy=Pt,_y=pn,Sy=Oe,wy=rt,Cy=we;class Ya extends _y.Shape{_sceneFunc(e){var r=this.cornerRadius(),s=this.width(),o=this.height();e.beginPath(),r?wy.Util.drawRoundedRectPath(e,s,o,r):e.rect(0,0,s,o),e.closePath(),e.fillStrokeShape(this)}}Du.Rect=Ya;Ya.prototype.className="Rect";(0,Sy._registerNode)(Ya);yy.Factory.addGetterSetter(Ya,"cornerRadius",0,(0,Cy.getNumberOrArrayOfNumbersValidator)(4));var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.Text=Qi.stringToArray=void 0;const nu=rt,ft=Pt,Ey=pn,er=we,Py=Oe;function c0(t){return Array.from(t)}Qi.stringToArray=c0;var Vr="auto",ky="center",h0="inherit",Ri="justify",xy="Change.konva",Ty="2d",bd="-",d0="left",Ay="text",Ry="Text",by="top",Iy="bottom",Id="middle",f0="normal",Oy="px ",ua=" ",Dy="right",Od="rtl",Ly="word",My="char",Dd="none",kl="",g0=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Ny=g0.length;function Fy(t){return t.split(",").map(e=>{e=e.trim();const r=e.indexOf(" ")>=0,s=e.indexOf('"')>=0||e.indexOf("'")>=0;return r&&!s&&(e=`"${e}"`),e}).join(", ")}var xl;function Tl(){return xl||(xl=nu.Util.createCanvasElement().getContext(Ty),xl)}function Uy(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function zy(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Gy(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class Be extends Ey.Shape{constructor(e){super(Gy(e)),this._partialTextX=0,this._partialTextY=0;for(var r=0;r<Ny;r++)this.on(g0[r]+xy,this._setTextData);this._setTextData()}_sceneFunc(e){var r=this.textArr,s=r.length;if(this.text()){var o=this.padding(),l=this.fontSize(),h=this.lineHeight()*l,d=this.verticalAlign(),f=this.direction(),p=0,y=this.align(),P=this.getWidth(),E=this.letterSpacing(),S=this.fill(),v=this.textDecoration(),k=v.indexOf("underline")!==-1,x=v.indexOf("line-through")!==-1,b;f=f===h0?e.direction:f;var M=0,M=h/2,m=0,C=0;for(f===Od&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",Id),e.setAttr("textAlign",d0),d===Id?p=(this.getHeight()-s*h-o*2)/2:d===Iy&&(p=this.getHeight()-s*h-o*2),e.translate(o,p+o),b=0;b<s;b++){var m=0,C=0,A=r[b],F=A.text,W=A.width,w=A.lastInParagraph,D,T,O;if(e.save(),y===Dy?m+=P-W-o*2:y===ky&&(m+=(P-W-o*2)/2),k){e.save(),e.beginPath(),e.moveTo(m,M+C+Math.round(l/2)),D=F.split(" ").length-1,T=D===0,O=y===Ri&&!w?P-o*2:W,e.lineTo(m+Math.round(O),M+C+Math.round(l/2)),e.lineWidth=l/15;const J=this._getLinearGradient();e.strokeStyle=J||S,e.stroke(),e.restore()}if(x){e.save(),e.beginPath(),e.moveTo(m,M+C),D=F.split(" ").length-1,T=D===0,O=y===Ri&&w&&!T?P-o*2:W,e.lineTo(m+Math.round(O),M+C),e.lineWidth=l/15;const J=this._getLinearGradient();e.strokeStyle=J||S,e.stroke(),e.restore()}if(f!==Od&&(E!==0||y===Ri)){D=F.split(" ").length-1;for(var V=c0(F),j=0;j<V.length;j++){var N=V[j];N===" "&&!w&&y===Ri&&(m+=(P-o*2-W)/D),this._partialTextX=m,this._partialTextY=M+C,this._partialText=N,e.fillStrokeShape(this),m+=this.measureSize(N).width+E}}else E!==0&&e.setAttr("letterSpacing",`${E}px`),this._partialTextX=m,this._partialTextY=M+C,this._partialText=F,e.fillStrokeShape(this);e.restore(),s>1&&(M+=h)}}}_hitFunc(e){var r=this.getWidth(),s=this.getHeight();e.beginPath(),e.rect(0,0,r,s),e.closePath(),e.fillStrokeShape(this)}setText(e){var r=nu.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Ay,r),this}getWidth(){var e=this.attrs.width===Vr||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Vr||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return nu.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var r=Tl(),s=this.fontSize(),o;return r.save(),r.font=this._getContextFont(),o=r.measureText(e),r.restore(),{width:o.width,height:s}}_getContextFont(){return this.fontStyle()+ua+this.fontVariant()+ua+(this.fontSize()+Oy)+Fy(this.fontFamily())}_addTextLine(e){this.align()===Ri&&(e=e.trim());var r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){var r=this.letterSpacing(),s=e.length;return Tl().measureText(e).width+(s?r*(s-1):0)}_setTextData(){var e=this.text().split(`
`),r=+this.fontSize(),s=0,o=this.lineHeight()*r,l=this.attrs.width,h=this.attrs.height,d=l!==Vr&&l!==void 0,f=h!==Vr&&h!==void 0,p=this.padding(),y=l-p*2,P=h-p*2,E=0,S=this.wrap(),v=S!==Dd,k=S!==My&&v,x=this.ellipsis();this.textArr=[],Tl().font=this._getContextFont();for(var b=x?this._getTextWidth(kl):0,M=0,m=e.length;M<m;++M){var C=e[M],A=this._getTextWidth(C);if(d&&A>y)for(;C.length>0;){for(var F=0,W=C.length,w="",D=0;F<W;){var T=F+W>>>1,O=C.slice(0,T+1),V=this._getTextWidth(O)+b;V<=y?(F=T+1,w=O,D=V):W=T}if(w){if(k){var j,N=C[w.length],G=N===ua||N===bd;G&&D<=y?j=w.length:j=Math.max(w.lastIndexOf(ua),w.lastIndexOf(bd))+1,j>0&&(F=j,w=w.slice(0,F),D=this._getTextWidth(w))}w=w.trimRight(),this._addTextLine(w),s=Math.max(s,D),E+=o;var re=this._shouldHandleEllipsis(E);if(re){this._tryToAddEllipsisToLastLine();break}if(C=C.slice(F),C=C.trimLeft(),C.length>0&&(A=this._getTextWidth(C),A<=y)){this._addTextLine(C),E+=o,s=Math.max(s,A);break}}else break}else this._addTextLine(C),E+=o,s=Math.max(s,A),this._shouldHandleEllipsis(E)&&M<m-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&E+o>P)break}this.textHeight=r,this.textWidth=s}_shouldHandleEllipsis(e){var r=+this.fontSize(),s=this.lineHeight()*r,o=this.attrs.height,l=o!==Vr&&o!==void 0,h=this.padding(),d=o-h*2,f=this.wrap(),p=f!==Dd;return!p||l&&e+s>d}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,r=e!==Vr&&e!==void 0,s=this.padding(),o=e-s*2,l=this.ellipsis(),h=this.textArr[this.textArr.length-1];if(!(!h||!l)){if(r){var d=this._getTextWidth(h.text+kl)<o;d||(h.text=h.text.slice(0,h.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(h.text+kl)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,r=this.hasShadow();return e&&r?!0:super._useBufferCanvas()}}Qi.Text=Be;Be.prototype._fillFunc=Uy;Be.prototype._strokeFunc=zy;Be.prototype.className=Ry;Be.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Py._registerNode)(Be);ft.Factory.overWriteSetter(Be,"width",(0,er.getNumberOrAutoValidator)());ft.Factory.overWriteSetter(Be,"height",(0,er.getNumberOrAutoValidator)());ft.Factory.addGetterSetter(Be,"direction",h0);ft.Factory.addGetterSetter(Be,"fontFamily","Arial");ft.Factory.addGetterSetter(Be,"fontSize",12,(0,er.getNumberValidator)());ft.Factory.addGetterSetter(Be,"fontStyle",f0);ft.Factory.addGetterSetter(Be,"fontVariant",f0);ft.Factory.addGetterSetter(Be,"padding",0,(0,er.getNumberValidator)());ft.Factory.addGetterSetter(Be,"align",d0);ft.Factory.addGetterSetter(Be,"verticalAlign",by);ft.Factory.addGetterSetter(Be,"lineHeight",1,(0,er.getNumberValidator)());ft.Factory.addGetterSetter(Be,"wrap",Ly);ft.Factory.addGetterSetter(Be,"ellipsis",!1,(0,er.getBooleanValidator)());ft.Factory.addGetterSetter(Be,"letterSpacing",0,(0,er.getNumberValidator)());ft.Factory.addGetterSetter(Be,"text","",(0,er.getStringValidator)());ft.Factory.addGetterSetter(Be,"textDecoration","");var Lu={},p0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(h,d,f)=>{let p,y,P;p=f/2,y=0;for(let E=0;E<20;E++)P=p*t.tValues[20][E]+p,y+=t.cValues[20][E]*s(h,d,P);return p*y};t.getCubicArcLength=e;const r=(h,d,f)=>{f===void 0&&(f=1);const p=h[0]-2*h[1]+h[2],y=d[0]-2*d[1]+d[2],P=2*h[1]-2*h[0],E=2*d[1]-2*d[0],S=4*(p*p+y*y),v=4*(p*P+y*E),k=P*P+E*E;if(S===0)return f*Math.sqrt(Math.pow(h[2]-h[0],2)+Math.pow(d[2]-d[0],2));const x=v/(2*S),b=k/S,M=f+x,m=b-x*x,C=M*M+m>0?Math.sqrt(M*M+m):0,A=x*x+m>0?Math.sqrt(x*x+m):0,F=x+Math.sqrt(x*x+m)!==0?m*Math.log(Math.abs((M+C)/(x+A))):0;return Math.sqrt(S)/2*(M*C-x*A+F)};t.getQuadraticArcLength=r;function s(h,d,f){const p=o(1,f,h),y=o(1,f,d),P=p*p+y*y;return Math.sqrt(P)}const o=(h,d,f)=>{const p=f.length-1;let y,P;if(p===0)return 0;if(h===0){P=0;for(let E=0;E<=p;E++)P+=t.binomialCoefficients[p][E]*Math.pow(1-d,p-E)*Math.pow(d,E)*f[E];return P}else{y=new Array(p);for(let E=0;E<p;E++)y[E]=p*(f[E+1]-f[E]);return o(h-1,d,y)}},l=(h,d,f)=>{let p=1,y=h/d,P=(h-f(y))/d,E=0;for(;p>.001;){const S=f(y+P),v=Math.abs(h-S)/d;if(v<p)p=v,y+=P;else{const k=f(y-P),x=Math.abs(h-k)/d;x<p?(p=x,y-=P):P/=2}if(E++,E>500)break}return y};t.t2length=l})(p0);Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Path=void 0;const By=Pt,Vy=pn,jy=Oe,jr=p0;class Qe extends Vy.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Qe.parsePathData(this.data()),this.pathLength=Qe.getPathLength(this.dataArray)}_sceneFunc(e){var r=this.dataArray;e.beginPath();for(var s=!1,o=0;o<r.length;o++){var l=r[o].command,h=r[o].points;switch(l){case"L":e.lineTo(h[0],h[1]);break;case"M":e.moveTo(h[0],h[1]);break;case"C":e.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":e.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":var d=h[0],f=h[1],p=h[2],y=h[3],P=h[4],E=h[5],S=h[6],v=h[7],k=p>y?p:y,x=p>y?1:p/y,b=p>y?y/p:1;e.translate(d,f),e.rotate(S),e.scale(x,b),e.arc(0,0,k,P,P+E,1-v),e.scale(1/x,1/b),e.rotate(-S),e.translate(-d,-f);break;case"z":s=!0,e.closePath();break}}!s&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var y=p.points[4],P=p.points[5],E=p.points[4]+P,S=Math.PI/180;if(Math.abs(y-E)<S&&(S=Math.abs(y-E)),P<0)for(let v=y-S;v>E;v-=S){const k=Qe.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],v,0);e.push(k.x,k.y)}else for(let v=y+S;v<E;v+=S){const k=Qe.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],v,0);e.push(k.x,k.y)}}else if(p.command==="C")for(let v=0;v<=1;v+=.01){const k=Qe.getPointOnCubicBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(k.x,k.y)}else e=e.concat(p.points)});for(var r=e[0],s=e[0],o=e[1],l=e[1],h,d,f=0;f<e.length/2;f++)h=e[f*2],d=e[f*2+1],isNaN(h)||(r=Math.min(r,h),s=Math.max(s,h)),isNaN(d)||(o=Math.min(o,d),l=Math.max(l,d));return{x:r,y:o,width:s-r,height:l-o}}getLength(){return this.pathLength}getPointAtLength(e){return Qe.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,r,s,o){return Math.sqrt((s-e)*(s-e)+(o-r)*(o-r))}static getPathLength(e){let r=0;for(var s=0;s<e.length;++s)r+=e[s].pathLength;return r}static getPointAtLengthOfDataArray(e,r){var s,o=0,l=r.length;if(!l)return null;for(;o<l&&e>r[o].pathLength;)e-=r[o].pathLength,++o;if(o===l)return s=r[o-1].points.slice(-2),{x:s[0],y:s[1]};if(e<.01)return s=r[o].points.slice(0,2),{x:s[0],y:s[1]};var h=r[o],d=h.points;switch(h.command){case"L":return Qe.getPointOnLine(e,h.start.x,h.start.y,d[0],d[1]);case"C":return Qe.getPointOnCubicBezier((0,jr.t2length)(e,Qe.getPathLength(r),k=>(0,jr.getCubicArcLength)([h.start.x,d[0],d[2],d[4]],[h.start.y,d[1],d[3],d[5]],k)),h.start.x,h.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return Qe.getPointOnQuadraticBezier((0,jr.t2length)(e,Qe.getPathLength(r),k=>(0,jr.getQuadraticArcLength)([h.start.x,d[0],d[2]],[h.start.y,d[1],d[3]],k)),h.start.x,h.start.y,d[0],d[1],d[2],d[3]);case"A":var f=d[0],p=d[1],y=d[2],P=d[3],E=d[4],S=d[5],v=d[6];return E+=S*e/h.pathLength,Qe.getPointOnEllipticalArc(f,p,y,P,E,v)}return null}static getPointOnLine(e,r,s,o,l,h,d){h===void 0&&(h=r),d===void 0&&(d=s);var f=(l-s)/(o-r+1e-8),p=Math.sqrt(e*e/(1+f*f));o<r&&(p*=-1);var y=f*p,P;if(o===r)P={x:h,y:d+y};else if((d-s)/(h-r+1e-8)===f)P={x:h+p,y:d+y};else{var E,S,v=this.getLineLength(r,s,o,l),k=(h-r)*(o-r)+(d-s)*(l-s);k=k/(v*v),E=r+k*(o-r),S=s+k*(l-s);var x=this.getLineLength(h,d,E,S),b=Math.sqrt(e*e-x*x);p=Math.sqrt(b*b/(1+f*f)),o<r&&(p*=-1),y=f*p,P={x:E+p,y:S+y}}return P}static getPointOnCubicBezier(e,r,s,o,l,h,d,f,p){function y(x){return x*x*x}function P(x){return 3*x*x*(1-x)}function E(x){return 3*x*(1-x)*(1-x)}function S(x){return(1-x)*(1-x)*(1-x)}var v=f*y(e)+h*P(e)+o*E(e)+r*S(e),k=p*y(e)+d*P(e)+l*E(e)+s*S(e);return{x:v,y:k}}static getPointOnQuadraticBezier(e,r,s,o,l,h,d){function f(S){return S*S}function p(S){return 2*S*(1-S)}function y(S){return(1-S)*(1-S)}var P=h*f(e)+o*p(e)+r*y(e),E=d*f(e)+l*p(e)+s*y(e);return{x:P,y:E}}static getPointOnEllipticalArc(e,r,s,o,l,h){var d=Math.cos(h),f=Math.sin(h),p={x:s*Math.cos(l),y:o*Math.sin(l)};return{x:e+(p.x*d-p.y*f),y:r+(p.x*f+p.y*d)}}static parsePathData(e){if(!e)return[];var r=e,s=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];r=r.replace(new RegExp(" ","g"),",");for(var o=0;o<s.length;o++)r=r.replace(new RegExp(s[o],"g"),"|"+s[o]);var l=r.split("|"),h=[],d=[],f=0,p=0,y=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,P;for(o=1;o<l.length;o++){var E=l[o],S=E.charAt(0);for(E=E.slice(1),d.length=0;P=y.exec(E);)d.push(P[0]);for(var v=[],k=0,x=d.length;k<x;k++){if(d[k]==="00"){v.push(0,0);continue}var b=parseFloat(d[k]);isNaN(b)?v.push(0):v.push(b)}for(;v.length>0&&!isNaN(v[0]);){var M="",m=[],C=f,A=p,F,W,w,D,T,O,V,j,N,G;switch(S){case"l":f+=v.shift(),p+=v.shift(),M="L",m.push(f,p);break;case"L":f=v.shift(),p=v.shift(),m.push(f,p);break;case"m":var re=v.shift(),J=v.shift();if(f+=re,p+=J,M="M",h.length>2&&h[h.length-1].command==="z"){for(var $=h.length-2;$>=0;$--)if(h[$].command==="M"){f=h[$].points[0]+re,p=h[$].points[1]+J;break}}m.push(f,p),S="l";break;case"M":f=v.shift(),p=v.shift(),M="M",m.push(f,p),S="L";break;case"h":f+=v.shift(),M="L",m.push(f,p);break;case"H":f=v.shift(),M="L",m.push(f,p);break;case"v":p+=v.shift(),M="L",m.push(f,p);break;case"V":p=v.shift(),M="L",m.push(f,p);break;case"C":m.push(v.shift(),v.shift(),v.shift(),v.shift()),f=v.shift(),p=v.shift(),m.push(f,p);break;case"c":m.push(f+v.shift(),p+v.shift(),f+v.shift(),p+v.shift()),f+=v.shift(),p+=v.shift(),M="C",m.push(f,p);break;case"S":W=f,w=p,F=h[h.length-1],F.command==="C"&&(W=f+(f-F.points[2]),w=p+(p-F.points[3])),m.push(W,w,v.shift(),v.shift()),f=v.shift(),p=v.shift(),M="C",m.push(f,p);break;case"s":W=f,w=p,F=h[h.length-1],F.command==="C"&&(W=f+(f-F.points[2]),w=p+(p-F.points[3])),m.push(W,w,f+v.shift(),p+v.shift()),f+=v.shift(),p+=v.shift(),M="C",m.push(f,p);break;case"Q":m.push(v.shift(),v.shift()),f=v.shift(),p=v.shift(),m.push(f,p);break;case"q":m.push(f+v.shift(),p+v.shift()),f+=v.shift(),p+=v.shift(),M="Q",m.push(f,p);break;case"T":W=f,w=p,F=h[h.length-1],F.command==="Q"&&(W=f+(f-F.points[0]),w=p+(p-F.points[1])),f=v.shift(),p=v.shift(),M="Q",m.push(W,w,f,p);break;case"t":W=f,w=p,F=h[h.length-1],F.command==="Q"&&(W=f+(f-F.points[0]),w=p+(p-F.points[1])),f+=v.shift(),p+=v.shift(),M="Q",m.push(W,w,f,p);break;case"A":D=v.shift(),T=v.shift(),O=v.shift(),V=v.shift(),j=v.shift(),N=f,G=p,f=v.shift(),p=v.shift(),M="A",m=this.convertEndpointToCenterParameterization(N,G,f,p,V,j,D,T,O);break;case"a":D=v.shift(),T=v.shift(),O=v.shift(),V=v.shift(),j=v.shift(),N=f,G=p,f+=v.shift(),p+=v.shift(),M="A",m=this.convertEndpointToCenterParameterization(N,G,f,p,V,j,D,T,O);break}h.push({command:M||S,points:m,start:{x:C,y:A},pathLength:this.calcLength(C,A,M||S,m)})}(S==="z"||S==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(e,r,s,o){var l,h,d,f,p=Qe;switch(s){case"L":return p.getLineLength(e,r,o[0],o[1]);case"C":return(0,jr.getCubicArcLength)([e,o[0],o[2],o[4]],[r,o[1],o[3],o[5]],1);case"Q":return(0,jr.getQuadraticArcLength)([e,o[0],o[2]],[r,o[1],o[3]],1);case"A":l=0;var y=o[4],P=o[5],E=o[4]+P,S=Math.PI/180;if(Math.abs(y-E)<S&&(S=Math.abs(y-E)),h=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],y,0),P<0)for(f=y-S;f>E;f-=S)d=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(h.x,h.y,d.x,d.y),h=d;else for(f=y+S;f<E;f+=S)d=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),l+=p.getLineLength(h.x,h.y,d.x,d.y),h=d;return d=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],E,0),l+=p.getLineLength(h.x,h.y,d.x,d.y),l}return 0}static convertEndpointToCenterParameterization(e,r,s,o,l,h,d,f,p){var y=p*(Math.PI/180),P=Math.cos(y)*(e-s)/2+Math.sin(y)*(r-o)/2,E=-1*Math.sin(y)*(e-s)/2+Math.cos(y)*(r-o)/2,S=P*P/(d*d)+E*E/(f*f);S>1&&(d*=Math.sqrt(S),f*=Math.sqrt(S));var v=Math.sqrt((d*d*(f*f)-d*d*(E*E)-f*f*(P*P))/(d*d*(E*E)+f*f*(P*P)));l===h&&(v*=-1),isNaN(v)&&(v=0);var k=v*d*E/f,x=v*-f*P/d,b=(e+s)/2+Math.cos(y)*k-Math.sin(y)*x,M=(r+o)/2+Math.sin(y)*k+Math.cos(y)*x,m=function(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])},C=function(T,O){return(T[0]*O[0]+T[1]*O[1])/(m(T)*m(O))},A=function(T,O){return(T[0]*O[1]<T[1]*O[0]?-1:1)*Math.acos(C(T,O))},F=A([1,0],[(P-k)/d,(E-x)/f]),W=[(P-k)/d,(E-x)/f],w=[(-1*P-k)/d,(-1*E-x)/f],D=A(W,w);return C(W,w)<=-1&&(D=Math.PI),C(W,w)>=1&&(D=0),h===0&&D>0&&(D=D-2*Math.PI),h===1&&D<0&&(D=D+2*Math.PI),[b,M,d,f,F,D,y,h]}}Lu.Path=Qe;Qe.prototype.className="Path";Qe.prototype._attrsAffectingSize=["data"];(0,jy._registerNode)(Qe);By.Factory.addGetterSetter(Qe,"data");var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.Circle=void 0;const Hy=Pt,Wy=pn,Ky=we,Yy=Oe;class ti extends Wy.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Mu.Circle=ti;ti.prototype._centroid=!0;ti.prototype.className="Circle";ti.prototype._attrsAffectingSize=["radius"];(0,Yy._registerNode)(ti);Hy.Factory.addGetterSetter(ti,"radius",0,(0,Ky.getNumberValidator)());var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Line=void 0;const Xa=Pt,Xy=pn,m0=we,qy=Oe;function ru(t,e,r,s,o,l,h){var d=Math.sqrt(Math.pow(r-t,2)+Math.pow(s-e,2)),f=Math.sqrt(Math.pow(o-r,2)+Math.pow(l-s,2)),p=h*d/(d+f),y=h*f/(d+f),P=r-p*(o-t),E=s-p*(l-e),S=r+y*(o-t),v=s+y*(l-e);return[P,E,S,v]}function Ld(t,e){var r=t.length,s=[],o,l;for(o=2;o<r-2;o+=2)l=ru(t[o-2],t[o-1],t[o],t[o+1],t[o+2],t[o+3],e),!isNaN(l[0])&&(s.push(l[0]),s.push(l[1]),s.push(t[o]),s.push(t[o+1]),s.push(l[2]),s.push(l[3]));return s}class tr extends Xy.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var r=this.points(),s=r.length,o=this.tension(),l=this.closed(),h=this.bezier(),d,f,p;if(s){if(e.beginPath(),e.moveTo(r[0],r[1]),o!==0&&s>4){for(d=this.getTensionPoints(),f=d.length,p=l?0:4,l||e.quadraticCurveTo(d[0],d[1],d[2],d[3]);p<f-2;)e.bezierCurveTo(d[p++],d[p++],d[p++],d[p++],d[p++],d[p++]);l||e.quadraticCurveTo(d[f-2],d[f-1],r[s-2],r[s-1])}else if(h)for(p=2;p<s;)e.bezierCurveTo(r[p++],r[p++],r[p++],r[p++],r[p++],r[p++]);else for(p=2;p<s;p+=2)e.lineTo(r[p],r[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Ld(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),r=e.length,s=this.tension(),o=ru(e[r-2],e[r-1],e[0],e[1],e[2],e[3],s),l=ru(e[r-4],e[r-3],e[r-2],e[r-1],e[0],e[1],s),h=Ld(e,s),d=[o[2],o[3]].concat(h).concat([l[0],l[1],e[r-2],e[r-1],l[2],l[3],o[0],o[1],e[0],e[1]]);return d}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var r=e[0],s=e[0],o=e[1],l=e[1],h,d,f=0;f<e.length/2;f++)h=e[f*2],d=e[f*2+1],r=Math.min(r,h),s=Math.max(s,h),o=Math.min(o,d),l=Math.max(l,d);return{x:r,y:o,width:s-r,height:l-o}}}Nu.Line=tr;tr.prototype.className="Line";tr.prototype._attrsAffectingSize=["points","bezier","tension"];(0,qy._registerNode)(tr);Xa.Factory.addGetterSetter(tr,"closed",!1);Xa.Factory.addGetterSetter(tr,"bezier",!1);Xa.Factory.addGetterSetter(tr,"tension",0,(0,m0.getNumberValidator)());Xa.Factory.addGetterSetter(tr,"points",[],(0,m0.getNumberArrayValidator)());var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.Image=void 0;const Al=rt,Er=Pt,Qy=pn,Jy=Oe,os=we;class Bt extends Qy.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const r=this.getWidth(),s=this.getHeight(),o=this.cornerRadius(),l=this.attrs.image;let h;if(l){const d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?h=[l,this.cropX(),this.cropY(),d,f,0,0,r,s]:h=[l,0,0,r,s]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?Al.Util.drawRoundedRectPath(e,r,s,o):e.rect(0,0,r,s),e.closePath(),e.fillStrokeShape(this)),l&&(o&&e.clip(),e.drawImage.apply(e,h))}_hitFunc(e){var r=this.width(),s=this.height(),o=this.cornerRadius();e.beginPath(),o?Al.Util.drawRoundedRectPath(e,r,s,o):e.rect(0,0,r,s),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,r;return(e=this.attrs.width)!==null&&e!==void 0?e:(r=this.image())===null||r===void 0?void 0:r.width}getHeight(){var e,r;return(e=this.attrs.height)!==null&&e!==void 0?e:(r=this.image())===null||r===void 0?void 0:r.height}static fromURL(e,r,s=null){var o=Al.Util.createImageElement();o.onload=function(){var l=new Bt({image:o});r(l)},o.onerror=s,o.crossOrigin="Anonymous",o.src=e}}Fu.Image=Bt;Bt.prototype.className="Image";(0,Jy._registerNode)(Bt);Er.Factory.addGetterSetter(Bt,"cornerRadius",0,(0,os.getNumberOrArrayOfNumbersValidator)(4));Er.Factory.addGetterSetter(Bt,"image");Er.Factory.addComponentsGetterSetter(Bt,"crop",["x","y","width","height"]);Er.Factory.addGetterSetter(Bt,"cropX",0,(0,os.getNumberValidator)());Er.Factory.addGetterSetter(Bt,"cropY",0,(0,os.getNumberValidator)());Er.Factory.addGetterSetter(Bt,"cropWidth",0,(0,os.getNumberValidator)());Er.Factory.addGetterSetter(Bt,"cropHeight",0,(0,os.getNumberValidator)());var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Ellipse=void 0;const zu=Pt,Zy=pn,v0=we,$y=Oe;class nr extends Zy.Shape{_sceneFunc(e){var r=this.radiusX(),s=this.radiusY();e.beginPath(),e.save(),r!==s&&e.scale(1,s/r),e.arc(0,0,r,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Uu.Ellipse=nr;nr.prototype.className="Ellipse";nr.prototype._centroid=!0;nr.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,$y._registerNode)(nr);zu.Factory.addComponentsGetterSetter(nr,"radius",["x","y"]);zu.Factory.addGetterSetter(nr,"radiusX",0,(0,v0.getNumberValidator)());zu.Factory.addGetterSetter(nr,"radiusY",0,(0,v0.getNumberValidator)());qn.hitOnDragEnabled=!0;qn.capturePointerEventsEnabled=!0;qn.dragButtons=[0,2];const e5=Jn(vy),Tn=Jn(l0),ls=Jn(_r),t5=Jn(Ou),Gu=Jn(tu),y0=Jn(ma),vr=Jn(u0),_0=Jn(py),S0=(t,e)=>t.getTime()===e.getTime(),w0=(t,e)=>t.source===e.source&&t.flags===e.flags,C0=(t,e,r)=>{let s=t.length;if(s!==e.length)return!1;for(;s--&&r(t[s],e[s]););return s===-1},n5=(t,e,r)=>{if(t.size!==e.size)return!1;const s=t.entries();let o;for(;!(o=s.next()).done;)if(!e.has(o.value[0])||!r(o.value[1],e.get(o.value[0])))return!1;return!0},r5=(t,e)=>{if(t.size!==e.size)return!1;const r=t.values();let s;for(;!(s=r.next()).done;)if(!e.has(s.value))return!1;return!0},i5=(t,e)=>{let r=t.byteLength;if(r!==e.byteLength)return!1;for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1},Md=(t,e)=>{let r=t.length;if(r!==e.length)return!1;for(;r--&&t[r]===e[r];);return r===-1},{hasOwnProperty:Nd}=Object.prototype,s5=Object.keys,E0=(t,e,r)=>{let s,o=0;for(s in t)if(Nd.call(t,s)&&(o++,!Nd.call(e,s)||!r(t[s],e[s])))return!1;return s5(e).length===o},{valueOf:P0,toString:k0}=Object.prototype,zi=(t,e)=>{if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){const r=t.constructor;return r!==e.constructor?!1:r===Array?C0(t,e,zi):r===Date?S0(t,e):r===RegExp?w0(t,e):r===Map&&t instanceof Map&&e instanceof Map?n5(t,e,zi):r===Set&&t instanceof Set&&e instanceof Set?r5(t,e):r===DataView?i5(t,e):r===ArrayBuffer?Md(new Uint8Array(t),new Uint8Array(e)):ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)?Md(t,e):t.valueOf!==P0?t.valueOf()===e.valueOf():t.toString!==k0?t.toString()===e.toString():E0(t,e,zi)}return t!==t&&e!==e},Pr=(t,e)=>{if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){const r=t.constructor;return r!==e.constructor?!1:r===Array?C0(t,e,zi):r===Date?S0(t,e):r===RegExp?w0(t,e):t.valueOf!==P0?t.valueOf()===e.valueOf():t.toString!==k0?t.toString()===e.toString():E0(t,e,zi)}return t!==t&&e!==e},va={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb:({h:t,s:e,l:r},s)=>{if(!e)return r*2.55;t/=360,e/=100,r/=100;const o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;switch(s){case"r":return va.hue2rgb(l,o,t+1/3)*255;case"g":return va.hue2rgb(l,o,t)*255;case"b":return va.hue2rgb(l,o,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:r},s)=>{t/=255,e/=255,r/=255;const o=Math.max(t,e,r),l=Math.min(t,e,r),h=(o+l)/2;if(s==="l")return h*100;if(o===l)return 0;const d=o-l,f=h>.5?d/(2-o-l):d/(o+l);if(s==="s")return f*100;switch(o){case t:return((e-r)/d+(e<r?6:0))*60;case e:return((r-t)/d+2)*60;case r:return((t-e)/d+4)*60;default:return-1}}},a5={clamp:(t,e,r)=>e>r?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},o5=a5,l5={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},u5=l5,he={channel:va,lang:o5,unit:u5},Wn={};for(let t=0;t<=255;t++)Wn[t]=he.unit.dec2hex(t);const ht={ALL:0,RGB:1,HSL:2};class c5{constructor(){this.type=ht.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=ht.ALL}is(e){return this.type===e}}class h5{constructor(e,r){this.color=r,this.changed=!1,this.data=e,this.type=new c5}set(e,r){return this.color=r,this.changed=!1,this.data=e,this.type.type=ht.ALL,this}_ensureHSL(){const e=this.data,{h:r,s,l:o}=e;r===void 0&&(e.h=he.channel.rgb2hsl(e,"h")),s===void 0&&(e.s=he.channel.rgb2hsl(e,"s")),o===void 0&&(e.l=he.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r,g:s,b:o}=e;r===void 0&&(e.r=he.channel.hsl2rgb(e,"r")),s===void 0&&(e.g=he.channel.hsl2rgb(e,"g")),o===void 0&&(e.b=he.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,r=e.r;return!this.type.is(ht.HSL)&&r!==void 0?r:(this._ensureHSL(),he.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,r=e.g;return!this.type.is(ht.HSL)&&r!==void 0?r:(this._ensureHSL(),he.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,r=e.b;return!this.type.is(ht.HSL)&&r!==void 0?r:(this._ensureHSL(),he.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,r=e.h;return!this.type.is(ht.RGB)&&r!==void 0?r:(this._ensureRGB(),he.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,r=e.s;return!this.type.is(ht.RGB)&&r!==void 0?r:(this._ensureRGB(),he.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,r=e.l;return!this.type.is(ht.RGB)&&r!==void 0?r:(this._ensureRGB(),he.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(ht.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(ht.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(ht.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(ht.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(ht.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(ht.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const d5=h5,qa=new d5({r:0,g:0,b:0,a:0},"transparent"),Jr={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(Jr.re);if(!e)return;const r=e[1],s=parseInt(r,16),o=r.length,l=o%4===0,h=o>4,d=h?1:17,f=h?8:4,p=l?0:-1,y=h?255:15;return qa.set({r:(s>>f*(p+3)&y)*d,g:(s>>f*(p+2)&y)*d,b:(s>>f*(p+1)&y)*d,a:l?(s&y)*d/255:1},t)},stringify:t=>{const{r:e,g:r,b:s,a:o}=t;return o<1?`#${Wn[Math.round(e)]}${Wn[Math.round(r)]}${Wn[Math.round(s)]}${Wn[Math.round(o*255)]}`:`#${Wn[Math.round(e)]}${Wn[Math.round(r)]}${Wn[Math.round(s)]}`}},mr={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(mr.hueRe);if(e){const[,r,s]=e;switch(s){case"grad":return he.channel.clamp.h(parseFloat(r)*.9);case"rad":return he.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return he.channel.clamp.h(parseFloat(r)*360)}}return he.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const r=t.match(mr.re);if(!r)return;const[,s,o,l,h,d]=r;return qa.set({h:mr._hue2deg(s),s:he.channel.clamp.s(parseFloat(o)),l:he.channel.clamp.l(parseFloat(l)),a:h?he.channel.clamp.a(d?parseFloat(h)/100:parseFloat(h)):1},t)},stringify:t=>{const{h:e,s:r,l:s,a:o}=t;return o<1?`hsla(${he.lang.round(e)}, ${he.lang.round(r)}%, ${he.lang.round(s)}%, ${o})`:`hsl(${he.lang.round(e)}, ${he.lang.round(r)}%, ${he.lang.round(s)}%)`}},Gi={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Gi.colors[t];if(e)return Jr.parse(e)},stringify:t=>{const e=Jr.stringify(t);for(const r in Gi.colors)if(Gi.colors[r]===e)return r}},Mi={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const r=t.match(Mi.re);if(!r)return;const[,s,o,l,h,d,f,p,y]=r;return qa.set({r:he.channel.clamp.r(o?parseFloat(s)*2.55:parseFloat(s)),g:he.channel.clamp.g(h?parseFloat(l)*2.55:parseFloat(l)),b:he.channel.clamp.b(f?parseFloat(d)*2.55:parseFloat(d)),a:p?he.channel.clamp.a(y?parseFloat(p)/100:parseFloat(p)):1},t)},stringify:t=>{const{r:e,g:r,b:s,a:o}=t;return o<1?`rgba(${he.lang.round(e)}, ${he.lang.round(r)}, ${he.lang.round(s)}, ${he.lang.round(o)})`:`rgb(${he.lang.round(e)}, ${he.lang.round(r)}, ${he.lang.round(s)})`}},$t={format:{keyword:Gi,hex:Jr,rgb:Mi,rgba:Mi,hsl:mr,hsla:mr},parse:t=>{if(typeof t!="string")return t;const e=Jr.parse(t)||Mi.parse(t)||mr.parse(t)||Gi.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(ht.HSL)||t.data.r===void 0?mr.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Mi.stringify(t):Jr.stringify(t)},f5=(t,e)=>{const r=$t.parse(t);for(const s in e)r[s]=he.channel.clamp[s](e[s]);return $t.stringify(r)},x0=f5,g5=(t,e,r=0,s=1)=>{if(typeof t!="number")return x0(t,{a:e});const o=qa.set({r:he.channel.clamp.r(t),g:he.channel.clamp.g(e),b:he.channel.clamp.b(r),a:he.channel.clamp.a(s)});return $t.stringify(o)},p5=g5,An=t=>$t.format.hex.stringify($t.parse(t)),m5=(t,e,r)=>{const s=$t.parse(t),o=s[e],l=he.channel.clamp[e](o+r);return o!==l&&(s[e]=l),$t.stringify(s)},v5=m5,y5=(t,e)=>v5(t,"l",e),_5=y5,S5=(t,e)=>{const r=$t.parse(t),s={};for(const o in e)e[o]&&(s[o]=r[o]+e[o]);return x0(t,s)},w5=S5,C5=(t,e,r=50)=>{const{r:s,g:o,b:l,a:h}=$t.parse(t),{r:d,g:f,b:p,a:y}=$t.parse(e),P=r/100,E=P*2-1,S=h-y,v=((E*S===-1?E:(E+S)/(1+E*S))+1)/2,k=1-v,x=s*v+d*k,b=o*v+f*k,M=l*v+p*k,m=h*P+y*(1-P);return p5(x,b,M,m)},ba=C5,E5=(t,e)=>{const r=$t.parse(t),s={},o=(l,h,d)=>h>0?(d-l)*h/100:l*h/100;for(const l in e)s[l]=o(r[l],e[l],he.channel.max[l]);return w5(t,s)},ya=E5;function Fd({arrowType:t,points:e,springs:r,globalCompositeOperation:s}){const o=t==="odiamond"||t==="onormal";return K.jsx(y0,{points:e.flat(),closed:!0,fill:o?void 0:r.lineColor,stroke:r.lineColor,strokeWidth:1,lineCap:"round",lineJoin:"miter",perfectDrawEnabled:!1,listening:!1,globalCompositeOperation:s})}function P5({animate:t,labelBBox:e,isHovered:r,springs:s}){const o=Qn({to:{x:e.x-2,y:e.y-1,width:e.width+4,height:e.height+2,opacity:r?.8:.55},immediate:!t});return K.jsx(Tn,{...o,perfectDrawEnabled:!1,fill:s.labelBgColor,cornerRadius:2,globalCompositeOperation:"lighten",hitStrokeWidth:20})}function k5({animate:t=!0,edge:e,theme:r,isHovered:s,springs:o}){const{points:l,head:h,color:d,line:f=zg,headArrow:p,tail:y,tailArrow:P,labelBBox:E,labels:S}=e,v=!d||d===lf?"luminosity":"lighten",k=f==="dotted",x=k||f==="dashed";let b;return k?b=[1,5]:x&&(b=[10,8]),K.jsxs(K.Fragment,{children:[K.jsx(y0,{bezier:!0,dashEnabled:x,dashOffset:1,points:l.flat(),dash:b,stroke:o.lineColor,strokeWidth:o.lineWidth,hitStrokeWidth:20,lineCap:"round",lineJoin:"round",perfectDrawEnabled:!1,globalCompositeOperation:v}),h!=="none"&&p&&K.jsx(Fd,{arrowType:h??zh,points:p,springs:o,globalCompositeOperation:v},"head"),y!=="none"&&P&&K.jsx(Fd,{arrowType:y??zh,points:P,springs:o,globalCompositeOperation:v},"tail"),E&&E.width>0&&K.jsx(P5,{animate:t,labelBBox:E,isHovered:s,springs:o}),S&&S.map((M,m)=>K.jsx(t5,{x:M.pt[0],y:M.pt[1]-M.fontSize,fill:o.labelColor,fontFamily:r.font,fontSize:M.fontSize,fontStyle:M.fontStyle??"normal",text:M.text,perfectDrawEnabled:!1,listening:!1,globalCompositeOperation:v,shadowEnabled:o.opacity.to(C=>C>.5),shadowColor:"#222",shadowOpacity:.15,shadowOffsetX:1,shadowOffsetY:2,shadowBlur:2},m))]})}function x5(t){var r;const e=(r=t.target.getStage())==null?void 0:r.container();e&&(e.style.cursor="pointer")}function T0(t){var r;const e=(r=t.target.getStage())==null?void 0:r.container();e&&(e.style.cursor="")}let ca=!1,Ud;const qt={get isDragging(){return ca},set isDragging(t){if(clearTimeout(Ud),t){ca=t;return}ca&&(Ud=setTimeout(()=>{ca=!1},100))}};var qe={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let T5=0;function rr(t,e){const r=`atom${++T5}`,s={toString:()=>r};return typeof t=="function"?s.read=t:(s.init=t,s.read=A5,s.write=R5),e&&(s.write=e),s}function A5(t){return t(this)}function R5(t,e,r){return e(this,typeof r=="function"?r(t(this)):r)}const Rl=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,bl=t=>"init"in t,Il=t=>!!t.write,Ia=new WeakMap,b5=(t,e)=>{Ia.set(t,e),t.catch(()=>{}).finally(()=>Ia.delete(t))},zd=(t,e)=>{const r=Ia.get(t);r&&(Ia.delete(t),r(e))},Gd=(t,e)=>{t.status="fulfilled",t.value=e},Bd=(t,e)=>{t.status="rejected",t.reason=e},I5=t=>typeof(t==null?void 0:t.then)=="function",bi=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),Vd=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),Hr=t=>!!t&&"v"in t&&t.v instanceof Promise,O5=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,ha=t=>{if("e"in t)throw t.e;return t.v},Bu=()=>{const t=new WeakMap,e=new WeakMap,r=new Map;let s,o;(qe?"production":void 0)!=="production"&&(s=new Set,o=new Set);const l=w=>t.get(w),h=(w,D)=>{(qe?"production":void 0)!=="production"&&Object.freeze(D);const T=l(w);if(t.set(w,D),r.has(w)||r.set(w,T),Hr(T)){const O="v"in D?D.v instanceof Promise?D.v:Promise.resolve(D.v):Promise.reject(D.e);T.v!==O&&zd(T.v,O)}},d=(w,D,T,O)=>{const V=new Map(O?D.d:null);let j=!1;T.forEach((N,G)=>{!N&&Rl(w,G)&&(N=D),N?(V.set(G,N),D.d.get(G)!==N&&(j=!0)):(qe?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(j||D.d.size!==V.size)&&(D.d=V)},f=(w,D,T,O)=>{const V=l(w),j={d:(V==null?void 0:V.d)||new Map,v:D};if(T&&d(w,j,T,O),bi(V,j)&&V.d===j.d)return V;if(Hr(V)&&Hr(j)&&O5(V,j)){if(V.d===j.d)return V;j.v=V.v}return h(w,j),j},p=(w,D,T,O)=>{if(I5(D)){let V;const j=()=>{const G=l(w);if(!Hr(G)||G.v!==N)return;const re=f(w,N,T);e.has(w)&&G.d!==re.d&&A(w,re,G.d)},N=new Promise((G,re)=>{let J=!1;D.then($=>{J||(J=!0,Gd(N,$),G($),j())},$=>{J||(J=!0,Bd(N,$),re($),j())}),V=$=>{J||(J=!0,$.then(le=>Gd(N,le),le=>Bd(N,le)),G($))}});return N.orig=D,N.status="pending",b5(N,G=>{G&&V(G),O==null||O()}),f(w,N,T,!0)}return f(w,D,T)},y=(w,D,T)=>{const O=l(w),V={d:(O==null?void 0:O.d)||new Map,e:D};return T&&d(w,V,T),Vd(O,V)&&O.d===V.d?O:(h(w,V),V)},P=(w,D)=>{const T=l(w);if(!D&&T&&(e.has(w)||Array.from(T.d).every(([J,$])=>{if(J===w)return!0;const le=P(J);return le===$||bi(le,$)})))return T;const O=new Map;let V=!0;const j=J=>{if(Rl(w,J)){const le=l(J);if(le)return O.set(J,le),ha(le);if(bl(J))return O.set(J,void 0),J.init;throw new Error("no atom init")}const $=P(J);return O.set(J,$),ha($)};let N,G;const re={get signal(){return N||(N=new AbortController),N.signal},get setSelf(){return(qe?"production":void 0)!=="production"&&!Il(w)&&console.warn("setSelf function cannot be used with read-only atom"),!G&&Il(w)&&(G=(...J)=>{if((qe?"production":void 0)!=="production"&&V&&console.warn("setSelf function cannot be called in sync"),!V)return M(w,...J)}),G}};try{const J=w.read(j,re);return p(w,J,O,()=>N==null?void 0:N.abort())}catch(J){return y(w,J,O)}finally{V=!1}},E=w=>ha(P(w)),S=w=>{let D=e.get(w);return D||(D=m(w)),D},v=(w,D)=>!D.l.size&&(!D.t.size||D.t.size===1&&D.t.has(w)),k=w=>{const D=e.get(w);D&&v(w,D)&&C(w)},x=w=>{const D=N=>{var G;const re=new Set((G=e.get(N))==null?void 0:G.t);return r.forEach((J,$)=>{var le;(le=l($))!=null&&le.d.has(N)&&re.add($)}),re},T=new Array,O=new Set,V=N=>{if(!O.has(N)){O.add(N);for(const G of D(N))N!==G&&V(G);T.push(N)}};V(w);const j=new Set([w]);for(let N=T.length-1;N>=0;--N){const G=T[N],re=l(G);if(!re)continue;let J=!1;for(const $ of re.d.keys())if($!==G&&j.has($)){J=!0;break}if(J){const $=P(G,!0);bi(re,$)||j.add(G)}}},b=(w,...D)=>{let T=!0;const O=N=>ha(P(N)),V=(N,...G)=>{let re;if(Rl(w,N)){if(!bl(N))throw new Error("atom not writable");const J=l(N),$=p(N,G[0]);bi(J,$)||x(N)}else re=b(N,...G);if(!T){const J=F();(qe?"production":void 0)!=="production"&&s.forEach($=>$({type:"async-write",flushed:J}))}return re},j=w.write(O,V,...D);return T=!1,j},M=(w,...D)=>{const T=b(w,...D),O=F();return(qe?"production":void 0)!=="production"&&s.forEach(V=>V({type:"write",flushed:O})),T},m=(w,D,T)=>{var O;const V=T||[];(O=l(w))==null||O.d.forEach((N,G)=>{const re=e.get(G);re?re.t.add(w):G!==w&&m(G,w,V)}),P(w);const j={t:new Set(D&&[D]),l:new Set};if(e.set(w,j),(qe?"production":void 0)!=="production"&&o.add(w),Il(w)&&w.onMount){const{onMount:N}=w;V.push(()=>{const G=N((...re)=>M(w,...re));G&&(j.u=G)})}return T||V.forEach(N=>N()),j},C=w=>{var D;const T=(D=e.get(w))==null?void 0:D.u;T&&T(),e.delete(w),(qe?"production":void 0)!=="production"&&o.delete(w);const O=l(w);O?(Hr(O)&&zd(O.v),O.d.forEach((V,j)=>{if(j!==w){const N=e.get(j);N&&(N.t.delete(w),v(j,N)&&C(j))}})):(qe?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",w)},A=(w,D,T)=>{const O=new Set(D.d.keys()),V=new Set;T==null||T.forEach((j,N)=>{if(O.has(N)){O.delete(N);return}V.add(N);const G=e.get(N);G&&G.t.delete(w)}),O.forEach(j=>{const N=e.get(j);N?N.t.add(w):e.has(w)&&m(j,w)}),V.forEach(j=>{const N=e.get(j);N&&v(j,N)&&C(j)})},F=()=>{let w;for((qe?"production":void 0)!=="production"&&(w=new Set);r.size;){const D=Array.from(r);r.clear(),D.forEach(([T,O])=>{const V=l(T);if(V){const j=e.get(T);j&&V.d!==(O==null?void 0:O.d)&&A(T,V,O==null?void 0:O.d),j&&!(!Hr(O)&&(bi(O,V)||Vd(O,V)))&&(j.l.forEach(N=>N()),(qe?"production":void 0)!=="production"&&w.add(T))}else(qe?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((qe?"production":void 0)!=="production")return w},W=(w,D)=>{const T=S(w),O=F(),V=T.l;return V.add(D),(qe?"production":void 0)!=="production"&&s.forEach(j=>j({type:"sub",flushed:O})),()=>{V.delete(D),k(w),(qe?"production":void 0)!=="production"&&s.forEach(j=>j({type:"unsub"}))}};return(qe?"production":void 0)!=="production"?{get:E,set:M,sub:W,dev_subscribe_store:(w,D)=>{if(D!==2)throw new Error("The current StoreListener revision is 2.");return s.add(w),()=>{s.delete(w)}},dev_get_mounted_atoms:()=>o.values(),dev_get_atom_state:w=>t.get(w),dev_get_mounted:w=>e.get(w),dev_restore_atoms:w=>{for(const[T,O]of w)bl(T)&&(p(T,O),x(T));const D=F();s.forEach(T=>T({type:"restore",flushed:D}))}}:{get:E,set:M,sub:W}};let Ol;(qe?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const D5=()=>(Ol||((qe?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),Ol=Bu()),Ol);var L5={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A0=Y.createContext(void 0),R0=t=>Y.useContext(A0)||D5(),M5=({children:t,store:e})=>{const r=Y.useRef();return!e&&!r.current&&(r.current=Bu()),Y.createElement(A0.Provider,{value:e||r.current},t)},N5=t=>typeof(t==null?void 0:t.then)=="function",F5=Je.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Vu(t,e){const r=R0(),[[s,o,l],h]=Y.useReducer(p=>{const y=r.get(t);return Object.is(p[0],y)&&p[1]===r&&p[2]===t?p:[y,r,t]},void 0,()=>[r.get(t),r,t]);let d=s;(o!==r||l!==t)&&(h(),d=r.get(t));const f=e==null?void 0:e.delay;return Y.useEffect(()=>{const p=r.sub(t,()=>{h()});return h(),p},[r,t,f]),Y.useDebugValue(d),N5(d)?F5(d):d}function Qa(t,e){const r=R0();return Y.useCallback((...s)=>{if((L5?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return r.set(t,...s)},[r,t])}function U5(t,e){return[Vu(t,e),Qa(t)]}const Dl=(t,e,r)=>(e.has(r)?e:e.set(r,t())).get(r),z5=new WeakMap,G5=(t,e,r,s)=>{const o=Dl(()=>new WeakMap,z5,e),l=Dl(()=>new WeakMap,o,r);return Dl(t,l,s)};function b0(t,e,r=Object.is){return G5(()=>{const s=Symbol(),o=([h,d])=>{if(d===s)return e(h);const f=e(h,d);return r(d,f)?d:f},l=rr(h=>{const d=h(l),f=h(t);return f instanceof Promise||d instanceof Promise?Promise.all([f,d]).then(o):o([f,d])});return l.init=s,l},t,e,r)}const Ji=rr(null),Ja=rr(void 0),I0=(t,e=null,r=175)=>{if(r<=0){t(Ji,e);return}t(Ja,setTimeout(()=>{t(Ji,e)},r))},O0=rr(t=>t(Ji),(t,e,r)=>{clearTimeout(t(Ja));const s=t(Ji),o=typeof r=="function"?r(s):r;if(Qr(s,o))return!1;const l=o&&s?50:120;return o!=null&&(clearTimeout(t(Za)),D0(e,null,l)),I0(e,o,l),!0}),B5=b0(O0,t=>(t==null?void 0:t.id)??null),Zi=rr(null),Za=rr(void 0),D0=(t,e=null,r=175)=>{if(r<=0){t(Zi,e);return}t(Za,setTimeout(()=>{t(Zi,e)},r))},ju=rr(t=>t(Zi),(t,e,r)=>{clearTimeout(t(Za));const s=t(Zi),o=typeof r=="function"?r(s):r;if(Qr(s,o))return!1;const l=o&&s?50:120;return o!=null&&(clearTimeout(t(Ja)),I0(e,null,l)),D0(e,o,l),!0}),V5=b0(ju,t=>(t==null?void 0:t.id)??null),j5=rr(void 0,(t,e)=>{clearTimeout(t(Ja)),clearTimeout(t(Za)),e(Ji,null),e(Zi,null)});function H5(){return Vu(B5)}function W5(){return Qa(O0)}function K5(){return U5(ju)}function Y5(){return Vu(V5)}function X5(){return Qa(ju)}function q5(){return Qa(j5)}function Q5({children:t}){const[e]=Y.useState(()=>Bu());return K.jsx(M5,{store:e,children:t})}const J5=ku((t,e)=>e?{lineColor:An(ya(t.lineColor,{l:30})),labelColor:An(ya(t.labelColor,{l:40,s:5})),labelBgColor:An(ya(t.labelBgColor,{l:-10}))}:t);function Z5({animate:t,theme:e,diagram:r,onEdgeClick:s}){const o=Y5(),l=Y.useCallback((h,d=!1)=>({opacity:1,lineWidth:2,...J5(e.relationships[h.color??lf],d)}),[e]);return Gf(r.edges,{from:h=>({...l(h),opacity:.15,lineWidth:2}),initial:h=>l(h),update:h=>{const d=t&&o!==null&&o!==h.id,f=t&&o===h.id;return{...l(h,f),opacity:d?.4:1,lineWidth:f?3:2}},enter:{opacity:1},leave:h=>({...l(h),opacity:.05,lineWidth:2}),expires:!0,exitBeforeEnter:!0,immediate:!t,config:{duration:160,precision:.005},keys:h=>h.id+r.id})((h,d,{key:f,ctrl:p})=>K.jsx(L0,{animate:t,edge:d,isHovered:o===d.id,theme:e,ctrl:p,onEdgeClick:s},f))}const L0=Y.memo(({animate:t,edge:e,ctrl:r,theme:s,isHovered:o,onEdgeClick:l})=>{const h=X5();return K.jsx(ls,{opacity:r.springs.opacity,...l&&{onPointerClick:d=>{qt.isDragging||d.evt.button!==0||(d.cancelBubble=!0,l(e,d))}},...t&&{onPointerEnter:d=>{h(e),x5(d),d.cancelBubble=!0},onPointerLeave:d=>{h(null),T0(d)}},children:K.jsx(k5,{animate:t,edge:e,isHovered:o,theme:s,springs:r.springs})})},Pr);L0.displayName="EdgeShape";function $5(t,e,r){return Math.max(e,Math.min(t,r))}const Ze={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function jd(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function Hd(t,e,r,s=.15){return s===0?$5(t,e,r):t<e?-jd(e-t,r-e,s)+e:t>r?+jd(t-r,r-e,s)+r:t}function e2(t,[e,r],[s,o]){const[[l,h],[d,f]]=t;return[Hd(e,l,h,s),Hd(r,d,f,o)]}function t2(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n2(t){var e=t2(t,"string");return typeof e=="symbol"?e:String(e)}function dt(t,e,r){return e=n2(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,s)}return r}function ze(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wd(Object(r),!0).forEach(function(s){dt(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wd(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const M0={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Kd(t){return t?t[0].toUpperCase()+t.slice(1):""}const r2=["enter","leave"];function i2(t=!1,e){return t&&!r2.includes(e)}function s2(t,e="",r=!1){const s=M0[t],o=s&&s[e]||e;return"on"+Kd(t)+Kd(o)+(i2(r,o)?"Capture":"")}const a2=["gotpointercapture","lostpointercapture"];function o2(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const s=a2.includes(e)?"capturecapture":"capture",o=!!~e.indexOf(s);return o&&(e=e.replace("capture","")),{device:e,capture:o,passive:r}}function l2(t,e=""){const r=M0[t],s=r&&r[e]||e;return t+s}function $a(t){return"touches"in t}function N0(t){return $a(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function u2(t){return Array.from(t.touches).filter(e=>{var r,s;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(s=r.contains)===null||s===void 0?void 0:s.call(r,e.target))})}function c2(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function F0(t){return $a(t)?c2(t)[0]:t}function iu(t,e){try{const r=e.clientX-t.clientX,s=e.clientY-t.clientY,o=(e.clientX+t.clientX)/2,l=(e.clientY+t.clientY)/2,h=Math.hypot(r,s);return{angle:-(Math.atan2(r,s)*180)/Math.PI,distance:h,origin:[o,l]}}catch{}return null}function h2(t){return u2(t).map(e=>e.identifier)}function Yd(t,e){const[r,s]=Array.from(t.touches).filter(o=>e.includes(o.identifier));return iu(r,s)}function Ll(t){const e=F0(t);return $a(t)?e.identifier:e.pointerId}function Xd(t){const e=F0(t);return[e.clientX,e.clientY]}const qd=40,Qd=800;function d2(t){let{deltaX:e,deltaY:r,deltaMode:s}=t;return s===1?(e*=qd,r*=qd):s===2&&(e*=Qd,r*=Qd),[e,r]}function f2(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:s,metaKey:o,ctrlKey:l}=t;Object.assign(e,{shiftKey:r,altKey:s,metaKey:o,ctrlKey:l})}return e}function Oa(t,...e){return typeof t=="function"?t(...e):t}function g2(){}function p2(...t){return t.length===0?g2:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Jd(t,e){return Object.assign({},e,t||{})}const m2=32;class U0{constructor(e,r,s){this.ctrl=e,this.args=r,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:s,args:o}=this;r[s]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=o,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,s=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=s.from?Oa(s.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:s,shared:o}=this;r.args=this.args;let l=0;if(e&&(r.event=e,s.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,f2(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,l=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const F=r._delta.map(Math.abs);Ze.addTo(r._distance,F)}this.axisIntent&&this.axisIntent(e);const[h,d]=r._movement,[f,p]=s.threshold,{_step:y,values:P}=r;if(s.hasCustomTransform?(y[0]===!1&&(y[0]=Math.abs(h)>=f&&P[0]),y[1]===!1&&(y[1]=Math.abs(d)>=p&&P[1])):(y[0]===!1&&(y[0]=Math.abs(h)>=f&&Math.sign(h)*f),y[1]===!1&&(y[1]=Math.abs(d)>=p&&Math.sign(d)*p)),r.intentional=y[0]!==!1||y[1]!==!1,!r.intentional)return;const E=[0,0];if(s.hasCustomTransform){const[F,W]=P;E[0]=y[0]!==!1?F-y[0]:0,E[1]=y[1]!==!1?W-y[1]:0}else E[0]=y[0]!==!1?h-y[0]:0,E[1]=y[1]!==!1?d-y[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(E);const S=r.offset,v=r._active&&!r._blocked||r.active;v&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=o[this.ingKey]=r._active,e&&(r.first&&("bounds"in s&&(r._bounds=Oa(s.bounds,r)),this.setup&&this.setup()),r.movement=E,this.computeOffset()));const[k,x]=r.offset,[[b,M],[m,C]]=r._bounds;r.overflow=[k<b?-1:k>M?1:0,x<m?-1:x>C?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const A=r._active?s.rubberband||[0,0]:[0,0];if(r.offset=e2(r._bounds,r.offset,A),r.delta=Ze.sub(r.offset,S),this.computeMovement(),v&&(!r.last||l>m2)){r.delta=Ze.sub(r.offset,S);const F=r.delta.map(Math.abs);Ze.addTo(r.distance,F),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&l>0&&(r.velocity=[F[0]/l,F[1]/l],r.timeDelta=l)}}emit(){const e=this.state,r=this.shared,s=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!s.triggerAllEvents)return;const o=this.handler(ze(ze(ze({},r),e),{},{[this.aliasKey]:e.values}));o!==void 0&&(e.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function v2([t,e],r){const s=Math.abs(t),o=Math.abs(e);if(s>o&&s>r)return"x";if(o>s&&o>r)return"y"}class y2 extends U0{constructor(...e){super(...e),dt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ze.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ze.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,s=this.config;if(!r.axis&&e){const o=typeof s.axisThreshold=="object"?s.axisThreshold[N0(e)]:s.axisThreshold;r.axis=v2(r._movement,o)}r._blocked=(s.lockDirection||!!s.axis)&&!r.axis||!!s.axis&&s.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const _2=t=>t,Zd=.15,z0={enabled(t=!0){return t},eventOptions(t,e,r){return ze(ze({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Zd,Zd];case!1:return[0,0];default:return Ze.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Ze.toVector(t)},transform(t,e,r){const s=t||r.shared.transform;return this.hasCustomTransform=!!s,s||_2},threshold(t){return Ze.toVector(t,0)}},S2=0,us=ze(ze({},z0),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=S2){return t},bounds(t={}){if(typeof t=="function")return l=>us.bounds(t(l));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:s=-1/0,bottom:o=1/0}=t;return[[e,r],[s,o]]}}),$d={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class w2 extends y2{constructor(...e){super(...e),dt(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),s=e.currentTarget.getBoundingClientRect(),o={left:r.left-s.left+e.offset[0],right:r.right-s.right+e.offset[0],top:r.top-s.top+e.offset[1],bottom:r.bottom-s.bottom+e.offset[1]};e._bounds=us.bounds(o)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,s=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const o=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(o&&o.size>1&&s._pointerActive)&&(this.start(e),this.setupPointer(e),s._pointerId=Ll(e),s._pointerActive=!0,this.computeValues(Xd(e)),this.computeInitial(),r.preventScrollAxis&&N0(e)!=="mouse"?(s._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,s=this.config;if(!r._pointerActive)return;const o=Ll(e);if(r._pointerId!==void 0&&o!==r._pointerId)return;const l=Xd(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=Ze.sub(l,r._values),this.computeValues(l)),Ze.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(s.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,s=this.config;if(!r._active||!r._pointerActive)return;const o=Ll(e);if(r._pointerId!==void 0&&o!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[l,h]=r._distance;if(r.tap=l<=s.tapsThreshold&&h<=s.tapsThreshold,r.tap&&s.filterTaps)r._force=!0;else{const[d,f]=r._delta,[p,y]=r._movement,[P,E]=s.swipe.velocity,[S,v]=s.swipe.distance,k=s.swipe.duration;if(r.elapsedTime<k){const x=Math.abs(d/r.timeDelta),b=Math.abs(f/r.timeDelta);x>P&&Math.abs(p)>S&&(r.swipe[0]=Math.sign(d)),b>E&&Math.abs(y)>v&&(r.swipe[1]=Math.sign(f))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,s=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,C2(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=$d[e.key];if(r){const s=this.state,o=e.shiftKey?10:e.altKey?.1:1;this.start(e),s._delta=r(this.config.keyboardDisplacement,o),s._keyboardActive=!0,Ze.addTo(s._movement,s._delta),this.compute(e),this.emit()}}keyUp(e){e.key in $d&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function C2(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const cs=typeof window<"u"&&window.document&&window.document.createElement;function G0(){return cs&&"ontouchstart"in window}function E2(){return G0()||cs&&window.navigator.maxTouchPoints>1}function P2(){return cs&&"onpointerdown"in window}function k2(){return cs&&"exitPointerLock"in window.document}function x2(){try{return"constructor"in GestureEvent}catch{return!1}}const zt={isBrowser:cs,gesture:x2(),touch:G0(),touchscreen:E2(),pointer:P2(),pointerLock:k2()},T2=250,A2=180,R2=.5,b2=50,I2=250,O2=10,ef={mouse:0,touch:0,pen:8},D2=ze(ze({},us),{},{device(t,e,{pointer:{touch:r=!1,lock:s=!1,mouse:o=!1}={}}){return this.pointerLock=s&&zt.pointerLock,zt.touch&&r?"touch":this.pointerLock?"mouse":zt.pointer&&!o?"pointer":zt.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?T2:void 0,!(!zt.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:s=1,keys:o=!0}={}}){return this.pointerButtons=s,this.keys=o,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:s=3,axis:o=void 0}){const l=Ze.toVector(t,r?s:o?1:0);return this.filterTaps=r,this.tapsThreshold=s,l},swipe({velocity:t=R2,distance:e=b2,duration:r=I2}={}){return{velocity:this.transform(Ze.toVector(t)),distance:this.transform(Ze.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return A2;case!1:return 0;default:return t}},axisThreshold(t){return t?ze(ze({},ef),t):ef},keyboardDisplacement(t=O2){return t}});function L2(t){const[e,r]=t.overflow,[s,o]=t._delta,[l,h]=t._direction;(e<0&&s>0&&l<0||e>0&&s<0&&l>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&o>0&&h<0||r>0&&o<0&&h>0)&&(t._movement[1]=t._movementBound[1])}const M2=30,N2=100;class F2 extends U0{constructor(...e){super(...e),dt(this,"ingKey","pinching"),dt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:s}=this.state;e==="wheel"?this.state.offset=Ze.add(r,s):this.state.offset=[(1+r[0])*s[0],r[1]+s[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,s]=e._movement;if(!e.axis){const o=Math.abs(r)*M2-Math.abs(s);o<0?e.axis="angle":o>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,s=this.ctrl.touchIds;if(r._active&&r._touchIds.every(l=>s.has(l))||s.size<2)return;this.start(e),r._touchIds=Array.from(s).slice(0,2);const o=Yd(e,r._touchIds);o&&this.pinchStart(e,o)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,s=r._pointerEvents,o=this.ctrl.pointerIds;if(r._active&&Array.from(s.keys()).every(h=>o.has(h))||(s.size<2&&s.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const l=iu(...Array.from(s.values()));l&&this.pinchStart(e,l)}pinchStart(e,r){const s=this.state;s.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Yd(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const s=iu(...Array.from(r.values()));s&&this.pinchMove(e,s)}pinchMove(e,r){const s=this.state,o=s._values[1],l=r.angle-o;let h=0;Math.abs(l)>270&&(h+=Math.sign(l)),this.computeValues([r.distance,r.angle-360*h]),s.origin=r.origin,s.turns=h,s._movement=[s._values[0]/s._initial[0]-1,s._values[1]-s._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const s=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=Ze.sub(r._movement,s),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(s=>e[s]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-d2(e)[1]/N2*r.offset[0],0],Ze.addTo(r._movement,r._delta),L2(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const U2=ze(ze({},z0),{},{device(t,e,{shared:r,pointer:{touch:s=!1}={}}){if(r.target&&!zt.touch&&zt.gesture)return"gesture";if(zt.touch&&s)return"touch";if(zt.touchscreen){if(zt.pointer)return"pointer";if(zt.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:s={}}){const o=h=>{const d=Jd(Oa(r,h),{min:-1/0,max:1/0});return[d.min,d.max]},l=h=>{const d=Jd(Oa(s,h),{min:-1/0,max:1/0});return[d.min,d.max]};return typeof r!="function"&&typeof s!="function"?[o(),l()]:h=>[o(h),l(h)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",Ze.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});ze(ze({},us),{},{mouseOnly:(t=!0)=>t});ze(ze({},us),{},{mouseOnly:(t=!0)=>t});const Hu=new Map,su=new Map;function z2(t){Hu.set(t.key,t.engine),su.set(t.key,t.resolver)}const G2={key:"drag",engine:w2,resolver:D2},B2={key:"pinch",engine:F2,resolver:U2};function V2(t,e){if(t==null)return{};var r={},s=Object.keys(t),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function j2(t,e){if(t==null)return{};var r=V2(t,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}const H2={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=zt.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},W2=["target","eventOptions","window","enabled","transform"];function _a(t={},e){const r={};for(const[s,o]of Object.entries(e))switch(typeof o){case"function":r[s]=o.call(r,t[s],s,t);break;case"object":r[s]=_a(t[s],o);break;case"boolean":o&&(r[s]=t[s]);break}return r}function K2(t,e,r={}){const s=t,{target:o,eventOptions:l,window:h,enabled:d,transform:f}=s,p=j2(s,W2);if(r.shared=_a({target:o,eventOptions:l,window:h,enabled:d,transform:f},H2),e){const y=su.get(e);r[e]=_a(ze({shared:r.shared},p),y)}else for(const y in p){const P=su.get(y);P&&(r[y]=_a(ze({shared:r.shared},p[y]),P))}return r}class B0{constructor(e,r){dt(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,s,o,l){const h=this._listeners,d=l2(r,s),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},p=ze(ze({},f),l);e.addEventListener(d,o,p);const y=()=>{e.removeEventListener(d,o,p),h.delete(y)};return h.add(y),y}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Y2{constructor(){dt(this,"_timeouts",new Map)}add(e,r,s=140,...o){this.remove(e),this._timeouts.set(e,window.setTimeout(r,s,...o))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class X2{constructor(e){dt(this,"gestures",new Set),dt(this,"_targetEventStore",new B0(this)),dt(this,"gestureEventStores",{}),dt(this,"gestureTimeoutStores",{}),dt(this,"handlers",{}),dt(this,"config",{}),dt(this,"pointerIds",new Set),dt(this,"touchIds",new Set),dt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),q2(this,e)}setEventIds(e){if($a(e))return this.touchIds=new Set(h2(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=K2(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,s={};let o;if(!(r.target&&(o=r.target(),!o))){if(r.enabled){for(const h of this.gestures){const d=this.config[h],f=tf(s,d.eventOptions,!!o);if(d.enabled){const p=Hu.get(h);new p(this,e,h).bind(f)}}const l=tf(s,r.eventOptions,!!o);for(const h in this.nativeHandlers)l(h,"",d=>this.nativeHandlers[h](ze(ze({},this.state.shared),{},{event:d,args:e})),void 0,!0)}for(const l in s)s[l]=p2(...s[l]);if(!o)return s;for(const l in s){const{device:h,capture:d,passive:f}=o2(l);this._targetEventStore.add(o,h,"",s[l],{capture:d,passive:f})}}}}function Wr(t,e){t.gestures.add(e),t.gestureEventStores[e]=new B0(t,e),t.gestureTimeoutStores[e]=new Y2}function q2(t,e){e.drag&&Wr(t,"drag"),e.wheel&&Wr(t,"wheel"),e.scroll&&Wr(t,"scroll"),e.move&&Wr(t,"move"),e.pinch&&Wr(t,"pinch"),e.hover&&Wr(t,"hover")}const tf=(t,e,r)=>(s,o,l,h={},d=!1)=>{var f,p;const y=(f=h.capture)!==null&&f!==void 0?f:e.capture,P=(p=h.passive)!==null&&p!==void 0?p:e.passive;let E=d?s:s2(s,o,y);r&&P&&(E+="Passive"),t[E]=t[E]||[],t[E].push(l)},Q2=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function J2(t){const e={},r={},s=new Set;for(let o in t)Q2.test(o)?(s.add(RegExp.lastMatch),r[o]=t[o]):e[o]=t[o];return[r,e,s]}function Kr(t,e,r,s,o,l){if(!t.has(r)||!Hu.has(s))return;const h=r+"Start",d=r+"End",f=p=>{let y;return p.first&&h in e&&e[h](p),r in e&&(y=e[r](p)),p.last&&d in e&&e[d](p),y};o[s]=f,l[s]=l[s]||{}}function Z2(t,e){const[r,s,o]=J2(t),l={};return Kr(o,r,"onDrag","drag",l,e),Kr(o,r,"onWheel","wheel",l,e),Kr(o,r,"onScroll","scroll",l,e),Kr(o,r,"onPinch","pinch",l,e),Kr(o,r,"onMove","move",l,e),Kr(o,r,"onHover","hover",l,e),{handlers:l,config:e,nativeHandlers:s}}function $2(t,e={},r,s){const o=Je.useMemo(()=>new X2(t),[]);if(o.applyHandlers(t,s),o.applyConfig(e,r),Je.useEffect(o.effect.bind(o)),Je.useEffect(()=>o.clean.bind(o),[]),e.target===void 0)return o.bind.bind(o)}function e_(t){return t.forEach(z2),function(e,r){const{handlers:s,nativeHandlers:o,config:l}=Z2(e,r||{});return $2(s,l,void 0,o)}}function t_({selector:t,enabled:e,children:r}){const s=Y.useRef(null),o=Y.useRef(null),l=Y.useRef(),h=e??!0;return Y.useLayoutEffect(()=>{if(!s.current||!o.current)return;const d=s.current.getStage();if(d)if(h){const f=d.findOne(t);f&&(l.current=o.current,o.current.moveTo(f))}else l.current&&(l.current.moveTo(s.current),l.current=void 0)},[t,h]),Y.useEffect(()=>()=>{var d;(d=l.current)==null||d.destroy()},[]),K.jsx(_r,{ref:s,children:K.jsx(_r,{ref:o,children:r})})}const n_=Y.memo(({color:t="#BABABA",opacity:e=1,size:r=24,x:s,y:o})=>{const l=r/24,h=24/2;return K.jsxs(_r,{x:s,y:o,offsetX:h,offsetY:h,scaleX:l,scaleY:l,opacity:e,globalCompositeOperation:"luminosity",children:[K.jsx(tu,{data:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",stroke:t,strokeWidth:2,lineCap:"round",lineJoin:"round",listening:!1,perfectDrawEnabled:!1}),K.jsx(tu,{data:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",stroke:t,strokeWidth:2,lineCap:"round",lineJoin:"round",listening:!1,perfectDrawEnabled:!1})]})},Pr),V0=Y.memo(({fill:t="#BABABA",opacity:e=1,size:r=20,x:s,y:o})=>{const l=r/24,h=24/2;return K.jsxs(_r,{x:s,y:o,offsetX:h,offsetY:h,scaleX:l,scaleY:l,width:24,height:24,opacity:e,globalCompositeOperation:"luminosity",children:[K.jsx(u0,{x:11,y:11,radius:8,stroke:t,strokeWidth:2,perfectDrawEnabled:!1,listening:!1}),K.jsx(ma,{points:[22,22,16.65,16.65],stroke:t,strokeWidth:2,perfectDrawEnabled:!1,listening:!1,lineCap:"round",lineJoin:"round"}),K.jsx(ma,{points:[11,8,11,14],stroke:t,strokeWidth:2,perfectDrawEnabled:!1,listening:!1,lineCap:"round",lineJoin:"round"}),K.jsx(ma,{points:[8,11,14,11],stroke:t,strokeWidth:2,perfectDrawEnabled:!1,listening:!1,lineCap:"round",lineJoin:"round"})]})},Pr);function Wu(t){var r;const e=(r=t.target.getStage())==null?void 0:r.container();e&&(e.style.cursor="pointer")}function Ku(t){var r;const e=(r=t.target.getStage())==null?void 0:r.container();e&&(e.style.cursor="")}const r_=Wf(Number),j0=Y.memo(({animate:t,node:e,theme:r,isHovered:s})=>{const o=e.links;sf(o,"NodeLinkBtn: node.links is undefined");const l=30,h=l/2,d=r.elements[e.color];let f;switch(e.shape){case"browser":{f=21;break}case"mobile":{f=16;break}case"queue":{f=26;break}case"cylinder":case"storage":{f=14;break}default:f=16}let p;switch(e.shape){case"browser":{p=e.height-20;break}case"queue":{p=e.height-14;break}case"cylinder":case"storage":{p=e.height-22;break}default:p=e.height-16}const y=An(ba(d.fill,d.stroke,65)),P=An(ba(d.fill,d.stroke,75)),[E,S]=au(!1),v=s||E,k=Qn({to:{fill:E?P:y,opacity:E?1:0,scale:E?1.38:1,shadowOpacity:E?.3:.15},delay:v&&!E?100:0,immediate:!t});return K.jsxs(ls,{x:f,y:p,offsetX:h,offsetY:h,scaleX:k.scale,scaleY:k.scale,width:l,height:l,onPointerEnter:x=>{S(!0),Wu(x)},onPointerLeave:x=>{S(!1),Ku(x)},onPointerClick:x=>{qt.isDragging||x.evt.button!==0||(x.cancelBubble=!0,x.evt.stopPropagation(),window.open(o[0],"_blank")||window.alert("Please allow popups for this website"))},children:[K.jsx(vr,{x:h,y:h,radius:h,fill:k.fill,shadowBlur:4,shadowOpacity:k.shadowOpacity,shadowOffsetX:2,shadowOffsetY:6,shadowColor:r.shadow,shadowEnabled:v,perfectDrawEnabled:!1,opacity:k.opacity,hitStrokeWidth:h}),K.jsx(n_,{size:v?16:14,opacity:v?1:.9,x:h,y:h})]})},Pr);j0.displayName="NodeLinkBtn";const H0=Y.memo(({animate:t,node:e,theme:r,isHovered:s,onNodeClick:o})=>{const l=r.elements[e.color];let h;switch(e.shape){case"browser":case"mobile":h=e.height-20;break;default:h=e.height-16}const d=An(ba(l.fill,l.stroke,65)),f=An(ba(l.fill,l.stroke,75)),[p,y]=au(!1),P=s||p,E=Qn({to:{fill:p?f:d,opacity:p?1:0,y:h+(p?2:0),scale:p?1.38:1,shadowOpacity:p?.3:.15},delay:P&&!p?100:0,immediate:!t});return K.jsxs(ls,{x:e.width/2,y:E.y,offsetX:15,offsetY:15,scaleX:E.scale,scaleY:E.scale,width:30,height:30,onPointerEnter:S=>{y(!0),Wu(S)},onPointerLeave:S=>{y(!1),Ku(S)},onPointerClick:S=>{qt.isDragging||S.evt.button!==0||(S.cancelBubble=!0,o(e,S))},children:[K.jsx(vr,{x:15,y:15,radius:15,fill:E.fill,shadowBlur:4,shadowOpacity:E.shadowOpacity,shadowOffsetX:2,shadowOffsetY:6,shadowColor:r.shadow,shadowEnabled:P,perfectDrawEnabled:!1,opacity:E.opacity,hitStrokeWidth:15}),K.jsx(V0,{size:16,x:15,y:15})]})},Pr);H0.displayName="NodeZoomBtn";const W0=Y.memo(({animate:t,node:e,theme:r,ctrl:s,isHovered:o,onNodeClick:l})=>{const[h,d]=au(!1),f=28/2,p=An(_5(s.springs.fill.get(),10)),y=o||h,P=Qn({to:{opacity:h?1:0,x:f+4-(h?4:0),y:f+6-(h?4:0),scale:h?1.35:1,shadowOpacity:h?.3:.15},delay:y&&!h?100:0,immediate:!t});return K.jsx(_r,{onPointerEnter:E=>{d(!0),Wu(E)},onPointerLeave:E=>{d(!1),Ku(E)},onPointerClick:E=>{qt.isDragging||E.evt.button!==0||(E.cancelBubble=!0,l(e,E))},children:K.jsxs(ls,{x:P.x,y:P.y,offsetX:f,offsetY:f,scaleX:P.scale,scaleY:P.scale,width:28,height:28,children:[K.jsx(vr,{x:f,y:f,radius:f,fill:p,shadowBlur:4,shadowOpacity:P.shadowOpacity,shadowOffsetX:2,shadowOffsetY:6,shadowColor:r.shadow,shadowEnabled:y,perfectDrawEnabled:!1,opacity:P.opacity,hitStrokeWidth:f}),K.jsx(V0,{size:16,x:f,y:f})]})})},Pr);W0.displayName="CompoundZoomBtn";function i_({node:t,theme:e,springs:r,labelOffsetX:s=0}){const{labels:o}=t;return K.jsxs(K.Fragment,{children:[K.jsx(Tn,{cornerRadius:4,shadowColor:e.shadow,shadowBlur:t.level>0?20:10,shadowOpacity:t.level>0?.35:.6,shadowOffsetX:0,shadowOffsetY:5,shadowEnabled:r.opacity.to(l=>l>.7),width:r.width,height:r.height,fill:r.fill,strokeEnabled:!1,listening:!1}),o.map(({pt:[l,h],...d},f)=>K.jsx(Ou,{x:l+4,y:h,offsetX:s,width:t.width+s-4,fill:"#BABABA",fontFamily:e.font,fontSize:d.fontSize,fontStyle:d.fontStyle??"normal",align:d.align,text:d.text,wrap:"none",ellipsis:!0,perfectDrawEnabled:!1,globalCompositeOperation:"luminosity",listening:!1},f))]})}const nf=ku((t,e)=>An(ya(t,{l:-35-5*e,s:-15-5*e})));function fn(t){return t.children.length>0}function s_(t,e){const{position:[r,s],width:o,height:l,color:h}=e,d=t.elements[h],f=Math.round(o/2),p=Math.round(l/2);return{opacity:1,scaleX:1,scaleY:1,x:r+f,y:s+p,fill:fn(e)?nf(d.fill,e.depth??1):d.fill,stroke:fn(e)?nf(d.stroke,e.depth??1):d.stroke,width:o,height:l,offsetX:f,offsetY:p}}const a_=t=>Y.useCallback(e=>s_(t,e),[t]),ni=(t=!1,e,r)=>{const[s]=Qn({shadowBlur:t?30:10,shadowOpacity:t?.5:.3,shadowOffsetX:0,shadowOffsetY:t?16:5,shadowColor:e.shadow},[t,e]);return{shadowEnabled:r.opacity.to(o=>o>.8),...s}},Ml=new Map;function o_(t,e,r){const s=Dg(),o=Y.useRef(t?Ml.get(t):void 0),l=Y.useRef(o.current?"loaded":"loading"),[h,d]=Y.useState(0),f=Y.useRef(t),p=Y.useRef(e),y=Y.useRef(r);return(!t||f.current!==t||p.current!==e||y.current!==r)&&(l.current="loading",o.current=void 0,f.current=t,p.current=e,y.current=r),Y.useLayoutEffect(()=>{if(!t)return;const P=t,E=Ml.get(t);if(E){l.current="loaded",o.current!==E&&(o.current=E,d(Math.random()));return}const S=document.createElement("img");S.style.width="100%",S.style.height="auto";function v(){s()&&(Ml.set(P,S),f.current===P&&(l.current="loaded",o.current=S,d(Math.random())))}function k(){!s()||f.current!==P||(l.current="failed",o.current=void 0,d(Math.random()))}return S.addEventListener("load",v),S.addEventListener("error",k),S.src=t,()=>{S.removeEventListener("load",v),S.removeEventListener("error",k)}},[t,null,null]),o.current!==void 0?(l.current="loaded",[o.current,"loaded"]):(sf(l.current!=="loaded","image status cant be loaded"),[o.current,l.current])}function l_({icon:t,centerX:e,centerY:r,maxWidth:s,maxHeight:o,offsetX:l=0,offsetY:h=0}){const[d]=o_(t);if(!d)return null;const f=Math.min(s/d.naturalWidth,o/d.naturalHeight),p=Math.floor(d.naturalWidth*f),y=Math.floor(d.naturalHeight*f);return K.jsx(my,{image:d,x:e-p/2,y:r-y/2,offsetX:l,offsetY:h,width:p,height:y,listening:!1,globalCompositeOperation:"hard-light"})}function ri({node:t,maxWidth:e,paddingX:r=24,paddingY:s=24,offsetX:o=0,offsetY:l=0}){if(!t.icon)return null;const h=t.labels[0];if(!h)return null;const d=Math.floor(h.pt[1]-h.fontSize*1.25),f=Math.round(d-s-8),p=e??t.width-r*2,y=s+Math.floor(f/2),P=Math.floor(t.width/2);return K.jsx(l_,{icon:t.icon,centerX:P,centerY:y,maxWidth:p,maxHeight:f,offsetX:o,offsetY:l})}function kr({node:t,theme:e,offsetX:r=0,offsetY:s=0,maxWidth:o}){var P;const{labels:l,color:h}=t,d=e.elements[h],f=o??t.width-40,p=((P=l[0])==null?void 0:P.fontSize)??18,y=Math.ceil((t.width-f)/2);return K.jsx(_r,{x:y,y:3,offsetX:r,offsetY:s,children:l.map((E,S)=>{const v=E.fontSize===p;let k=d.hiContrast;return v||(k=d.loContrast),K.jsx(Ou,{text:E.text,x:0,y:E.pt[1]-E.fontSize,width:f,fill:k,fontFamily:e.font,fontSize:E.fontSize,fontStyle:E.fontStyle??"normal",align:"center",wrap:"none",strokeEnablaed:!1,perfectDrawEnabled:!1,listening:!1},E.text+S)})})}kr.displayName="NodeLabels";function u_(t,e,r=.0825){const s=Math.round(t/2),o=s,l=Math.round(r*s),h=e-2*l;return{path:`  M ${t},${l}
        a ${o},${l} 0,0,0 ${-t} 0
        l 0,${h}
        a ${o},${l} 0,0,0 ${t} 0
        l 0,${-h}
        `.replace(/\s+/g," ").trim(),ry:l,rx:o}}function c_({node:t,theme:e,springs:r,isHovered:s}){const{width:o,height:l}=t,{path:h,rx:d,ry:f}=u_(o,l),p=Qn({to:{rx:d,ry:f}});return K.jsxs(K.Fragment,{children:[K.jsx(Gu,{...ni(s,e,r),data:h,shadowForStrokeEnabled:!1,fill:r.fill}),K.jsx(_0,{x:p.rx,y:p.ry,radiusX:p.rx,radiusY:p.ry,fill:r.stroke}),K.jsx(kr,{node:t,offsetY:-4-f*(t.icon?1:0),theme:e}),K.jsx(ri,{node:t,paddingY:f+4,offsetY:-f-8})]})}function h_({node:t,theme:e,springs:r,isHovered:s}){e.elements[t.color];const o=t.width-40-30;return K.jsxs(K.Fragment,{children:[K.jsx(Tn,{...ni(s,e,r),cornerRadius:6,width:r.width,height:r.height,fill:r.stroke,perfectDrawEnabled:!1}),K.jsx(vr,{x:16,y:t.height/2,radius:10,fill:r.fill,listening:!1,perfectDrawEnabled:!1}),K.jsx(Tn,{cornerRadius:4,x:31,y:12,width:r.width.to(l=>l-43),height:r.height.to(l=>l-24),fill:r.fill,perfectDrawEnabled:!1,listening:!1}),K.jsx(kr,{node:t,theme:e,offsetX:-10,maxWidth:o}),K.jsx(ri,{node:t,offsetX:-10,maxWidth:o})]})}const Ii={width:115,height:120,path:"M57.9197 0C10.9124 0 33.5766 54.75 33.5766 54.75C38.6131 62.25 45.3285 60.75 45.3285 66C45.3285 70.5 39.4526 72 33.5766 72.75C24.3431 72.75 15.9489 71.25 7.55474 84.75C2.51825 93 0 120 0 120H115C115 120 112.482 93 108.285 84.75C99.8905 70.5 91.4963 72.75 82.2628 72C76.3869 71.25 70.5109 69.75 70.5109 65.25C70.5109 60.75 77.2263 62.25 82.2628 54C82.2628 54.75 104.927 0 57.9197 0V0Z"};function d_({node:t,theme:e,springs:r,isHovered:s}){return K.jsxs(K.Fragment,{children:[K.jsx(Tn,{...ni(s,e,r),cornerRadius:6,perfectDrawEnabled:!1,strokeEnabled:!1,width:r.width,height:r.height,fill:r.fill}),K.jsx(Gu,{x:r.width.to(o=>o-8),y:r.height,data:Ii.path,width:Ii.width,height:Ii.height,fill:r.stroke,opacity:.7,perfectDrawEnabled:!1,offsetX:Ii.width,offsetY:Ii.height,listening:!1}),K.jsx(kr,{node:t,theme:e}),K.jsx(ri,{node:t})]})}function f_(t,e,r=.2){const s=e,o=Math.round(s/2),l=Math.round(s/2*r),h=t-2*l;return{path:`  M ${l},0
        a ${l},${o} 0,0,0 0 ${s}
        l ${h},0
        a ${l},${o} 0,0,0 0 ${-s}
        `.replace(/\s+/g," ").trim(),ry:o,rx:l}}function g_({node:t,theme:e,springs:r,isHovered:s}){const{width:o,height:l}=t,{path:h,rx:d,ry:f}=f_(o,l),p=Qn({to:{x:o-d,y:f,rx:d,ry:f}});return K.jsxs(K.Fragment,{children:[K.jsx(Gu,{...ni(s,e,r),data:h,fill:r.fill}),K.jsx(_0,{x:p.x,y:p.y,radiusX:p.rx,radiusY:p.ry,fill:r.stroke}),K.jsx(kr,{node:t,maxWidth:o-2*d-10,offsetX:d,theme:e}),K.jsx(ri,{node:t,maxWidth:o-2*d-10,offsetX:d})]})}function p_({node:t,theme:e,springs:r,isHovered:s}){return K.jsxs(K.Fragment,{children:[K.jsx(Tn,{...ni(s,e,r),cornerRadius:6,strokeEnabled:!1,width:r.width,height:r.height,fill:r.fill}),K.jsx(kr,{node:t,theme:e}),K.jsx(ri,{node:t})]})}function m_({node:t,theme:e,springs:r,isHovered:s}){return K.jsxs(K.Fragment,{children:[K.jsx(Tn,{...ni(s,e,r),cornerRadius:6,strokeEnabled:!1,width:r.width,height:r.height,fill:r.stroke,perfectDrawEnabled:!1}),K.jsx(vr,{x:16,y:15,radius:7,fill:r.fill,listening:!1,perfectDrawEnabled:!1}),K.jsx(vr,{x:36,y:15,radius:7,fill:r.fill,listening:!1,perfectDrawEnabled:!1}),K.jsx(vr,{x:56,y:15,radius:7,fill:r.fill,listening:!1,perfectDrawEnabled:!1}),K.jsx(Tn,{cornerRadius:5,x:70,y:7,width:r.width.to(o=>o-80),height:16,fill:r.fill,listening:!1,perfectDrawEnabled:!1}),K.jsx(Tn,{cornerRadius:5,x:9,y:31,width:r.width.to(o=>o-18),height:r.height.to(o=>o-40),fill:r.fill,listening:!1,perfectDrawEnabled:!1}),K.jsx(kr,{node:t,theme:e,offsetY:-6}),K.jsx(ri,{node:t,paddingY:42})]})}function v_({shape:t}){switch(t){case"cylinder":case"storage":return c_;case"queue":return g_;case"browser":return m_;case"person":return d_;case"rectangle":return p_;case"mobile":return h_;default:return bg(t)}}const Nl=t=>{const e=(t.parent?t.parent+"-":"")+t.id;return fn(t)?"compound-"+e:e};function y_({animate:t,theme:e,diagram:r,onNodeClick:s}){const o=Y.useRef(new Map),l=Y.useRef(r);l.current.id!==r.id&&(o.current=new Map(l.current.nodes.map(y=>[y.id,y]))),l.current=r;const h=o.current,d=H5(),[f]=K5(),p=a_(e);return Gf(r.nodes,{initial:p,from:y=>{const P=h.get(y.id);if(P)return p(P);const E=fn(y)?.85:.6;return{...p(y),opacity:0,scaleX:E,scaleY:E}},enter:y=>{const P=h.has(y.id);return{...p(y),delay:P?50:70}},update:y=>{const P=t&&f&&f.source!==y.id&&f.target!==y.id,E=t&&!P&&!fn(y)&&d===y.id?1.08:1;return{...p(y),opacity:P?.3:1,scaleX:E,scaleY:E}},leave:y=>{const P=r.nodes.find(S=>S.id===y.id);if(P&&Nl(y)!==Nl(P))return{opacity:0,immediate:!0};const E=fn(y)?.7:.5;return{opacity:0,scaleX:E,scaleY:E,config:{duration:120}}},sort:(y,P)=>fn(y)===fn(P)?y.level-P.level:fn(y)?-1:1,expires:!0,immediate:!t,keys:Nl})((y,P,{key:E,ctrl:S,expired:v})=>K.jsx(K0,{animate:t,node:P,theme:e,ctrl:S,expired:v,onNodeClick:s,isHovered:P.id===d},E))}const K0=Y.memo(({animate:t,node:e,ctrl:r,theme:s,isHovered:o,expired:l,onNodeClick:h})=>{const d=W5(),f=fn(e),p=t&&!!e.navigateTo&&!!h,y=v_(e),P=r.springs;return K.jsx(t_,{selector:".top",enabled:o&&!f,children:K.jsxs(ls,{name:e.id,visible:l!==!0,...t&&{onPointerEnter:E=>{d(e)},onPointerLeave:E=>{d(null),T0(E)}},...h&&{onPointerClick:E=>{qt.isDragging||E.evt.button!==0||(E.cancelBubble=!0,p||h(e,E))}},x:P.x,y:P.y,offsetX:P.offsetX,offsetY:P.offsetY,width:P.width,height:P.height,scaleX:P.scaleX,scaleY:P.scaleY,opacity:P.opacity,children:[f&&K.jsxs(K.Fragment,{children:[K.jsx(i_,{node:e,theme:s,springs:P,labelOffsetX:p?-22:0}),p&&K.jsxs(K.Fragment,{children:[K.jsx(l0,{x:0,y:0,width:e.width,height:Math.min(e.height,150),perfectDrawEnabled:!1}),K.jsx(W0,{animate:t,node:e,ctrl:r,theme:s,isHovered:o,onNodeClick:h})]})]}),!f&&K.jsxs(K.Fragment,{children:[K.jsx(y,{node:e,theme:s,springs:P,isHovered:o}),p&&K.jsx(H0,{animate:t,node:e,ctrl:r,theme:s,isHovered:o,onNodeClick:h}),e.links&&K.jsx(j0,{animate:t,node:e,ctrl:r,theme:s,isHovered:o})]})]})})},(t,e)=>Pr(t.node,e.node)&&t.isHovered===e.isHovered&&t.expired===e.expired);K0.displayName="NodeShape";const __=e_([G2,B2]),rf=t=>{const e=Y.useRef(t);return Object.assign(e.current,t),e},S_=[0,0,0,0];function w_(t){let e=t;for(;e&&e.nodeType!=="Stage";){const r=e.name();if(r!=="")return r;e=e.parent}return null}const Y0=Y.forwardRef(({diagram:t,padding:e=S_,pannable:r=!0,zoomable:s=!0,animate:o=!0,initialPosition:l,onEdgeClick:h,onNodeClick:d,onNodeContextMenu:f,onStageClick:p,onStageContextMenu:y,width:P,height:E,minZoom:S=.2,maxZoom:v=1.1,...k},x)=>{const b=!o,M=t.id,m=rf({onEdgeClick:h,onNodeClick:d}),C=Y.useRef(null),A=Fg(null,X=>(C.current=(X==null?void 0:X.container())??null,C.current&&(C.current.style.touchAction="none"),X)),[F,W,w,D]=r_(e)?[e,e,e,e]:e,T=P??t.width+D+W,O=E??t.height+F+w,V=Y.useCallback((X,se)=>{var R,H;(H=(R=m.current).onNodeClick)==null||H.call(R,X,se)},[m]),j=Y.useCallback((X,se)=>{var R,H;(H=(R=m.current).onEdgeClick)==null||H.call(R,X,se)},[m]),N=(X,se)=>{const R=(se==null?void 0:se.keepZoom)??!1,H=C.current,Z=R===!0&&!pm(A.current)?A.current.scaleX():v,ae={width:Math.min((H==null?void 0:H.clientWidth)??T,T)-D-W,height:Math.min((H==null?void 0:H.clientHeight)??O,O)-F-w},ye=Math.min(ae.width/X.width,ae.height/X.height),pe=gm(S,Z,ye),Ke={x:((T-X.width)*pe+ae.width)/2,y:((O-X.height)*pe+ae.height)/2};return{x:Math.ceil(D+Ke.x-X.x*pe),y:Math.ceil(F+Ke.y-X.y*pe),scale:pe}},G=()=>N({x:0,y:0,width:t.width,height:t.height}),[re,J]=Qn(()=>l?{from:l,to:G(),immediate:b}:{to:G(),immediate:b},[]),$=(X,se)=>{J.start({to:N(X,{keepZoom:(se==null?void 0:se.keepZoom)??!0}),delay:(se==null?void 0:se.delay)??0,immediate:b||((se==null?void 0:se.immediate)??!1)})},le=X=>{J.start({to:G(),delay:(X==null?void 0:X.delay)??0,immediate:b||((X==null?void 0:X.immediate)??!1)})},ue=rf({diagram:t,width:T,height:O,centerOnRect:$,centerAndFit:le,resetStageZoom:X=>{J.start({to:{x:0,y:0,scale:1},immediate:b})}});Y.useImperativeHandle(x,()=>({get stage(){return A.current},get diagramView(){return ue.current.diagram},get container(){var X;return((X=A.current)==null?void 0:X.container())??null},resetStageZoom:X=>{ue.current.resetStageZoom(X)},centerOnNode:(X,se)=>ue.current.centerOnRect({x:X.position[0],y:X.position[1],width:X.width,height:X.height},se),centerOnRect:(X,se)=>ue.current.centerOnRect(X,se),centerAndFit:X=>ue.current.centerAndFit(X)}),[ue,A]);const Te=q5();Fh(()=>{Te(),ue.current.centerAndFit({delay:200})},[M]),Fh(()=>{ue.current.centerAndFit({keepZoom:!0})},[O,T]),Y.useEffect(()=>{if(!s)return;const X=se=>se.preventDefault();return document.addEventListener("gesturestart",X),document.addEventListener("gesturechange",X),()=>{document.removeEventListener("gesturestart",X),document.removeEventListener("gesturechange",X)}},[s]),__({onDrag:X=>{const{first:se,last:R,down:H,intentional:Z,offset:[ae,ye]}=X;Z&&((se||R)&&(qt.isDragging=se&&!R),J.start({to:{x:ae,y:ye},delay:0,immediate:b||H&&!R}))},onPinch:({memo:X,first:se,last:R,origin:[H,Z],movement:[ae],offset:[ye]})=>{if(se){qt.isDragging=!0;const pt=Yr(A.current),{x:xe,y:en}=pt.getAbsolutePosition(),kt=Math.round(H-xe),tn=Math.round(Z-en);X=[pt.x(),pt.y(),kt,tn]}R&&(qt.isDragging=!1);const pe=Math.round(X[0]-(ae-1)*X[2]),Ke=Math.round(X[1]-(ae-1)*X[3]);return J.start({to:{x:pe,y:Ke,scale:ye},delay:0}),X}},{target:C,drag:{target:C,enabled:r,threshold:4,from:()=>{var X,se;return[((X=A.current)==null?void 0:X.x())??0,((se=A.current)==null?void 0:se.y())??0]},pointer:Object.assign({keys:!1,mouse:!0,capture:!0},!f&&!y?{buttons:-1}:void 0)},pinch:{eventOptions:{passive:!0,capture:!0},target:C,pointer:{touch:!0},from:()=>{var X;return[((X=A.current)==null?void 0:X.scaleX())??1,0]},enabled:s,scaleBounds:{min:S,max:v+.4},rubberband:.045,pinchOnWheel:!0}});const ke={animate:o,theme:Ig,diagram:t},Ve=t.width/2,Ae=t.height/2;return K.jsxs(e5,{_useStrictMode:!0,ref:A,width:T,height:O,offsetX:T/2,offsetY:O/2,x:re.x,y:re.y,scaleX:re.scale,scaleY:re.scale,...(y||f)&&{onContextMenu:X=>{if(!(qt.isDragging||!A.current)){if(X.target===A.current||!f){X.cancelBubble=!0,y==null||y(A.current,X);return}if(f){const se=w_(X.target),R=se&&ue.current.diagram.nodes.find(H=>H.id===se);if(R){X.cancelBubble=!0,f(R,X);return}}}}},...p&&{onPointerClick:X=>{qt.isDragging||X.evt.button!==0||!A.current||X.target===A.current&&(X.cancelBubble=!0,p(A.current,X))}},...s&&{onPointerDblClick:X=>{qt.isDragging||X.evt.button!==0||!A.current||X.target===A.current&&(X.cancelBubble=!0,le())}},...k,children:[K.jsxs(Rd,{x:Ve,offsetX:Ve,y:Ae,offsetY:Ae,scaleX:1,scaleY:1,children:[K.jsx(y_,{...ke,onNodeClick:d?V:void 0}),K.jsx(Z5,{...ke,onEdgeClick:h?j:void 0})]}),K.jsx(Rd,{name:"top"})]})});Y0.displayName="DiagramKonva";const X0=Y.forwardRef((t,e)=>K.jsx(Q5,{children:K.jsx(Y0,{...t,ref:e})}));X0.displayName="Diagram";function C_(){const t=Y.useRef(null),[e]=Y.useState(()=>({get stage(){var r;return((r=t.current)==null?void 0:r.stage)??null},get diagramView(){return Yr(t.current,"not mounted, use ref").diagramView},get container(){var r;return((r=t.current)==null?void 0:r.container)??null},resetStageZoom:r=>Yr(t.current,"not mounted, use ref").resetStageZoom(r),centerOnNode:(r,s)=>Yr(t.current,"not mounted, use ref").centerOnNode(r,s),centerOnRect:(r,s)=>Yr(t.current,"not mounted, use ref").centerOnRect(r,s),centerAndFit:r=>Yr(t.current,"not mounted, use ref").centerAndFit(r)}));return[t,e]}var E_="_165t42y0";const P_=[70,20,20,40];function Fl(t,e=1){const r=Math.pow(10,e);return Math.round(t*r)/r}function x_({diagram:t,onNodeClick:e}){const{width:r,height:s}=Ug(),o=Y.useRef(null),[l,h]=C_(),d=Y.useCallback(()=>{var k;const f=h.stage,p=(k=o.current)==null?void 0:k.style;if(!f||!p)return;const y=f.getAbsolutePosition();let P=f.scaleX();for(;P<.5;)P=P/.5;const E=Fl(24*P),S=Fl(y.x),v=Fl(y.y);p.setProperty("--diagram-bg-size",`${E}px`),p.setProperty("--diagram-bg-position-x",`${S}px`),p.setProperty("--diagram-bg-position-y",`${v}px`)},[h,o]);return Y.useEffect(()=>{const f=h.stage;if(f)return f.on("absoluteTransformChange",d),d(),()=>{f.off("absoluteTransformChange",d)}},[h]),K.jsx(Ag,{pos:"fixed",inset:0,className:E_,ref:o,children:K.jsx(X0,{ref:l,diagram:t,padding:P_,maxZoom:1.05,width:r,height:s,onNodeClick:(f,p)=>{if(e)return e(f,p);h.centerOnNode(f,{keepZoom:!0})},onStageClick:f=>({}),onEdgeClick:f=>({})})})}export{x_ as default};
